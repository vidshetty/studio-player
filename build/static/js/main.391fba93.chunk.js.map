{"version":3,"sources":["assets/latest-whiteblack.svg","assets/blackandwhitelogo.svg","common.js","homepage/mainpanel/midpanel/Queue.js","homepage/mainpanel/midpanel/index.js","homepage/mainpanel/index.js","homepage/index.js","index.js","opening/index.js","assets/deletewhite.svg","assets/playbutton-white.svg","assets/pausebutton-white.svg","assets/placeholder.svg","assets/expand-white.svg","assets/minimizeplayer-white.svg","homepage/mainpanel/midpanel/HomeScreen.js","assets/playbutton-black.svg","assets/pausebutton-black.svg","assets/addbutton-black.svg","assets/backbutton-white.svg","assets/copyright.png","homepage/mainpanel/midpanel/AlbumView.js","homepage/mainpanel/midpanel/Library.js","homepage/mainpanel/midpanel/Radio.js","homepage/mainpanel/midpanel/Search.js","assets/searchicon.svg","assets/homewhite.svg","assets/searchwhite.svg","assets/librarywhite.svg","assets/homelight.svg","assets/searchlight.svg","assets/librarylight.svg","assets/radio2.svg","assets/radiolight2.svg","assets/tickmark.svg","assets/repeat-white.svg","assets/repeat-one-white.svg","assets/norepeat-disabled.svg","assets/shuffle-disabled.svg","assets/shuffle-enabled.svg","assets/nextbutton-white.svg","assets/previousbutton-white.svg","assets/uparrow.svg","assets/fullscreenaquamarine.svg","assets/fullscreenwhite.svg","assets/innerfullaquamarine.svg","assets/innerfullwhite.svg","assets/downarrow.svg","assets/volume.svg"],"names":["songservers","keepServersActive","a","console","log","length","axios","method","url","then","res","data","archives","Promise","all","map","server","get","message","sendRequest","config","baseHeaders","USER","localStorage","getItem","endpoint","headers","redirect","window","location","href","Timer","delay","cb","_time","_callback","_timeoutTimer","_intervalTimer","_secondsTracker","_done","_paused","_started","_startInterval","clearInterval","setInterval","this","start","t","clearTimeout","setTimeout","pause","continue","diff","canPause","canContinue","hasStarted","hasFinished","done","stop","wait","time","resolve","checkX","cursorX","sWidth","checkY","cursorY","sHeight","num","heightOfBody","modifyLibrary","decidingNumber","key","times","i","push","convertTime","secs","total","Math","floor","min","arr","toString","split","createGlobalState","initialValue","value","subscribers","getValue","setValue","newState","forEach","subscriber","subscribe","itemToSubscribe","indexOf","unsubscribe","itemToUnsubscribe","filter","queueLength","songIndex","actualQueue","firstpart","lastpart","miniLocal","isOpen","openLocal","tabLocal","queueOpenedLocal","whichRepeat","isSongPlaying","volumerange","elapsedTime","duration","range","style","pauseOrPlay","isBuffering","trackingTimer","screenLocal","CustomUseState","globalState","useState","setState","state","reRender","useEffect","playingGlobal","tabGlobal","topBarGlobal","button","buttonFunc","title","bgColor","searchBarGlobal","open","input","prevTab","fullScreenGlobal","show","albumGlobal","queueGlobal","queueOpenedGlobal","songIsPausedGlobal","repeatTypeGlobal","radioGlobal","openerGlobal","yValue","xValue","type","profileOpener","responseBar","msg","miniPlayerGlobal","prefix","Opening2","redirectValue","setRedirectValue","loaderClass","setLoaderClass","setIsPlaying","setSong","setQueue","queue","JSON","parse","nowplaying","list","concat","slice","setItem","stringify","index","findIndex","each","Title","Album","backup","removeItem","call","status","to","className","src","logo2","alt","SongInQueue","nowPlaying","songIsPaused","song","number","openerFunc","hovered","setHovered","setPlayingSong","setSongIsPaused","marginTop","marginBottom","borderBottom","onMouseOver","e","onMouseOut","backgroundColor","onClick","Thumbnail","color","Artist","marginLeft","stopPropagation","dimensions","x","clientX","y","clientY","windowDim","width","document","documentElement","clientWidth","height","clientHeight","Duration","Queue","queueOpened","setQueueOpened","openerDetails","setOpenerDetails","update","setUpdate","isLoading","setIsLoading","setResBar","topBarConfig","mini","setMini","sDiv","useRef","hist","useHistory","goToAlbum","handleMenu","selectedSong","name","func","removeIndex","splice","removeSong","documentClick","includes","target","documentScroll","current","querySelector","addEventListener","removeEventListener","Expand","cover","Minimize","albumName","overflowY","EachInQuickPick","Play","StartRadio","picks","item","EachAlbum","songPausedLocal","Object","keys","Pause","AlbumArtist","NewActualHomeScreen","setData","setPicks","albums","quickPicks","album","HomeScreen","NewSongRow","currentSong","setCurrentSong","songPaused","setSongPaused","playing","setPlaying","resp","setResp","isItSame","currType","Type","songType","PauseWhite","PlayWhite","newQueue","Tracks","Color","Year","setUpPlayer","NewActualAlbumView","params","useParams","setAlbum","playingSong","setResObj","topDiv","currentLocation","useLocation","decidePlayOrPause","sameAlbum","titleInSong","every","playAlbumNext","pathname","sec","track","dur","parseInt","div","parseFloat","addAndDisplay","main","mainQueue","AddButton","copyright","String","fromCharCode","AlbumView","props","setAlbumForPlayer","element","setElement","setShow","observer","IntersectionObserver","isIntersecting","threshold","currentElement","currentObserver","observe","unobserve","display","ref","NewActualLibrary","library","setLibrary","addAlbumToQueue","saved","sessionStorage","Library","ActualRadio","isRadioOn","Radio","Search","searchConfig","setSearchConfig","scrollTimeout","MidPanelLoader","NewReleases","Mid","scrollRef","removeClass","classList","remove","handleScroll","add","path","TopSearchBar","TopNav","userName","picture","tab","setTab","setProfileOpen","loc","initial","setRouteFunc","route","getCorrespondingRoute","openProfile","logo","currentTab","fontSize","toUpperCase","MainPanel","audio","Audio","mainVolume","ctrlKey","currentSongIndex","percent","setVolume","timeout","changeColor","bufferPercent","changeColorVolume","Player","buffering","setBuffering","isPlaying","repeatType","setRepeatType","shuffle","setShuffle","screen","prevSong","usePrevious","setRadioOn","play","openQueue","goToNext","currentTime","nextIndex","goToPrevious","addToRecentlyPlayed","volumeinput","background","volume","volumechange","progressinput","focus","innerText","max","progresschange","blur","metadata","waiting","timeupdate","activeElement","buffered","end","canplay","onplay","ended","onpaused","onplaying","onkeydown","keyCode","preventDefault","onkeyup","shouldRemove","titleExistsInCurrent","undefined","titleExistsInPrev","navigator","mediaSession","MediaMetadata","artist","artwork","connection","downlink","rType","preload","oldDuration","oldTime","setUp","defaultValue","disabled","previous","next","backgroundImage","Placeholder","backgroundSize","opacity","shuffleon","shuffleoff","dummyQueue","shuffled","rand","len","random","randomize","noRepeat","repeat","repeatOne","downArrow","upArrow","Opener","top","left","menu","FullScreen","MiniPlayer","position","Close","ResponseBar","obj","setObj","ProfileOpener","email","click","success","clear","handle","Home","profileOpen","intervalTimeout","App","protocol","setScreen","playingLocal","keyDown","check","exact","component","Opening","ReactDOM","render","getElementById"],"mappings":"8YAAe,G,MAAA,IAA0B,+C,GCA1B,I,gBCEXA,EAAc,GASLC,EAAiB,uCAAG,sBAAAC,EAAA,yDAC7BC,QAAQC,IAAI,iBAEe,IAAvBJ,EAAYK,OAHa,gCAILC,IAAM,CACtBC,OAAQ,MACRC,IAAK,8EACNC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAKC,YAPC,OAIzBZ,EAJyB,8BAUvBa,QAAQC,IACVd,EAAYe,IAAZ,uCAAgB,WAAOC,GAAP,eAAAd,EAAA,+EAEUI,IAAMW,IAAID,GAFpB,cAEFN,EAFE,yBAGDA,GAHC,mCAKRP,QAAQC,IAAI,uBAAuB,KAAEc,UAL7B,yGAAhB,wDAXyB,2CAAH,qDAuBjBC,EAAW,uCAAG,WAAMC,GAAN,mBAAAlB,EAAA,yDACR,wBADQ,gCAOFI,IAAM,CACnBC,OAAQ,MACRC,IAAK,8EAENC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,KAAKK,UAXL,4BAcjBK,EAAc,CAChBC,KAAMC,aAAaC,QAAQ,WAAa,IAfrB,kBAoBPlB,IAAM,CACdC,OAAQa,EAAOb,OAEfC,IAAI,OAAD,OAASY,EAAOK,UACnBd,KAAMS,EAAOT,MAAQ,GACrBe,QAASL,IAzBM,UAoBnBX,EApBmB,SA2BXC,EAASD,EAATC,MACCgB,SA5BU,wBA6BfC,OAAOC,SAASC,KAAO,SA7BR,kBA8BR,MA9BQ,iCAgCZnB,GAhCY,yCAkCnBR,QAAQC,IAAI,YAAY,KAAEc,SAlCP,kBAmCZ,MAnCY,0DAAH,sDAiEjB,SAASa,EAAOC,EAAOC,GAAK,IAAD,OAE1BC,EAAQF,EACRG,EAAYF,EAEZG,EAAgB,EAChBC,EAAiB,EACjBC,EAAkB,EAClBC,GAAQ,EACRC,GAAU,EACVC,GAAW,EAETC,EAAiB,WACnBC,cAAcN,GACdA,EAAiBO,aAAY,WACzBN,MACF,MAGNO,KAAKC,MAAQ,WAAgB,IAAfC,EAAc,uDAAVb,EACdM,GAAU,EACVC,GAAW,EACXC,IACAM,aAAaZ,GACbA,EAAgBa,YAAW,WACvBd,IACAI,GAAQ,EACRI,cAAcN,KACd,IAAFU,IAGNF,KAAKK,MAAQ,WACTV,GAAU,EACVQ,aAAaZ,GACbO,cAAcN,IAGlBQ,KAAKM,SAAW,WACZ,IAAIC,EAAOlB,EAAQI,EAAkB,EAAI,EAAIJ,EAAQI,EACrD,EAAKQ,MAAMM,IAGfP,KAAKQ,SAAW,WACZ,OAAQd,GAASE,IAAaD,GAGlCK,KAAKS,YAAc,WACf,OAAQf,GAASE,GAAYD,GAGjCK,KAAKU,WAAa,WACd,OAAOd,GAGXI,KAAKW,YAAc,WACf,OAAO,EAAKC,MAGhBZ,KAAKa,KAAO,WACRf,cAAcN,GACdW,aAAaZ,IAKd,IAMMuB,EAAO,SAAAC,GAChB,OAAO,IAAI/C,SAAQ,SAACgD,GAChBZ,WAAWY,EAASD,OAIfE,EAAS,SAACC,EAASC,GAE5B,OADiBD,EAAU,IAAM,EAAKC,EAE3BD,EAAU,EAEdA,EAAU,IAAM,GAGdE,EAAS,SAACC,EAASC,EAASC,GACrC,IAAMC,EAAgB,GAAKD,EAAO,GAElC,OADkBC,EAAeH,EAAU,EAAKC,EAErCD,EAAU,EAEdA,EAAUG,EAAe,GAGvBC,EAAgB,SAAC5D,EAAK6D,GAC/B,IAAK,IAAIC,KAAO9D,EACZ,GAAIA,EAAI8D,GAAKnE,OAASkE,EAGlB,IAFA,IACME,EAAQF,EADF7D,EAAI8D,GACmBnE,OAC1BqE,EAAE,EAAEA,GAAGD,EAAOC,IACnBhE,EAAI8D,GAAKG,KAAK,IAI1B,OAAOjE,GAGEkE,EAAc,SAAAhB,GACvB,IAEIiB,EAFAC,EAAQC,KAAKC,MAAMpB,GACnBqB,EAAMH,EAAM,GAEZI,EAAMD,EAAIE,WAAWC,MAAM,KAC/B,OAAIF,EAAI7E,OAAS,GACb4E,EAAMC,EAAI,GACVL,EAAO,KACD,GAAN,OAAUI,EAAV,aAAkBJ,KAGlBA,EAAOC,EAAa,IADpBG,EAAMC,EAAI,IAEJ,GAAN,OAAUD,EAAV,aAAkBJ,EAAO,GAAK,IAAM,IAApC,OAAyCA,KAiCjD,SAASQ,EAAkBC,GACvBzC,KAAK0C,MAAQD,EACbzC,KAAK2C,YAAc,GAEnB3C,KAAK4C,SAAW,WACZ,OAAO5C,KAAK0C,OAGhB1C,KAAK6C,SAAW,SAASC,GAAW,IAAD,OAC3B9C,KAAK4C,aAAeE,IAGxB9C,KAAK0C,MAAQI,EACb9C,KAAK2C,YAAYI,SAAQ,SAAAC,GACrBA,EAAW,EAAKN,YAIxB1C,KAAKiD,UAAY,SAASC,IAC6B,IAA/ClD,KAAK2C,YAAYQ,QAAQD,IAG7BlD,KAAK2C,YAAYb,KAAKoB,IAG1BlD,KAAKoD,YAAc,SAASC,GACxBrD,KAAK2C,YAAc3C,KAAK2C,YAAYW,QAChC,SAAAN,GAAU,OAAIA,IAAeK,MAKlC,ICnQcE,EAAaC,EAC9BC,EAAaC,EAAWC,EAAkBC,EAAWC,ECCCC,ECO9CC,EAAUC,ECyBlBC,EAEsBC,EAAeT,EACrCU,EAAaC,EAAaC,EAAUC,EAAoBC,EACjDC,EACQC,EACfC,EAAeC,EClDfX,EL6QSY,EAAiB,SAAAC,GAAgB,IAAD,EACtBC,qBAAZC,EADkC,oBAEnCC,EAAQH,EAAYjC,WAE1B,SAASqC,EAASnC,GACdiC,EAAS,IAcb,OAXAG,qBAAU,WAEN,OADAL,EAAY5B,UAAUgC,GACf,WACHJ,EAAYzB,YAAY6B,OAQzB,CAACD,EAJR,SAAqBlC,GACjB+B,EAAYhC,SAASC,MAclBqC,EAAgB,IAAI3C,GAAkB,GAEtC4C,GADc,IAAI5C,EAAkB,IACxB,IAAIA,EAAkB,SAMlC6C,GALe,IAAI7C,EAAkB,CAAC,qBAKvB,IAAIA,EA/OT,CACjB8C,QAAQ,EACRC,WAAY,aACZC,MAAO,GACPC,QAAS,iBA4OFC,GAAkB,IAAIlD,EAzOZ,CACjBmD,MAAM,EACNC,MAAO,GACPC,QAAS,KAuOFC,GAAmB,IAAItD,EApOT,CACrBuD,MAAM,IAoOCC,GAAc,IAAIxD,EAAkB,IACpCyD,GAAc,IAAIzD,EAAkB,IACpC0D,GAAoB,IAAI1D,EAAkB,IAC1C2D,GAAqB,IAAI3D,GAAkB,GAC3C4D,GAAmB,IAAI5D,EAAkB,GACzC6D,GAAc,IAAI7D,GAAkB,GAEpC8D,IADa,IAAI9D,GAAkB,GACpB,IAAIA,EAjQT,CACjBmD,MAAM,EACNY,OAAQ,EACRC,OAAQ,EACRC,KAAM,KACN3I,KAAM,MA6PC4I,GAAgB,IAAIlE,GAAkB,GAEtCmE,IADY,IAAInE,EAAkB,kBACpB,IAAIA,EAAkB,CAAEmD,KAAM,GAAIiB,IAAK,MACrDC,GAAmB,IAAIrE,GAAkB,GAIvCsE,IAHiB,IAAItE,EAAkB,WAG9B,IM+XPuE,GA/GE,WAAO,IAAD,EACuBjC,oBAAS,GADhC,mBACZkC,EADY,KACGC,EADH,OAGmBnC,mBAAS,wBAH5B,mBAGZoC,EAHY,KAGCC,EAHD,OAOKvC,EAAeO,GAA/BiC,EAPW,sBAQAxC,EAAeoB,IAA1BqB,EARW,sBASCzC,EAAeqB,IAA3BqB,EATW,qBAWd,uCAAG,kCAAAjK,EAAA,2DACEkK,EAAQC,KAAKC,MAAM/I,aAAaC,QAAQ,WAD1C,oBAGAyI,GAAa,GAEM,QADfM,EAAaF,KAAKC,MAAM/I,aAAaC,QAAQ,gBAJjD,iCAMsBL,EAAY,CAC1BZ,OAAQ,OACRkB,SAAU,cACVd,KAAM,CACF6J,KAAMJ,EAAMK,OAAO,CAACF,OAVhC,OAMU7J,EANV,OAaS,qBAAL0J,EAAQ1J,EAAIgK,MAAM,EAAEhK,EAAIL,OAAS,GACjCkK,EAAa7J,EAAIA,EAAIL,OAAS,GAC9BkB,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUR,IAC5C7I,aAAaoJ,QAAQ,aAAaN,KAAKO,UAAUL,IAE3CM,EAAQT,EAAMU,WAAU,SAAAC,GAC1B,OAAIA,EAAKC,OAAST,EAAWS,MAClBD,EAAKC,QAAUT,EAAWS,MAE1BD,EAAKE,QAAUV,EAAWU,SAGlB,KAAnBV,EAAW/J,MACX+J,EAAWW,OAASX,EAAW/J,IAC/B+J,EAAW/J,IAAM,IAErB4J,EAAMS,GAASN,EACfL,EAAQK,GACRJ,EAASC,GA/Bb,wBAiCI7I,aAAa4J,WAAW,cACxB5J,aAAa4J,WAAW,SACxBlB,GAAa,GAnCjB,4CAAH,sDAwCL,IAAMmB,EAAI,uCAAG,sBAAAlL,EAAA,sEACHyD,EAAK,KADF,cAETqG,EAAe,iBAEf/J,IAJS,SAKGkB,EAAY,CACpBZ,OAAQ,MACRkB,SAAU,mBAPL,UASU,WATV,OASD4J,OATC,wBAULlK,EAAY,CACRZ,OAAQ,MACRkB,SAAU,gBAZT,UAkBCkC,EAAK,KAlBN,QAqBLmG,GAAiB,GArBZ,4CAAH,qDA6BV,OAJA/B,qBAAU,WACNqD,MACD,IAECvB,EACO,cAAC,IAAD,CAAUyB,GAAI3B,qBAIrB,cADA,CACA,OAAK4B,UAAU,aAAf,UAIY,qBAAKA,UAAU,aAAf,SACI,qBAAKC,IAAKC,EAAOC,IAAI,aAEzB,sBAAKH,UAAWxB,EAAhB,UACI,qBAAKwB,UAAU,gBACf,qBAAKA,UAAU,iBACf,qBAAKA,UAAU,gBACf,qBAAKA,UAAU,wBCnsBxB,I,8BAAA,IAA0B,yCCA1B,OAA0B,6CCA1B,OAA0B,8CCA1B,OAA0B,wCCA1B,I,MAAA,IAA0B,0CCA1B,OAA0B,iDX6BnCI,GAAc,SAAC,GAAkF,IAAD,IAA/EC,kBAA+E,aAA3DC,oBAA2D,MAA5C,KAA4C,EAAtCC,EAAsC,EAAtCA,KAAsC,IAAhCC,cAAgC,MAAvB,KAAuB,EAAjBC,EAAiB,EAAjBA,WAAiB,EACpErE,oBAAS,GAD2D,mBAC3FsE,EAD2F,KAClFC,EADkF,OAExEzE,EAAeoB,IAAjCsD,EAF0F,sBAGvE1E,EAAeuB,IAAlCoD,EAH0F,oBA4BlG,OACI,qBAAKb,UAAU,aAAanE,MAAO,CAC/BiF,UAAU,GAAD,OAAMT,EAAa,OAAS,IACrCU,aAAa,GAAD,OAAMV,EAAa,OAAS,IACxCW,aAAa,GAAD,OAAMX,EAAa,GAAK,oCACrCY,YA5BW,SAAAC,GACdP,GAAW,IA2BgBQ,WAxBd,SAAAD,GACbP,GAAW,IAmBX,SAKI,sBAAKX,UAAU,kBACfnE,MAAO,CAAEuF,gBAAgB,GAAD,OAAMf,GAAcK,EAAU,UAAY,KAClEW,QAvBQ,WACRhB,IAGJO,EAAeL,GACfM,GAAgB,KAgBZ,UAKQR,EACA,qBAAKL,UAAU,wBAAf,SAESM,EAOD,sBAAKN,UAAU,aAAf,UACI,qBAAKA,UAAU,SACf,qBAAKA,UAAU,SACf,qBAAKA,UAAU,SACf,qBAAKA,UAAU,YAVnB,sBAAKA,UAAU,cAAf,UACI,qBAAKA,UAAU,SACf,qBAAKA,UAAU,SACf,qBAAKA,UAAU,SACf,qBAAKA,UAAU,cAU3B,qBAAKA,UAAU,YAAf,SAA4BQ,IAEhC,qBAAKR,UAAU,gBAAf,SACI,qBAAKC,IAAKM,EAAKe,UAAWnB,IAAI,OAElC,qBAAKH,UAAU,mBAAf,SACI,sBAAKA,UAAU,eAAf,UACI,qBAAKA,UAAU,kBACfnE,MAAO,CAAE0F,MAAM,GAAD,OAAmB,UADjC,SAC0DhB,EAAKd,OAASc,EAAKb,QAC7E,qBAAKM,UAAU,oBAAf,SAAoCO,EAAKiB,cAGjD,sBAAKxB,UAAU,WAAf,UACI,sBAAKA,UAAYU,EAAU,gBAAkB,uBAAyB7E,MAAO,CAAC4F,WAAY,OAC1FJ,QAlDG,SAAAH,GACfA,EAAEQ,kBACF,IAAMC,EAAa,CAAEC,EAAGV,EAAEW,QAASC,EAAGZ,EAAEa,SAClCC,EAAY,CAAEC,MAAOC,SAASC,gBAAgBC,YAAaC,OAAQH,SAASC,gBAAgBG,cAClG7B,EAAWS,EAAG,CAAES,aAAYK,YAAWzB,UA6C3B,UAEI,qBAAKP,UAAU,YACf,qBAAKA,UAAU,YACf,qBAAKA,UAAU,eAEjBU,EAAU,GAAKH,EAAKgC,kBAqP3BC,GA9OD,WAAO,IAAD,EACsBtG,EAAesB,IADrC,mBACTiF,EADS,KACIC,EADJ,OAEQxG,EAAeuB,IAAhC6C,EAFS,sBAGApE,EAAeoB,IAAxBiD,EAHS,sBAIUrE,EAAeqB,IAJzB,mBAITsB,EAJS,KAIFD,EAJE,OAK0B1C,EAAe0B,IALzC,mBAKT+E,EALS,KAKMC,EALN,OAMYxG,oBAAS,GANrB,mBAMTyG,EANS,KAMDC,EANC,OAOkB1G,oBAAS,GAP3B,mBAOT2G,EAPS,KAOEC,EAPF,OAQK9G,EAAe+B,IAA5BgF,EARQ,sBASwB/G,EAAeS,GATvC,mBASTuG,EATS,aAUQhH,EAAeiC,KAVvB,mBAUTgF,EAVS,KAUHC,EAVG,KAahBrI,EAAc8D,EACLqE,EACTrI,EAAcgE,EAAM/J,OACpBgG,EAAYC,EAAYN,QAAQ8F,GAChCvF,EAAYD,EAAYoE,MAAM,EAAErE,GAChCG,EAAWF,EAAYoE,MAAMrE,EAAU,EAAED,GACzCK,EAAYiI,EACZhI,EAASwH,EAAc1F,KACvB,IAAMoG,EAAOC,iBAAO,MACdC,EAAOC,cAaPC,EAAY,SAAAjE,GACdkD,GAAe,GAGfa,EAAKnK,KAAL,UAAagF,GAAb,uBAAkCoB,EAAKE,SA0ErCgE,EAAa,SAACxC,EAAD,GAAuD,IAAjDS,EAAgD,EAAhDA,WAAYK,EAAoC,EAApCA,UAAiB2B,EAAmB,EAAzBpD,KAC5CW,EAAEQ,kBACFkB,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,EACNa,OAAQvF,EAAOoJ,EAAWC,EAAGI,EAAUC,OACvCpE,OAAQnF,EAAOiJ,EAAWG,EAAGE,EAAUK,OAAQ,GAC/CjN,KAAM,CACF,CACIwO,KAAM,SACNC,KAAM,kBAlDH,SAACtD,GAChB,IAAMuD,EAAc/I,EAAYN,QAAQ8F,IACnB,IAAjBuD,IACA/I,EAAYgJ,OAAOD,EAAa,GAChC9N,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUtE,IAC5C6D,EAAS7D,GACT+H,GAAWD,GACXI,EAAU,CACNhG,MAAM,EACNiB,IAAI,WAAD,OAAaqC,EAAKd,OAASc,EAAKb,MAAhC,kBAyCasE,CAAWL,KAE3B,CACIC,KAAM,cACNC,KAAM,kBAAMJ,EAAUE,UAsBhCM,EAAgB,SAAA/C,GACL,CAAC,gBAAgB,UAAU,UAAU,WACxCgD,SAAShD,EAAEiD,OAAOnE,YACxB4C,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAKZmH,GAAiB,SAAAlD,GACf/F,GACAyH,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAkBlB,OAZAT,qBAAU,WAKN,OAJAwG,GAAa,GACbK,EAAKgB,QAAUnC,SAASoC,cAAc,oBACtCpC,SAASqC,iBAAiB,QAAQN,GAClCZ,EAAKgB,SAAWhB,EAAKgB,QAAQE,iBAAiB,SAASH,IAChD,WACHlC,SAASsC,oBAAoB,QAAQP,GACrCZ,EAAKgB,SAAWhB,EAAKgB,QAAQG,oBAAoB,SAASJ,OAE/D,CAACvB,IAGAE,EACO,cAAC,GAAD,IAOP,aADA,CACA,OAAK/C,UAAYyC,EAAc,mBAAqC,KAAhBA,EAAqB,mBAAqB,mBAA9F,SAEI,sBAAKzC,UAAU,mBAAf,UACI,qBAAKA,UAAU,gBAAf,SACI,qBAAKA,UAAU,8BAAf,SACI,sBAAKA,UAAU,oBAAf,UACI,qBAAKA,UAAU,mBACf,qBAAKA,UAAU,WAAWC,IAAKwE,GAAQtE,IAAI,KAC3C,qBAAKH,UAAU,YAAYqB,QA7FjC,WACd+B,EAAQ,2BACDlI,GADA,IAEHmC,MAAM,EACNqH,MAAOnE,EAAKe,aAEhBoB,GAAe,IAuFoDzC,IAAK0E,GAAUxE,IAAI,KAClE,qBAAKF,IAAKM,EAAKe,UAAWnB,IAAI,GAAGH,UAAU,6BAIvD,qBAAKA,UAAU,iBAAf,SACI,sBAAKA,UAAU,kBAAf,UACI,qBAAKA,UAAU,kBAAf,yBACA,cAAC,GAAD,CAAaK,YAAY,EAAMC,aAAcA,EAAcC,KAAMA,EAAME,WAxEjE,SAACS,EAAD,GAAuD,IAAjDS,EAAgD,EAAhDA,WAAYK,EAAoC,EAApCA,UAAiB2B,EAAmB,EAAzBpD,KACnDW,EAAEQ,kBACFkB,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,EACNa,OAAQvF,EAAOoJ,EAAWC,EAAGI,EAAUC,OACvCpE,OAAQnF,EAAOiJ,EAAWG,EAAGE,EAAUK,OAAQ,GAC/CjN,KAAM,CACF,CACIwO,KAAM,cACNC,KAAM,kBAAMJ,EAAUE,YA+DO,IAAvB5I,EAAYjG,OACV,sBAAKkL,UAAU,kBAAkBnE,MAAO,CAACkF,aAAc,OAAvD,UACI,sBAAKf,UAAU,aAAf,wBAzHV,WACd,GAA2B,IAAvBjF,EAAYjG,OACZ,MAAO,GAEX,IAAMwK,EAAQxE,EAAU,EAAIC,EAAYjG,OAASgG,EAAU,EAAI,EAC/D,OAAOC,EAAYuE,GAAOI,MAoHsCkF,MACxC,qBAAK5E,UAAU,YAAYqB,QAxLpC,SAACH,GAChBA,EAAEQ,kBACF,IAAMpC,EAAQvE,EAAYN,QAAQ8F,GAClCxF,EAAc,CAACA,EAAYuE,IAC3BtJ,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUtE,IAC5C6D,EAAS7D,GACTkI,EAAU,CAAEhG,MAAM,EAAMiB,IAAK,kBAC7B4E,GAAWD,IAiLa,sBACK,GAEb,sBAAK7C,UAAU,kBAAkBnE,MAAO,CAAEgJ,UAAU,GAAD,OAAM1J,EAAS,SAAW,YAA7E,UAE4B,IAApBF,EAASnG,OACTmG,EAASzF,KAAI,SAACgK,EAAKrG,GACf,OAAO,cAAC,GAAD,CAAakH,YAAY,EAAOE,KAAMf,EAAMgB,OAAQ1F,EAAU3B,EAAE,EAAGsH,WAAYiD,OACrF,GAGL5I,IAAcD,EAAY,GAAmB,IAAdC,EAC/B,qBAAKe,MAAO,CAAEoG,MAAO,OAAQI,OAAQ,UAAmB,GAGnC,IAArBrH,EAAUlG,OACVkG,EAAUxF,KAAI,SAACgK,EAAKrG,GAChB,OAAO,cAAC,GAAD,CAAakH,YAAY,EAAOE,KAAMf,EAAMgB,OAAQrH,EAAE,EAAGsH,WAAYiD,OAC3E,iBY0E/BoB,GAAkB,SAAC,GAA0B,IAAxBvE,EAAuB,EAAvBA,KAAME,EAAiB,EAAjBA,WAAiB,EAChBrE,oBAAS,GADO,mBACvCsE,EADuC,KAC9BC,EAD8B,KAU9C,OACI,sBAAKX,UAAU,cAAciB,YAAa,kBAAMN,GAAW,IAAOQ,WAAY,kBAAMR,GAAW,IAA/F,UACI,sBAAKX,UAAU,WAAf,UACI,qBAAKC,IAAKM,EAAKe,WAAa,GAAInB,IAAI,KACpC,qBAAKH,UAAU,kBAAf,SACI,qBAAKC,IAAK8E,GAAM5E,IAAI,UAG5B,sBAAKH,UAAYU,EAAU,qBAAuB,eAAlD,UACI,qBAAKV,UAAU,aAAf,SAA6BO,EAAKd,OAASc,EAAKb,QAChD,qBAAKM,UAAU,cAAf,SAA8BO,EAAKiB,YAEvC,qBAAKxB,UAAYU,EAAU,YAAc,mBAAzC,SACI,sBAAKV,UAAU,aAAaqB,QApBrB,SAAAH,GACfA,EAAEQ,kBACF,IAAMC,EAAa,CAAEC,EAAGV,EAAEW,QAASC,EAAGZ,EAAEa,SAClCC,EAAY,CAAEC,MAAOC,SAASC,gBAAgBC,YAAaC,OAAQH,SAASC,gBAAgBG,cAClG7B,EAAWS,EAAG,CAAES,aAAYK,YAAWzB,UAgB/B,UACI,qBAAKP,UAAU,gBACf,qBAAKA,UAAU,gBACf,qBAAKA,UAAU,yBAO7BgF,GAAa,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,MAAOxE,EAAiB,EAAjBA,WACzB,OACI,qCACI,sBAAKT,UAAU,gBAAf,UACI,qBAAKA,UAAU,YAAf,qCACA,qBAAKA,UAAU,eAAf,4BAEJ,qBAAKA,UAAU,sBAAf,SACI,qBAAKA,UAAU,iBAAf,SAEQiF,EAAMzP,KAAI,SAAA0P,GACN,OAAO,cAAC,GAAD,CAAiB3E,KAAM2E,EAAMzE,WAAYA,eAStE0E,GAAY,SAAC,GAAc,IAAZD,EAAW,EAAXA,KAAW,EACZhJ,EAAeoB,IAAxBiD,EADqB,sBAENrE,EAAeuB,IACjC2H,EAHwB,oBAS5B,OAAIC,OAAOC,KAAKJ,GAAMpQ,OAAS,EAEvB,qBAAKkL,UAAU,YAAf,SACI,sBAAKA,UAAU,iBAAf,UACI,sBAAKA,UAAU,eAAf,UACI,qBAAKA,UAAU,oBACf,qBAAKA,UAAaO,EAAKb,QAAUwF,EAAKxF,MAAS,sBAAwB,iBAAvE,SACI,qBAAKM,UAAU,sBAAsBqB,QATrC,SAAAH,KASA,SACI,qBAAKjB,IAAQmF,GAAmB7E,EAAKb,QAAUwF,EAAKxF,MAAiBqF,GAARQ,GAAcpF,IAAI,SAGvF,sBAAKH,UAAU,gBAAgBqB,QAfhC,SAAAH,KAeC,UACI,qBAAKlB,UAAU,mBACf,qBAAKA,UAAU,mBACf,qBAAKA,UAAU,sBAEnB,qBAAKC,IAAKiF,EAAK5D,WAAa,GAAInB,IAAI,QAExC,qBAAKH,UAAU,gBAAf,SAAgCkF,EAAKzF,OAASyF,EAAKxF,QACnD,sBAAMM,UAAU,iBAAhB,SACI,+BAAOkF,EAAKM,qBAMzB,qBAAK3J,MAAO,CAAEoG,MAAO,MAAOI,OAAQ,WAGzCoD,GAAsB,WAAO,IAAD,EACYvJ,EAAe0B,IAD3B,mBACvB+E,EADuB,KACRC,EADQ,OAIIxG,oBAAS,GAJb,mBAIvB2G,EAJuB,KAIZC,EAJY,OAKN5G,mBAAS,IALH,mBAKvBhH,EALuB,KAKjBsQ,EALiB,OAMJtJ,mBAAS,IANL,mBAMvB6I,EANuB,KAMhBU,EANgB,KAOxB1G,EAAO,CAAC,aAAa,cAAc,cAAc,eACjDsE,EAAOC,cAEP3D,EAAI,uCAAG,4BAAAlL,EAAA,sEACOiB,EAAY,CACxBZ,OAAQ,MACRkB,SAAS,mBAHJ,QACLf,EADK,UAMLA,EAAIyQ,OAAS7M,EAAc5D,EAAIyQ,OAAO,GACtCF,EAAQvQ,EAAIyQ,QACZD,EAASxQ,EAAI0Q,YAGb7C,GAAa,IAXR,2CAAH,qDAuDJiB,EAAgB,SAAA/C,IACbjC,EAAKiF,SAAShD,EAAEiD,OAAOnE,YAAc2C,EAAc1F,MACpD2F,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAgBlB,OAXAT,qBAAU,WAKN,OAJIuG,GACAlD,IAEJqC,SAASqC,iBAAiB,QAAQN,GAC3B,WACH/B,SAASsC,oBAAoB,QAAQP,MAE3C,CAAClB,IAGCA,EACO,cAAC,GAAD,IAGP,sBAAK/C,UAAU,UAAUnE,MAAO,CAAEgJ,UAAU,GAAD,OAAMlC,EAAc1F,KAAO,SAAW,YAAjF,UAEyB,IAAjBgI,EAAMnQ,OACN,cAAC,GAAD,CAAYmQ,MAAOA,EAAOxE,WAvDnB,SAACS,EAAD,GAAgD,IAA1CS,EAAyC,EAAzCA,WAAYK,EAA6B,EAA7BA,UAAiB8D,EAAY,EAAlBvF,KAC5CW,EAAEQ,kBACFkB,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,EACNa,OAAQvF,EAAOoJ,EAAWC,EAAGI,EAAUC,OACvCpE,OAAQnF,EAAOiJ,EAAWG,EAAGE,EAAUK,OAAQ,GAC/CjN,KAAM,CACF,CACIwO,KAAM,cACNC,KAAM,kBAtBJtD,EAsBoBuF,OAnBlCvC,EAAKnK,KAAL,UAAagF,GAAb,uBAAkCmC,EAAKb,QAHzB,IAAAa,IAwBN,CACIqD,KAAM,eACNC,KAAM,cAEV,CACID,KAAM,YACNC,KAAM,cAEV,CACID,KAAM,cACNC,KAAM,qBAiC6C,GAGvDwB,OAAOC,KAAKlQ,GAAMI,KAAI,SAAAgK,GAClB,OACI,qCACA,qBAAKQ,UAAU,YAAf,SAA4BR,IAC5B,qBAAKQ,UAAU,gBAAf,SAEQ5K,EAAKoK,GAAMhK,KAAI,SAAC0P,EAAK/L,GACjB,OAAIA,EAAE,EACK,cAAC,GAAD,CAAW+L,KAAMA,IAErB,kBAsB5Ba,GATI,WAMf,OAAO,cAAC,GAAD,KCpnBI,OAA0B,6CCA1B,OAA0B,8CCA1B,ICAA,IDAA,IAA0B,6CEA1B,4vJCgC0C5K,IAAS,EA6lB5D6K,GAAa,SAAC,GAA4B,IAA1BzF,EAAyB,EAAzBA,KAAMjB,EAAmB,EAAnBA,MAAOwG,EAAY,EAAZA,MAAY,EACb1J,oBAAS,GADI,mBACpCsE,EADoC,KAC3BC,EAD2B,OAELzE,EAAeoB,IAFV,mBAEpC2I,EAFoC,KAEvBC,EAFuB,OAGPhK,EAAeuB,IAHR,mBAGpC0I,EAHoC,KAGxBC,EAHwB,OAIblK,EAAeO,GAJF,mBAIpC4J,EAJoC,KAI3BC,EAJ2B,OAKjBpK,EAAeqB,IALE,mBAK7BqB,GAL6B,aAMnB1C,EAAe+B,IANI,mBAMpCsI,EANoC,KAM9BC,EAN8B,KAQrCC,EAAW,WACb,IAAMC,EAAgC,WAArBT,EAAYU,KACvBC,EAA0B,WAAfd,EAAMa,KAGvB,OAFiBD,EAAWT,EAAYvG,MAAQuG,EAAYxG,UAC3CmH,EAAWd,EAAMpG,MAAQa,EAAKd,QAgEnD,OACI,sBAAKO,UAAU,aAAaiB,YAAa,kBAAMN,GAAW,IAAOQ,WAAY,kBAAMR,GAAW,IAC9F9E,MAAO,CAAEuF,gBAAgB,GAAD,OAAMqF,IAAa,UAAY,gBADvD,UAEI,sBAAKzG,UAAU,aAAf,UACI,qBAAKA,UAAYU,GAAW+F,IAAa,gBAAkB,uBAC3DxG,IAAMwG,MAAeN,EAAaU,GAAaC,GAAW3G,IAAI,GAAGkB,QAAS,kBAjElE,SAACd,GACjB,GAAIkG,IACA3K,QADJ,CAIKuK,GAASC,GAAW,GACzB,IAAIS,EAAW,GACI,UAAfjB,EAAMa,OACNb,EAAMkB,OAAO3M,SAAQ,SAAAmF,GACjBA,EAAKE,MAAQoG,EAAMpG,MACnBF,EAAKyH,MAAQnB,EAAMmB,MACnBzH,EAAK0H,KAAOpB,EAAMoB,KAClB1H,EAAK8B,UAAYwE,EAAMxE,aAE3ByF,EAAWjB,EAAMkB,QAEF,WAAflB,EAAMa,OACNpG,EAAK0G,MAAQnB,EAAMmB,MACnB1G,EAAKe,UAAYwE,EAAMxE,UACvBf,EAAK2G,KAAOpB,EAAMoB,KAClBH,EAAS3N,KAAKmH,IAElB3B,EAASmI,GACT/Q,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAU0H,IACxCd,IAAgB1F,GAAM6F,GAAc,GACxCF,EAAe3F,GACfiG,EAAQ,2BACDD,GADA,IAEHtJ,MAAM,EACNiB,IAAI,YAAD,OAAcqC,EAAKd,OAASc,EAAKb,MAAjC,aAoCiFyH,CAAY5G,IAC5FzD,MAAQ2J,MAAeN,EAAa,QAAU,SAEzCzF,GAAY+F,IAC4B,GAAzC,qBAAKzG,UAAU,QAAf,SAAwBV,EAAM,OAGtC,qBAAKU,UAAU,eAAf,SACI,8BAAqB,UAAf8F,EAAMa,KAAmBpG,EAAKd,MAAQqG,EAAMpG,UAEtD,qBAAKM,UAAU,iBAAf,SACI,8BAAqB,UAAf8F,EAAMa,KAAmBpG,EAAKiB,OAASsE,EAAMtE,WAEvD,qBAAKxB,UAAU,YACf,qBAAKA,UAAU,eAAf,SACI,qBAAKA,UAAU,oBAAf,SACI,8BAAqB,UAAf8F,EAAMa,KAAmBpG,EAAKgC,SAAWuD,EAAMvD,mBAOnE6E,GAAqB,WACvB,IAAMC,EAASC,cADc,EAEKlL,oBAAS,GAFd,mBAEtB2G,EAFsB,KAEXC,EAFW,OAGH5G,mBAAS,IAHN,mBAGtB0J,EAHsB,KAGfyB,EAHe,OAISrL,EAAeoB,IAJxB,mBAItBkK,EAJsB,KAIT5G,EAJS,OAKa1E,EAAe0B,IAL5B,mBAKtB+E,EALsB,KAKPC,EALO,OAMC1G,EAAeO,GANhB,mBAMtB4J,EANsB,KAMbC,EANa,OAOOpK,EAAeuB,IAPtB,mBAOtB0I,EAPsB,KAOVC,EAPU,OAQHlK,EAAeqB,IARZ,mBAQtBsB,EARsB,KAQfD,EARe,OAUR1C,EAAe+B,IAA5BwJ,EAVqB,oBAYvBC,EAASpE,iBAAO,MAEhBqE,GADOnE,cACWoE,eAClB3I,EAAO,CAAC,aAAa,cAAc,cAAc,eACvD9D,GAASwH,EAAc1F,KAGvB,IAAM4K,EAAoB,WACtB,IAAIC,GAAY,EACVC,EAAcP,EAAY/H,QAAS,EACzC,SAAKsI,GAA8B,UAAfjC,EAAMa,QAGrBoB,GAA8B,WAAfjC,EAAMa,MAG1Bb,EAAMkB,QAAUlB,EAAMkB,OAAOgB,OAAM,SAAAzH,GAC/B,OAAIA,EAAKd,QAAUsI,IACfD,GAAY,GACL,MAIRA,GATIN,EAAY9H,QAAUoG,EAAMpG,QAoCrCuI,EAAgB,WAClB,GAAqB,IAAjBpJ,EAAM/J,OAAc,CACpB,IAAMwK,EAAQT,EAAMpE,QAAQ+M,GACT,WAAf1B,EAAMa,KACN9H,EAAMkF,OAAOzE,EAAM,EAAE,EAAEwG,GAEvBA,EAAMkB,OAAO3M,SAAQ,SAACkG,EAAKpH,GACvBoH,EAAKb,MAAQoG,EAAMpG,MACnBa,EAAK0G,MAAQnB,EAAMmB,MACnB1G,EAAKe,UAAYwE,EAAMxE,UACvBf,EAAK2G,KAAOpB,EAAMoB,KAClBrI,EAAMkF,OAAOzE,EAAM,EAAEnG,EAAE,EAAEoH,MAGjCvK,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUR,IAC5CD,EAASC,GACT4I,EAAU,CAAExK,MAAM,EAAMiB,IAAI,WAAD,OAAa4H,EAAMpG,MAAnB,aAqC7BG,EAAI,uCAAG,4BAAAlL,EAAA,sEACSiB,EAAY,CAC1BZ,OAAQ,OACRkB,SAAS,mBACTd,KAAM,CACF0Q,MAAOuB,EAAOzD,QALb,QACHzO,EADG,UASLoS,EAASpS,EAAI2Q,OAEb9C,GAAa,IAXR,2CAAH,qDAkDJiB,EAAgB,SAAA/C,IACbjC,EAAKiF,SAAShD,EAAEiD,OAAOnE,YAAc7E,IACtCyH,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAKZmH,EAAiB,SAAAlD,GACf/F,IACAyH,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAwBlB,OAlBAT,qBAAU,WACNwG,GAAa,KACd,CAAC2E,EAAgBO,WAEpB1L,qBAAU,WAON,OANIuG,GACAlD,IAEJ6H,EAAOrD,QAAUnC,SAASoC,cAAc,aACxCpC,SAASqC,iBAAiB,QAASN,GACnCyD,EAAOrD,SAAWqD,EAAOrD,QAAQE,iBAAiB,SAAUH,GACrD,WACHlC,SAASsC,oBAAoB,QAASP,GACtCyD,EAAOrD,SAAWqD,EAAOrD,QAAQG,oBAAoB,SAAUJ,MAEpE,CAACrB,IAGAA,EACO,cAAC,GAAD,IAGP,sBAAK/C,UAAU,WAAf,UACI,sBAAKA,UAAU,eAAf,UAMI,qBAAKA,UAAU,YAAf,SACI,qBAAKC,IAAK6F,EAAMxE,UAAWnB,IAAI,OAEnC,qBAAKH,UAAU,cAAf,SACI,sBAAKA,UAAU,mBAAf,UACI,qBAAKA,UAAU,gBAAf,SAAgC8F,EAAMpG,QACtC,qBAAK7D,MAAO,CAACoG,MAAO,OAAQI,OAAQ,UACpC,sBAAKrC,UAAU,iBAAf,UACI,qBAAKA,UAAU,YAAf,SAA4B8F,EAAMa,OAClC,qBAAK3G,UAAU,oBAAf,SAAmC,0BAE/B8F,EAAMN,YAAY3L,MAAM,MAAM/E,OAAS,EACvCgR,EAAMN,YAAY3L,MAAM,MAAMrE,KAAI,SAACgK,EAAKrG,GACpC,OACI,qCACI,qBAAK6G,UAAU,kBAAf,SAAkCR,IAE9BrG,IAAM2M,EAAMN,YAAY3L,MAAM,MAAM/E,OAAO,EAC3C,qBAAKkL,UAAU,oBAAf,SAAmC,0BAAoB,SAKvE,qBAAKA,UAAU,kBAAf,SAAkC8F,EAAMN,cAE5C,qBAAKxF,UAAU,oBAAf,SAAmC,0BACnC,qBAAKA,UAAU,YAAf,SAA4B8F,EAAMoB,UAEtC,sBAAKlH,UAAU,iBAAf,UACI,qBAAKA,UAAU,YAAf,SACqB,WAAf8F,EAAMa,KAAoB,SAAWb,EAAMkB,OAAOlS,OAAS,EAAtB,UAA6BgR,EAAMkB,OAAOlS,OAA1C,UAA2D,WAEtG,qBAAKkL,UAAU,oBAAf,SAAmC,0BACnC,qBAAKA,UAAU,YAAf,SApHF,WAClB,IAAItG,EAAM,EAAGyO,EAAM,EACnB,GAAmB,UAAfrC,EAAMa,KACNb,EAAMkB,OAAO3M,SAAQ,SAAA+N,GACjB,IAAMC,EAAMD,EAAM7F,SAAS1I,MAAM,MACjCH,GAAO4O,SAASD,EAAI,IACpBF,GAAOG,SAASD,EAAI,OAExB3O,GAAOF,KAAKC,MAAM0O,EAAI,IACtBA,GAAU,OACP,CACH,IAAMI,EAAMzC,EAAMvD,SAAS1I,MAAM,MACjCH,EAAM8O,WAAWD,EAAI,IACrBJ,EAAMK,WAAWD,EAAI,IAEzB,MAAM,GAAN,OAAU7O,EAAV,mBAAiC,IAARyO,EAAA,WAAgBA,EAAhB,gBAqGuBM,QAEhC,qBAAK5M,MAAO,CAACoG,MAAO,OAAQI,OAAQ,UACpC,sBAAKrC,UAAU,eAAf,UACI,qBAAKA,UAAU,iBAAiBqB,QA/JrC,WACf,GAAIwG,IACA/L,QACG,CACH,IAAM4M,EAAsB,UAAf5C,EAAMa,KAAmBb,EAAMkB,OAAS,CAAClB,GACjDO,GAASC,GAAW,GACN,WAAfR,EAAMa,MACN/H,EAAS8J,GACT9H,EAAe8H,EAAK,MAEpBA,EAAKrO,SAAQ,SAAAkG,GACTA,EAAKb,MAAQoG,EAAMpG,MACnBa,EAAKe,UAAYwE,EAAMxE,UACvBf,EAAK0G,MAAQnB,EAAMmB,MACnB1G,EAAK2G,KAAOpB,EAAMoB,QAEtBtI,EAAS8J,GACT9H,EAAe8H,EAAK,KAExB1S,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUqJ,IAC5CtC,GAAc,KA2IE,SAEQyB,MAAwB1B,EACxB,qCAAE,qBAAKlG,IAAKsF,GAAOpF,IAAI,KAAK,yCAC5B,qCAAE,qBAAKF,IAAK8E,GAAM5E,IAAI,KAAK,0CAGnC,sBAAKH,UAAU,aAAaqB,QA3N5B,WACpB,IAAMqH,EAAsB,UAAf5C,EAAMa,KAAmBb,EAAMkB,OAAS,CAAClB,GAChD6C,EAAY9J,GAEH,IADD8J,EAAUlO,QAAQ+M,KAEb,WAAf1B,EAAMa,MACNgC,EAAUvP,KAAKsP,EAAK,IACpB1S,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUsJ,IAC5C/J,EAAS+J,GACTlB,EAAU,CAAExK,MAAM,EAAMiB,IAAI,4BAE5BwK,EAAKrO,SAAQ,SAAAkG,GACTA,EAAKb,MAAQoG,EAAMpG,MACnBa,EAAK0G,MAAQnB,EAAMmB,MACnB1G,EAAKe,UAAYwE,EAAMxE,UACvBf,EAAK2G,KAAOpB,EAAMoB,KAClByB,EAAUvP,KAAKmH,MAEnBvK,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUsJ,IAC5C/J,EAAS+J,GACTlB,EAAU,CAAExK,MAAM,EAAMiB,IAAI,4BAuMZ,UACI,qBAAK+B,IAAK2I,GAAWzI,IAAI,KAD7B,kBAIA,qBAAKH,UAAU,gBAAf,SACI,sBAAKA,UAAU,aAAalD,MAAM,eAAeuE,QAlH1D,SAAAH,GACfA,EAAEQ,kBACF,IAAMC,EAAkBT,EAAEW,QAApBF,EAAgCT,EAAEa,QACxCa,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,EACNa,OAAQ6D,EAAe,EACvB9D,OAAQ8D,EAAe,EACvBvM,KAAM,CACF,CACIwO,KAAK,qBACLC,KAAMoE,QAuGM,UACI,qBAAKjI,UAAU,gBACf,qBAAKA,UAAU,gBACf,qBAAKA,UAAU,gCAOvC,qBAAKnE,MAAO,CAACoG,MAAO,OAAQI,OAAQ,UACpC,qBAAKrC,UAAU,kBAAf,SAEuB,WAAf8F,EAAMa,KACN,cAAC,GAAD,CAAYpG,KAAMuF,EAAOxG,MAAO,EAAGwG,MAAOA,IAC1CA,EAAMkB,OAAOxR,KAAI,SAACgK,EAAKrG,GACnB,OAAO,cAAC,GAAD,CAAYoH,KAAMf,EAAMF,MAAOnG,EAAG2M,MAAOA,SAI5D,qBAAKjK,MAAO,CAACoG,MAAO,OAAQI,OAAQ,UACpC,sBAAKrC,UAAU,aAAf,UACI,qBAAKC,IAAK4I,GAAW1I,IAAI,KAD7B,wCAEsC2I,OAAOC,aAAa,MAF1D,2DAIA,sBAAK/I,UAAU,aAAf,UACI,qBAAKC,IAAK4I,GAAW1I,IAAI,KAD7B,mFAIEkG,EAAU,qBAAKxK,MAAO,CAACoG,MAAO,OAAQI,OAAQ,WAAmB,SAgBhE2G,GAVG,SAACC,GAMf,OAAO,cAAC,GAAD,KCv/BC9N,GAAS,KAwGfgK,GAAY,SAAC,GAA0B,IAAxB3F,EAAuB,EAAvBA,KAAMiB,EAAiB,EAAjBA,WAAiB,EACNvE,EAAeoB,IADT,mBACjCiD,EADiC,KAC3B2I,EAD2B,OAEVhN,EAAeO,GAFL,mBAEjC4J,EAFiC,KAExBC,EAFwB,OAGJpK,EAAeuB,IAHX,mBAGjC0I,EAHiC,KAGrBC,EAHqB,OAInBlK,EAAeqB,IAA3BqB,EAJ+B,oBAKpCwG,EAAkBe,EALkB,EAMV/J,mBAAS,MANC,mBAMjC+M,EANiC,KAMxBC,EANwB,OAOhBhN,oBAAS,GAPO,mBAOjCiB,EAPiC,KAO3BgM,EAP2B,KAQlC9F,EAAOC,cAEP8F,EAAWhG,iBAAO,IAAIiG,sBAAqB,YAAc,IACnDC,EADkD,oBAClDA,eACRH,EAAQG,KACT,CAAEC,UAAW,MAGhBjN,qBAAU,WACN,IAAMkN,EAAiBP,EACjBQ,EAAkBL,EAASjF,QAKjC,OAJIqF,GACAC,EAAgBC,QAAQF,GAGrB,WACCA,GACAC,EAAgBE,UAAUH,MAGnC,CAACP,IAEJ,IAAMW,EAAU,WAIZvG,EAAKnK,KAAL,UAAagF,GAAb,uBAAkCoB,EAAKE,SAqC3C,OACI,qBAAKM,UAAU,YAAY+J,IAAKX,EAAhC,SACM/L,EACE,sBAAK2C,UAAU,cAAf,UACI,sBAAKA,UAAU,eAAeqB,QAASyI,EAAvC,UACI,qBAAK9J,UAAU,eACf,qBAAKA,UAAaO,EAAKb,QAAUF,EAAKE,MAAS,sBAAwB,iBAAvE,SACI,qBAAKM,UAAU,kBAAkBqB,QAjCjC,SAACH,GAErB,GADAA,EAAEQ,kBACEnB,EAAKb,QAAUF,EAAKE,MAAxB,CAIA,IAAMgJ,EAAqB,UAAdlJ,EAAKmH,KAAmBnH,EAAKwH,OAAS,CAACxH,GAC/C6G,GAASC,GAAW,GACP,WAAd9G,EAAKmH,MACL/H,EAAS8J,GACTQ,EAAkBR,EAAK,MAEvBA,EAAKrO,SAAQ,SAAAkG,GACTA,EAAKb,MAAQF,EAAKE,MAClBa,EAAKe,UAAY9B,EAAK8B,UACtBf,EAAK0G,MAAQzH,EAAKyH,MAClB1G,EAAK2G,KAAO1H,EAAK0H,QAErBtI,EAAS8J,GACTQ,EAAkBR,EAAK,KAE3B1S,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUqJ,IAC5CtC,GAAc,QAnBVtK,KA+BgBgB,MAAUsI,GAAmB7E,EAAKb,QAAUF,EAAKE,MAAmB,OAAV,QAD1D,SAEI,qBAAKO,IAAQmF,GAAmB7E,EAAKb,QAAUF,EAAKE,MAAiBqF,GAARQ,GAAepF,IAAI,SAGxF,sBAAKH,UAAU,iBAAiBqB,QA7CjC,SAAAH,GACfA,EAAEQ,kBACF,IAAMC,EAAa,CAAEC,EAAGV,EAAEW,QAASC,EAAGZ,EAAEa,SAClCC,EAAY,CAAEC,MAAOC,SAASC,gBAAgBC,YAAaC,OAAQH,SAASC,gBAAgBG,cAClG7B,EAAWS,EAAG,CAAES,aAAYK,YAAWxC,UAyC8B1C,MAAM,eAA3D,UACI,qBAAKkD,UAAU,oBACf,qBAAKA,UAAU,oBACf,qBAAKA,UAAU,uBAEnB,qBAAKC,IAAKT,EAAK8B,UAAWnB,IAAI,GAAGH,UAAU,oBAE/C,qBAAKA,UAAU,gBAAgBqB,QAASyI,EAAxC,SAAkDtK,EAAKE,QACvD,sBAAMM,UAAU,aAAhB,SACI,+BAAOR,EAAKgG,mBAGpB,MAgCVwE,GAAmB,WAAO,IAAD,EACG5N,mBAAS,IADZ,mBACpB6N,EADoB,KACXC,EADW,OAEO9N,oBAAS,GAFhB,mBAEpB2G,EAFoB,KAETC,EAFS,OAGe9G,EAAe0B,IAH9B,mBAGpB+E,EAHoB,KAGLC,EAHK,OAIJ1G,EAAeoB,IAA/BkK,EAJoB,sBAKDtL,EAAeqB,IALd,mBAKpBsB,EALoB,KAKbD,EALa,OAML1C,EAAe+B,IAA5BwJ,EANkB,oBAOrBC,EAASpE,iBAAO,MACtBnI,GAASwH,EAAc1F,KACvB,IAAMgC,EAAO,CAAC,gBAAgB,iBAAiB,iBAAiB,kBA+C1DyE,EAAa,SAACxC,EAAD,GAAgD,IAA1CS,EAAyC,EAAzCA,WAAYK,EAA6B,EAA7BA,UAAiB8D,EAAY,EAAlBtG,KAC5C0B,EAAEQ,kBACFkB,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,EACNa,OAAQvF,EAAOoJ,EAAWC,EAAGI,EAAUC,OACvCpE,OAAQnF,EAAOiJ,EAAWG,EAAGE,EAAUK,OAAQ,GAC/CjN,KAAM,CACF,CACIwO,KAAM,eACNC,KAAM,kBAtDE,SAAArE,GACpB,IAAMkJ,EAAqB,UAAdlJ,EAAKmH,KAAmBnH,EAAKwH,OAAS,CAACxH,GAC9CmJ,EAAY9J,GAEH,IADD8J,EAAUlO,QAAQ+M,KAEd,WAAdhI,EAAKmH,MACLgC,EAAUvP,KAAKsP,EAAK,IACpB1S,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUsJ,IAC5C/J,EAAS+J,GACTlB,EAAU,CAAExK,MAAM,EAAMiB,IAAI,4BAE5BwK,EAAKrO,SAAQ,SAAAkG,GACTA,EAAKb,MAAQF,EAAKE,MAClBa,EAAK0G,MAAQzH,EAAKyH,MAClB1G,EAAKe,UAAY9B,EAAK8B,UACtBf,EAAK2G,KAAO1H,EAAK0H,KACjByB,EAAUvP,KAAKmH,MAEnBvK,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUsJ,IAC5C/J,EAAS+J,GACTlB,EAAU,CAAExK,MAAM,EAAMiB,IAAI,2BAkCRiM,CAAgBrE,KAEhC,CACIlC,KAAM,YACNC,KAAM,kBAlCA,SAAArE,GAClB,GAAqB,IAAjBX,EAAM/J,OAAc,CACpB,IAAMwK,EAAQT,EAAMpE,QAAQ+M,GACV,WAAdhI,EAAKmH,KACL9H,EAAMkF,OAAOzE,EAAM,EAAE,EAAEE,GAEvBA,EAAKwH,OAAO3M,SAAQ,SAACkG,EAAKpH,GACtBoH,EAAKb,MAAQF,EAAKE,MAClBa,EAAK0G,MAAQzH,EAAKyH,MAClB1G,EAAKe,UAAY9B,EAAK8B,UACtBf,EAAK2G,KAAO1H,EAAK0H,KACjBrI,EAAMkF,OAAOzE,EAAM,EAAEnG,EAAE,EAAEoH,MAGjCvK,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUR,IAC5CD,EAASC,GACT4I,EAAU,CAAExK,MAAM,EAAMiB,IAAI,WAAD,OAAasB,EAAKE,MAAlB,YAkBPuI,CAAcnC,KAE9B,CACIlC,KAAM,cACNC,KAAM,mBAMhBI,EAAgB,SAAA/C,GACbjC,EAAKiF,SAAShD,EAAEiD,OAAOnE,YACxB4C,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAKZmH,EAAiB,SAAAlD,GACf/F,IACAyH,EAAiB,2BACVD,GADS,IAEZ1F,MAAM,MAoClB,OA/BAT,qBAAU,WAyBN,OANIuG,GAlBM,uCAAG,8BAAApO,EAAA,yDAGK,QAFRyV,EAAQtL,KAAKC,MAAMsL,eAAepU,QAAQ,aADvC,uBAILiU,EAAWE,GACXpH,GAAa,GALR,0CAQSpN,EAAY,CAC1BZ,OAAQ,MACRkB,SAAS,gBAVJ,QAQHf,EARG,UAaLkV,eAAejL,QAAQ,UAAUN,KAAKO,UAAUlK,IAChD+U,EAAW/U,GACX6N,GAAa,IAfR,2CAAH,oDAmBNnD,GAEJ6H,EAAOrD,QAAUnC,SAASoC,cAAc,aACxCoD,EAAOrD,SAAWqD,EAAOrD,QAAQE,iBAAiB,SAAUH,GAC5DlC,SAASqC,iBAAiB,QAASN,GAC5B,WACHyD,EAAOrD,SAAWqD,EAAOrD,QAAQG,oBAAoB,SAAUJ,GAC/DlC,SAASsC,oBAAoB,QAASP,MAE3C,CAAClB,IAEAA,EACO,cAAC,GAAD,IAIH,cADJ,CACI,OAAK/C,UAAU,WAAf,UACI,qBAAKA,UAAU,cAAf,qBACA,qBAAKA,UAAU,mBAAf,SACI,qBAAKA,UAAU,cAAf,SAEQiK,EAAQzU,KAAI,SAAA0P,GACR,OAAO,cAAC,GAAD,CAAW1F,KAAM0F,EAAMzE,WAAYiD,eAoB3D4G,GAVC,WAMZ,OAAO,cAAC,GAAD,KChZLC,I,MAAc,WAAO,IAAD,EACDrO,EAAeyB,IAA7B6M,EADe,sBAGItO,EAAeqB,IAHnB,mBAGfsB,EAHe,KAGRD,EAHQ,OAMYxC,oBAAS,GANrB,mBAMf2G,EANe,KAMJC,EANI,KAehBnD,EAAI,uCAAG,4BAAAlL,EAAA,sEACSiB,EAAY,CAC1BZ,OAAQ,MACRkB,SAAS,aAHJ,OACHf,EADG,OAKTyJ,EAASzJ,GACT6N,GAAa,GANJ,2CAAH,qDA0BV,OAdAxG,qBAAU,WACDgO,EAGDxH,GAAa,GAFbnD,MAUL,IAECkD,EACO,cAAC,GAAD,IAGP,qBAAK/C,UAAU,QAAf,SAGI,sBAAKA,UAAU,SAAf,UACI,qBAAKA,UAAU,aAAf,SACI,qBAAKC,IAAKpB,EAAM,GAAGyC,UAAWnB,IAAI,OAEtC,qBAAKH,UAAU,YAAf,SACI,qBAAKC,IAAKpB,EAAM,GAAGyC,UAAWnB,IAAI,OAEtC,qBAAKH,UAAU,cAAf,SACI,qBAAKC,IAAKpB,EAAM,GAAGyC,UAAWnB,IAAI,cAiBvCsK,GAVD,WAAO,IAAD,EACOvO,EAAesB,IAEtC,OAHgB,oBAIL,cAAC,GAAD,IAEJ,cAAC,GAAD,KCyPIkN,I,MC9UA,IDwTA,WAAM,MAEuBxO,EAAec,IAFtC,mBAEV2N,EAFU,KAEIC,EAFJ,KAkBjB,OAVApO,qBAAU,WAEN,OADA5H,QAAQC,IAAI,eACL,WACH+V,EAAgB,2BACTD,GADQ,IAEX1N,MAAM,QAGf,IAEI,+BpB/SP4N,GAAgB,KAIPC,GAAiB,WAC1B,OACI,qBAAK9K,UAAU,SAAf,SACI,sBAAKA,UAAU,cAAf,UACI,qBAAKA,UAAU,QACf,qBAAKA,UAAU,QACf,qBAAKA,UAAU,gBAMzB+K,GAAc,WAChB,OACI,qBAAK/K,UAAU,WAmQRgL,GA7CH,WAAO,IAAD,EACW9O,EAAe0B,IAAjC+E,EADO,oBAEdvH,EAAYuH,EAAc1F,KAC1B,IAAMgO,EAAY3H,iBAAO,MAEnB4H,EAAc,WAChBD,EAAU5G,QAAQ8G,UAAUC,OAAO,cAGjCC,EAAe,SAAAnK,GACb2J,IACApT,aAAaoT,IAEjBI,EAAU5G,QAAQ8G,UAAUG,IAAI,aAChCT,GAAgBnT,WAAWwT,EAAa,MAY5C,OATA1O,qBAAU,WAIN,OAHAyO,EAAU5G,QAAUnC,SAASoC,cAAc,yBAC3C2G,EAAU5G,SAAW4G,EAAU5G,QAAQE,iBAAiB,SAAU8G,GAE3D,WACHJ,EAAU5G,SAAW4G,EAAU5G,QAAQG,oBAAoB,SAAU6G,MAE1E,IAGC,sBAAKrL,UAAU,yBAAf,UACI,cAAC,GAAD,IACA,qBAAKA,UAAU,uBACfnE,MAAO,CAAEgJ,UAAU,GAAD,OAAMzJ,EAAY,SAAW,YAD/C,SAGI,eAAC,IAAD,WACI,cAAC,IAAD,CAAOmQ,KAAI,UAAKnN,GAAL,oBAAX,SAA0C,cAAC,GAAD,MAC1C,cAAC,IAAD,CAAOmN,KAAI,UAAKnN,GAAL,gBAAX,SAAsC,cAAC,GAAD,MACtC,cAAC,IAAD,CAAOmN,KAAI,UAAKnN,GAAL,sBAAX,SAA4C,cAAC,GAAD,MAC5C,cAAC,IAAD,CAAOmN,KAAI,UAAKnN,GAAL,qBAAX,SAA2C,cAAC,GAAD,MAC3C,cAAC,IAAD,CAAOmN,KAAI,UAAKnN,GAAL,iBAAX,SAAuC,cAAC,GAAD,MACvC,cAAC,IAAD,CAAOmN,KAAI,UAAKnN,GAAL,eAAX,SAAqC,cAAC,GAAD,e,SCzCnDoN,IqBhQS,ICAA,ICAA,ICAA,ICAA,ICAA,ICAA,ICAA,ICAA,I7BgQM,WACjB,OACI,qBAAKxL,UAAU,2BAAf,SACI,sBAAKA,UAAU,aAAf,UACI,qBAAKA,UAAU,mBACf,qBAAKA,UAAU,oBACf,qBAAKA,UAAU,2BAMzByL,GAAS,WACX,IAAMC,EAAW1V,aAAaC,QAAQ,YAChC0V,EAAU3V,aAAaC,QAAQ,WAFpB,EAIKiG,EAAeQ,GAJpB,mBAIVkP,EAJU,KAILC,EAJK,OAKqB3P,EAAesB,IALpC,mBAKViF,EALU,KAKGC,EALH,OAMuBxG,EAAec,IANtC,mBAMV2N,EANU,KAMIC,EANJ,OAOS1O,EAAe8B,IAAjC8N,EAPS,oBAQXnE,EAAkBC,cAClBrE,EAAOC,cACbnI,EAAWuQ,EACXtQ,EAAmBmH,GAEH,WACZ,IAAMsJ,EAAMpE,EAAgBO,SAASrO,MAAM,KAAK,GAChD,GAAI4I,EACAoJ,EAAO,SAGX,OAAOE,GACH,IAAK,aACD,GAAI1Q,IAAa0Q,EAAK,MACtBF,EAAO,QACP,MACJ,IAAK,SACD,GAAIxQ,IAAa0Q,EAAK,MACtBF,EAAO,UACP,MACJ,IAAK,UACD,GAAIxQ,IAAa0Q,EAAK,MACtBF,EAAO,WACP,MACJ,IAAK,QACD,GAAIxQ,IAAa0Q,EAAK,MACtBF,EAAO,SACP,MACJ,IAAK,eACD,GAAIxQ,IAAa0Q,EAAK,MACtBF,EAAO,gBACP,MACJ,QACI,GAAiB,KAAbxQ,EAAiB,MACrBwQ,EAAO,KAMfG,GAGJ,IAoCMC,EAAe,SAAA/G,GACjB,IAAMgH,EAXoB,SAAAhH,GAC1B,MAA0B,GAAN,OAAU9G,GAAlB,SAAT8G,EAAiB,mBACH,WAATA,EAAmB,eACV,iBAATA,EAAyB,qBAChB,YAATA,EAAoB,gBACX,UAATA,EAAkB,cACT,gBAATA,EAAwB,mBAC3B,oBAISiH,CAAsBjH,GACpC3B,EAAKnK,KAAK8S,IAGRE,EAAc,SAAAlL,GAChB4K,GAAe,IAInB,OACI,sBAAK9L,UAAU,YAAf,UACI,qBAAKA,UAAU,WAAWqB,QAhDjB,WACT/F,GACAoH,GAAe,GAEF,SAAbrH,IACAwQ,EAAO,QACPtI,EAAKnK,KAAKgF,sBA0CV,SACI,sBAAK4B,UAAU,cAAclD,MAAM,cAAnC,UACI,qBAAKmD,IAAKoM,EAAMlM,IAAI,SACpB,4CAGR,qBAAKH,UAAU,aAAf,SAEQ2K,EAAa1N,KACb,cAAC,GAAD,IACA,qBAAK+C,UAAU,mBAAf,SA1GA,CAAC,OAAQ,UAAW,UA4GJxK,KAAI,SAAAgK,GACR,OACI,qBAAKQ,UAAY3E,IAAamE,EAAO,OAAS,YAC9C6B,QAAS,WArDxB,IAAC6D,EAAMoH,IAsD2BjR,GAtDjC6J,EAsD2B1F,KArD5BnE,IAGA,WAAT6J,GACA0F,EAAgB,2BACTD,GADQ,IAEX1N,MAAM,EACNE,QAASmP,KAGbhR,GACAoH,GAAe,IA2CauJ,EAAazM,GACbqM,EAAOrM,IAJX,SAMKA,WAQ7B,qBAAKQ,UAAU,cAAf,SAYQ2L,EACA,qBAAK3L,UAAU,oBAAoBqB,QAAS+K,EAA5C,SACI,qBAAKpM,UAAU,qBAAqBC,IAAK0L,EAASxL,IAAI,GAAGrD,MAAO4O,MAEpE,qBAAK1L,UAAU,oBAAoBqB,QAAS+K,EAAavQ,MAAO,CAAEuF,gBAAiB,SAAUG,MAAO,QAASgL,SAAU,OAAvH,SACKb,EAAS,GAAGc,sBAsBtBC,GAZG,WAAO,IAAD,EACCvQ,EAAeO,GADhB,oBAGpB,OAEI,cADA,CACA,OAAKuD,UAAU,2BAAf,UACI,cAAC,GAAD,IACA,cAAC,GAAD,Q8B7aG,OAA0B,yCCA1B,OAA0B,6CCA1B,OAA0B,8CCA1B,OAA0B,6CCA1B,OAA0B,4CCA1B,OAA0B,6CCA1B,OAA0B,iDCA1B,ICAA,ICAA,ICAA,ICAA,IJAA,IAA0B,qCKA1B,OAA0B,sCzCuD5B0M,I0CvDE,I1CuDM,IAAIC,OACrBC,GAAa,EAGbC,IAAU,EACVC,GAAmB,EACwBC,GAAU,EAErDC,GAAY,EAAyCC,GAAU,KAK7DC,GAAc,SAACH,EAAQI,GAGzB,MAAM,qCAAN,OAA4CJ,EAA5C,mBAIEK,GAAoB,SAACpT,GACvB,MAAM,mCAAN,OAA0CA,EAA1C,iCA0CEqT,GAAS,WAAO,IAAD,EACajR,oBAAS,GADtB,mBACVsE,EADU,KACDC,EADC,OAEOzE,EAAeoB,IAFtB,mBAEViD,EAFU,KAEJ5B,EAFI,OAGazC,EAAeO,GAH5B,mBAGD6J,GAHC,aAISpK,EAAeqB,IAJxB,mBAIVsB,EAJU,KAIHD,EAJG,OAKiBxC,oBAAS,GAL1B,mBAKVkR,EALU,KAKCC,EALD,OAMiBnR,oBAAS,GAN1B,mBAMVoR,EANU,KAMC9O,EAND,OAOmBtC,oBAAS,GAP5B,gCAQmBF,EAAewB,KARlC,mBAQV+P,EARU,KAQEC,EARF,OASatR,oBAAS,GATtB,mBASVuR,GATU,KASDC,GATC,QAUqB1R,EAAesB,IAVpC,qBAUViF,GAVU,MAUGC,GAVH,SAWmBxG,EAAeuB,IAXlC,qBAWV0I,GAXU,MAWEC,GAXF,SAYuBlK,EAAeS,GAZtC,qBAYVuG,GAZU,gBAaWhH,EAAekB,KAb1B,qBAaVyQ,GAbU,gBAcyB3R,EAAe0B,KAdxC,qBAcV+E,GAdU,MAcKC,GAdL,MAeXkL,GJ4KiB,SAAA9T,GACvB,IAAM+P,EAAMzG,iBAAO,IAInB,OAHA9G,qBAAU,WACNuN,EAAI1F,QAAUrK,KAEX+P,EAAI1F,QIjLM0J,CAAYxN,GAC7BtE,EAAc4R,GACL3K,GAjBQ,OAmBehH,EAAeyB,IAnB9B,qBAmBV6M,GAnBU,MAmBCwD,GAnBD,SAoBW5R,oBAAS,GApBpB,qBAoBVyG,GApBU,MAoBFC,GApBE,MAqBjB/H,EAAc8D,EACdiO,GAAmBjO,EAAMpE,QAAQ8F,GACjC/E,EAAgBgS,EAChBzR,EAAcuR,EACInH,GAUlBrK,EAAW,uCAAG,0CAAAnH,EAAA,yDACA,MADOuM,EAAP,+BAAW,KAEjBA,EAAEQ,kBAEW,KAAbnB,EAAKtL,IAJC,wBAKAqK,EAAQvE,EAAYN,QAAQ8F,GAClCA,EAAKtL,IAAMsL,EAAKZ,cACTY,EAAKZ,OACZhB,EAAQ4B,GACRxF,EAAYuE,GAASiB,EACrB3B,EAAS7D,GACT+H,IAAWD,IAXL,2BAcNrH,EASAkR,GAAM/U,QAIN+U,GAAMuB,OA3BA,4CAAH,qDAmCX,IAAMC,GAAY,WAAa,IAAZhN,EAAW,uDAAP,GACT,KAANA,GACAA,EAAEQ,kBAENuC,GAAc/C,GACdwB,IAAgBD,KAEd0L,GAAW,WAAa,IAAZjN,EAAW,uDAAP,GAMlB,GALU,KAANA,GACAA,EAAEQ,kBAEN1L,aAAa4J,WAAW,QACxB5J,aAAa4J,WAAW,YACG,IAAvB7E,EAAYjG,OACZ4X,GAAM0B,YAAc,MACjB,CACH,IAAMC,EAAYvB,GAAmB/R,EAAYjG,OAAS,EAAIgY,GAAmB,EAAI,EACrFnO,EAAQ5D,EAAYsT,IACpBvB,GAAmBuB,EAEvBjI,IAAc,IAEZkI,GAAe,WAAa,IAAZpN,EAAW,uDAAP,GAOtB,GANU,KAANA,GACAA,EAAEQ,kBAEN1L,aAAa4J,WAAW,QACxB5J,aAAa4J,WAAW,YACxBwG,IAAc,GACa,IAAvBrL,EAAYjG,QAAgB4X,GAAM0B,YAAc,GAChD1B,GAAM0B,YAAc,EACpBpS,EAAgB,MAChBA,EAAgB,IAAIxF,EAAM,GAAI+X,KACXvW,cAAcgE,EAAczE,YAC5C,CACH,IAAM+H,EAAQvE,EAAYN,QAAQ8F,GAClC5B,EAAkB,IAAVW,EAAcvE,EAAYA,EAAYjG,OAAO,GAAKiG,EAAYuE,EAAM,MAqE9EkP,GAAc,SAAAtN,GAChBA,EAAEQ,kBACFjG,EAAYI,MAAM4S,WAAarB,GAAkB3R,EAAYzB,OAC7D0S,GAAMgC,OAASjT,EAAYzB,MAAM,IACjC4S,GAAanR,EAAYzB,MAAM,IAC/BgT,GAAYvR,EAAYzB,MAAM,KAE5B2U,GAAe,SAAAzN,GACjBA,EAAEQ,kBACFjG,EAAYI,MAAM4S,WAAarB,GAAkB3R,EAAYzB,OAC7D0S,GAAMgC,OAASjT,EAAYzB,MAAM,IACjC4S,GAAanR,EAAYzB,MAAM,IAC/BgT,GAAYvR,EAAYzB,MAAM,KAI5B4U,GAAgB,SAAC1N,GACnBtF,EAAMiT,QACNnT,EAAYoT,UAAYzV,EAAYuC,EAAM5B,OAC1C+S,GAAUnR,EAAM5B,MAAM4B,EAAMmT,IAAM,IAClCnT,EAAMC,MAAM4S,WAAavB,GAAYH,KAEnCiC,GAAiB,SAAC9N,GACpBwL,GAAM0B,YAAcxS,EAAM5B,MAC1B0S,GAAMgC,OAAS9B,GACfhR,EAAMqT,OACNlC,GAAUnR,EAAM5B,MAAM4B,EAAMmT,IAAM,IAClCnT,EAAMC,MAAM4S,WAAavB,GAAYH,KAInCmC,GAAW,SAAChO,IACL,EACTlL,aAAaoJ,QAAQ,WAAWsN,GAAM/Q,UACtCC,EAAMmT,IAAMrC,GAAM/Q,SAClBA,EAASmT,UAAYzV,EAAYqT,GAAM/Q,UACvC+Q,GAAMuB,OACNV,GAAa,GACbnH,IAAc,GAUTpK,EAAchE,cAAcgE,EAAczE,SAE7C4X,GAAU,SAACjO,GACbqM,GAAa,GACbnH,IAAc,GACVpK,EAAclE,YACdkE,EAAcrE,SAGhByX,GAAa,SAAClO,GAGhB,GAFAlL,aAAaoJ,QAAQ,OAAQsN,GAAM0B,aACnC1S,EAAYoT,UAAYzV,EAAYqT,GAAM0B,aACrCxS,IAAUsG,SAASmN,mBACjB,CAGH,IAAIrV,EAFJ4B,EAAM5B,MAAQ0S,GAAM0B,YACpBrB,GAAUnR,EAAM5B,MAAM4B,EAAMmT,IAAM,IAElC,IACI/U,EAAS0S,GAAM4C,UAAY5C,GAAM4C,SAASC,IAAI7C,GAAM4C,SAASxa,OAAS,GACxE,MAAMoM,GACJlH,EAAQ,EAEKA,EAAM4B,EAAMmT,IAAO,IACpCnT,EAAMC,MAAM4S,WAAavB,GAAYH,MAGvCyC,GAAU,SAACtO,GACbtM,QAAQC,IAAI,YACZ0Y,GAAa,GAEbnH,IAAc,GACVpK,EAAcjE,eACdiE,EAAcpE,YAGhB6X,GAAS,SAACvO,GACZxC,GAAa,GACb0H,IAAc,IAEZsJ,GAAQ,SAACxO,GACXtF,EAAM5B,MAAQ,EACd0B,EAAYoT,UAAY,QACnB9S,EAAc/D,eACf+D,EAAc7D,OAEE,IAAhBoD,GACAmR,GAAMuB,OACNjS,EAAgB,MAChBA,EAAgB,IAAIxF,EAAM,GAAI+X,KACXvW,cAAcgE,EAAczE,SACxB,IAAhBgE,GACPmD,GAAa,GACb0H,IAAc,GACdxK,EAAMC,MAAM4S,WAAavB,GAAY,IAEhB,IAAjBrO,EAAM/J,OACN4X,GAAMuB,OAENE,MAINwB,GAAQ,uCAAG,WAAOzO,GAAP,SAAAvM,EAAA,sDACbyR,IAAc,GACd1H,GAAa,GACT1C,EAAclE,YACdkE,EAAcrE,QAElBuK,SAASpF,MAAQ,SANJ,2CAAH,sDAWR8S,GAAS,uCAAG,WAAO1O,GAAP,SAAAvM,EAAA,sDACdyR,IAAc,GACd1H,GAAa,GACT1C,EAAcjE,eACdiE,EAAcpE,WAElBsK,SAASpF,MAAT,UAAoByD,EAAKd,OAASc,EAAKb,MAAvC,aANc,2CAAH,sDAcTmQ,GAAY,SAAC3O,GAgBf,GAfkB,KAAdA,EAAE4O,UACFjD,IAAU,GAEI,KAAd3L,EAAE4O,SAAkBjD,KAAY9Q,IAChCmF,EAAE6O,iBACFjU,KAEc,KAAdoF,EAAE4O,SAAkBjD,KACpB3L,EAAE6O,iBACF5B,MAEc,KAAdjN,EAAE4O,SAAkBjD,KACpB3L,EAAE6O,iBACFzB,MAEc,KAAdpN,EAAE4O,SAAkBjD,GAAS,CAC7B,IAAMlR,EAAW+Q,GAAM/Q,SACjBtD,EAAOqU,GAAM0B,YACf/V,EAAO,GAAKsD,IACZ+Q,GAAM0B,YAAc/V,EAAO,IAGnC,GAAkB,KAAd6I,EAAE4O,SAAkBjD,GAAS,CAC7B,IAAMxU,EAAOqU,GAAM0B,YACf/V,EAAO,GAAK,IACZqU,GAAM0B,YAAc/V,EAAO,MAIjC2X,GAAU,SAAC9O,GACK,KAAdA,EAAE4O,UACFjD,IAAU,IAUZ0B,GAAsB,WACxB3Y,EAAY,CACRZ,OAAQ,OACRkB,SAAU,uBACVd,KAAM,CACF0Q,MAAOvF,EAAKb,UAelBuE,GAAgB,SAAA/C,GAClBtM,QAAQC,IAAI,QAAQ8N,GAAc1F,MAC9B0F,GAAc1F,MACd2F,GAAiB,2BACVD,IADS,IAEZ1F,MAAM,MAuLlB,OAlLAT,qBAAU,WAAO,IAAD,UACRyT,GAAe,EAgDnB,OA/CA,WACI,KAAI5K,OAAOC,KAAKwI,IAAUhZ,OAAS,GAGnC,GAAIgZ,GAASnH,OAASpG,EAAKoG,KAA3B,CAIA,IAAMuJ,OAAsCC,IAAf5P,EAAKd,MAC5B2Q,OAAuCD,IAAnBrC,GAASrO,MACnC,GAAIyQ,GAAwBE,GACxB,GAAItC,GAASrO,QAAUc,EAAKd,MACxBwQ,GAAe,MAGhB,KAAKC,GAAwBE,EAEhC,YADAH,GAAe,GAEZ,GAAIC,IAAyBE,EAEhC,YADAH,GAAe,GAEZ,IAAKC,IAAyBE,GAC7BtC,GAASpO,QAAUa,EAAKb,MACxBuQ,GAAe,QAlBnBA,GAAe,EALvB,GA4BArb,QAAQC,IAAI,cAAcob,GACtBA,IACAja,aAAa4J,WAAW,QACxB5J,aAAa4J,WAAW,aAE5B5D,EAAgB,IAAIxF,EAAM,GAAG+X,IACzB,iBAAkB8B,YAClBA,UAAUC,aAAapB,SAAW,IAAI7Y,OAAOka,cAAc,CACvDzT,MAAOyD,EAAKd,OAASc,EAAKb,MAC1B8Q,OAAQjQ,EAAKiB,OACbsE,MAAOvF,EAAKb,MACZ+Q,QAAS,CACL,CAAExQ,IAAKM,EAAKe,eAIxB1M,QAAQC,IAAI,UAAZ,UAAsBwb,iBAAtB,iBAAsB,EAAWK,kBAAjC,aAAsB,EAAuBC,UAC7C/b,QAAQC,IAAI,OAAZ,UAAmBwb,iBAAnB,iBAAmB,EAAWK,kBAA9B,aAAmB,EAAuB3S,MAC1CnJ,QAAQC,IAAI,aAAZ,UAAyBwb,iBAAzB,aAAyB,EAAWK,YAC7B,WACmB,OAAlB1U,IACAA,EAAc7D,OACd6D,EAAgB,SAG1B,CAACuE,IAEH/D,qBAAU,WA4FN,OA3FW,uCAAG,gCAAA7H,EAAA,sDACV+X,GAAMgC,OAAS1B,GACftR,EAAcwG,SAASoC,cAAc,gBACrC3I,EAAWuG,SAASoC,cAAc,qBAClC1I,EAAQsG,SAASoC,cAAc,UAC/B7I,EAAcyG,SAASoC,cAAc,gBAC/BsM,EAAQtI,SAAStS,aAAaC,QAAQ,eAC5CsF,EAAc,EACVqV,IACAlD,EAAckD,GACdrV,EAAcqV,GAQlB1O,SAASqC,iBAAiB,UAAUsL,IACpC3N,SAASqC,iBAAiB,QAAQyL,IAGlCvU,EAAYzB,MAAuB,IAAf0S,GAAMgC,OAC1BjT,EAAYI,MAAM4S,WAAarB,GAAkB3R,EAAYzB,OAC7DyB,EAAY8I,iBAAiB,QAAQiK,IACrC/S,EAAY8I,iBAAiB,SAASoK,IACtC/S,GAASA,EAAM2I,iBAAiB,QAAQqK,IACxChT,GAASA,EAAM2I,iBAAiB,SAASyK,IAIzCrT,EAASmT,UAAY,SACZ,EACwB,IAA7BzJ,OAAOC,KAAK/E,GAAMzL,QAClB4X,GAAMmE,QAAU,OAChBnE,GAAMzM,IAAMM,EAAKtL,MA7WzBqR,GAAW,GACXoG,GAAMzM,IAAM,GACZtB,EAAQ,IACR3I,aAAa4J,WAAW,SACxBhB,EAAS,IACToP,IAAW,GACPvL,IAAaC,IAAgBD,KAqXzBqO,OAAcX,EAAWY,OAAUZ,EACtB,KAAb5P,EAAKtL,KACLyJ,GAAa,GACb6O,GAAa,GACbb,GAAMnI,iBAAiB,iBAAiB2K,IACxCxC,GAAMnI,iBAAiB,UAAU4K,IACjCzC,GAAMnI,iBAAiB,aAAa6K,IACpC1C,GAAMnI,iBAAiB,UAAUiL,IACjC9C,GAAMnI,iBAAiB,OAAOkL,IAC9B/C,GAAMnI,iBAAiB,QAAQmL,IAC/BhD,GAAMnI,iBAAiB,QAAQoL,IAC/BjD,GAAMnI,iBAAiB,UAAUqL,IAEjC5Z,aAAaoJ,QAAQ,aAAaN,KAAKO,UAAUkB,IAIjDwQ,EAAU,KACU,QAFpBD,EAAc,OAE0B,OAAZC,IACxBrE,GAAM0B,YAAc2C,EACpBnV,EAAMmT,IAAM+B,EACZlV,EAAM5B,MAAQ+W,EACdhE,GAAUnR,EAAM5B,MAAM4B,EAAMmT,IAAM,IAClCnT,EAAMC,MAAM4S,WAAavB,GAAYH,IACrCpR,EAASmT,UAAYzV,EAAYyX,GACjCpV,EAAYoT,UAAYzV,EAAY0X,MAGxC3K,IAAc,GACd0K,EAAc9a,aAAaC,QAAQ,YACnC8a,EAAU/a,aAAaC,QAAQ,QAC/B2F,EAAMmT,IAAM+B,EACZlV,EAAM5B,MAAQ+W,EACdhE,GAAUnR,EAAM5B,MAAM4B,EAAMmT,IAAM,IAClCnT,EAAMC,MAAM4S,WAAavB,GAAYH,IACrCpR,EAASmT,UAAYzV,EAAYyX,GACjCpV,EAAYoT,UAAYzV,EAAY0X,IArF9B,4CAAH,oDAyFXC,GAEO,WACH,GAAiB,KAAbzQ,EAAKtL,IAAY,CACjB,IAAMqK,EAAQvE,EAAYN,QAAQ8F,GAClCA,EAAKtL,IAAMsL,EAAKZ,cACTY,EAAKZ,OACZ5E,EAAYuE,GAASiB,EACrB3B,EAAS7D,GAEbmH,SAASsC,oBAAoB,UAAUqL,IACvC3N,SAASsC,oBAAoB,QAAQwL,IAGrCvU,EAAY+I,oBAAoB,QAAQgK,IACxC/S,EAAY+I,oBAAoB,SAASmK,IACzC/S,GAASA,EAAM4I,oBAAoB,QAAQoK,IAC3ChT,GAASA,EAAM4I,oBAAoB,SAASwK,IAE5CtC,GAAMlI,oBAAoB,iBAAiB0K,IAC3CxC,GAAMlI,oBAAoB,UAAU2K,IACpCzC,GAAMlI,oBAAoB,aAAa4K,IACvC1C,GAAMlI,oBAAoB,UAAUgL,IAEpC9C,GAAMlI,oBAAoB,QAAQkL,IAClChD,GAAMlI,oBAAoB,QAAQmL,IAClCjD,GAAMlI,oBAAoB,UAAUoL,OAG1C,CAACrP,EAAMsC,KAGL,sBAAK7C,UAAU,aAAf,UACI,uBAAOjC,KAAK,QAAQrE,IAAI,IAAIuX,aAAa,IAAIjR,UAAU,QAAQkR,SAAU5D,GAA0B,KAAb/M,EAAKtL,MAC3F,qBAAK+K,UAAU,cAAf,SACI,qBAAKA,UAAU,SAAf,SACI,sBAAKA,UAAU,cAAcqB,QAAS6M,GACtCjN,YAAa,kBAAMN,GAAW,IAC9BQ,WAAY,kBAAMR,GAAW,IAF7B,UAGI,sBAAKX,UAAU,YAAf,UACI,qBAAKA,UAAU,OAAf,SACI,qBAAKC,IAAKkR,GAAU9P,QAASiN,GAAcnO,IAAI,GAAGrD,MAAM,6BAE5D,qBAAKkD,UAAU,SAAf,SACmC,IAA7BqF,OAAOC,KAAK/E,GAAMzL,OAChB,mCAEIwY,EAAY,qBAAKtN,UAAU,iBAC3B,qBAAKA,UAAU,cAAcqB,QAASvF,EAAamE,IAAMzE,EAAgB+J,GAAQR,GAAO5E,IAAI,GAC5FrD,MAAQtB,EAAgB,QAAU,WAGtC,qBAAKwE,UAAU,cAAcC,IAAK8E,GAAMjI,MAAM,OAAOqD,IAAI,OAGjE,qBAAKH,UAAU,UAAf,SACI,qBAAKC,IAAKmR,GAAM/P,QAAS8M,GAAUhO,IAAI,GAAGrD,MAAM,gBAEpD,qBAAKkD,UAAU,cAAf,mBACA,qBAAKA,UAAU,kBAAf,eACA,qBAAKA,UAAU,mBAAf,sBAEJ,qBAAKA,UAAU,aAAf,SACI,qBAAKA,UAAU,kBAAf,SACmC,IAA7BqF,OAAOC,KAAK/E,GAAMzL,OAChB,qCACA,qBAAKkL,UAAU,iBAAiBnE,MAAO,CACnCwV,gBAAgB,OAAD,OAASC,GAAT,KACfC,eAAgB,SAFpB,SAII,qBAAKtR,IAAKM,EAAKe,UAAWnB,IAAI,OAElC,sBAAKH,UAAU,cAAf,UACI,mBAAGA,UAAU,YAAb,SAA0BO,EAAKd,OAASc,EAAKb,QAC7C,sBAAKM,UAAU,uBAAf,UAEQO,EAAKb,MAAM5K,OAAS,GACpB,qCACA,mBAAGkL,UAAU,cAAb,mBAA+BO,EAAKiB,OAAOrC,MAAM,EAAE,IAAnD,SACA,qBAAKa,UAAU,cACf,mBAAGA,UAAU,cAAb,mBAA+BO,EAAKb,MAAMP,MAAM,EAAE,IAAlD,YAGAoB,EAAKiB,OAAO1M,OAAS,GACrB,qCACA,mBAAGkL,UAAU,cAAb,mBAA+BO,EAAKiB,OAAOrC,MAAM,EAAE,IAAnD,SACA,qBAAKa,UAAU,cACf,mBAAGA,UAAU,cAAb,mBAA+BO,EAAKb,YAGpC,qCACA,mBAAGM,UAAU,cAAb,mBAA+BO,EAAKiB,UACpC,qBAAKxB,UAAU,cACf,mBAAGA,UAAU,cAAb,mBAA+BO,EAAKb,YAGxC,qBAAKM,UAAU,cACf,mBAAGA,UAAU,cAAb,SAA4BO,EAAKgC,WACjC,qBAAKvC,UAAU,cACf,mBAAGA,UAAU,cAAb,SAA4BO,EAAK2G,gBAE7B,OAIxB,sBAAKlH,UAAU,aAAf,UACI,qBAAKA,UAAU,eACfnE,MAAO,CAAE2V,QAAQ,GAAD,OAAM9Q,EAAU,IAAM,MADtC,SAEI,qBAAKV,UAAU,cAAf,SACI,uBAAOjC,KAAK,QAAQrE,IAAI,IAAIqV,IAAI,MAAMkC,aAAa,MAAMjR,UAAU,cACnEqB,QAAS,SAAAH,GAAC,OAAIA,EAAEQ,yBAGxB,qBAAK1B,UAAU,UAAf,SACOwK,GAA6G,GAAjG,qBAAKvK,IAAK0N,GAAU8D,GAAYC,GAAYvR,IAAI,GAAGrD,MAAM,UAAUuE,QApgBvF,SAAAH,GAEnB,GADAA,EAAEQ,mBACGiM,IAAW5S,EAAYjG,OAAS,EAAG,CACpC,IAAM6c,EAAa5W,EACbuE,EAAQqS,EAAWlX,QAAQ8F,GAFG,EAGC,CAACoR,EAAWrS,GAAQqS,EAAW,IAAnEA,EAAW,GAHwB,KAGpBA,EAAWrS,GAHS,KAIpC,IAAMsS,EAfI,SAACjY,GACf,IAAIR,EAAqB0Y,EAAlBC,EAAMnY,EAAI7E,OACjB,IAAKqE,EAAE2Y,EAAI,EAAG3Y,EAAE,EAAGA,IAAK,OAEE,CAACQ,EADvBkY,EAAOrY,KAAKC,MAAMD,KAAKuY,SAAWD,IACAnY,EAAIR,IAArCQ,EAAIR,GAFe,KAEXQ,EAAIkY,GAFO,KAKxB,OADAlY,EAAIoK,OAAO,EAAE,EAAExD,GACR5G,EAQcqY,CAAUL,EAAWxS,MAAM,EAAEpE,EAAYjG,SAC1DF,QAAQC,IAAI,WAAW+c,GACvB5b,aAAaoJ,QAAQ,QAAQN,KAAKO,UAAUuS,IAC5ChT,EAASgT,GAEThE,IAAW,GACXlW,YAAW,WACPkW,IAAW,KACb,WAwfc,qBAAK5N,UAAU,SAAf,SACI,qBAAKC,IACc,IAAfwN,EAAmBwE,GACJ,IAAfxE,EAAmByE,GAASC,GAC9BhS,IAAI,GAAGkB,QA5mBhB,SAAAH,GACjBA,EAAEQ,kBACF1L,aAAaoJ,QAAQ,aAAaqO,EAAW,EAAI,EAAI,EAAIA,EAAW,GACpElS,EAAckS,EAAW,EAAI,EAAI,EAAIA,EAAW,EAChDC,EAAcD,EAAW,EAAI,EAAI,EAAIA,EAAW,IAwmBQ3Q,MAAM,aAGtCb,EAAYoB,KAAO,GACnB,qBAAK2C,UAAU,cAAcqB,QAAS6M,GAAtC,SACI,qBAAKjO,IAAKwC,GAAc2P,GAAYC,GAASlS,IAAI,GAAGrD,MAAM,2BAyBjFwV,GAAS,WAAO,IAAD,EACCpW,EAAe0B,IAAjC+E,EADiB,oBAEhB1F,EAAoC0F,EAApC1F,KAAMa,EAA8B6E,EAA9B7E,OAAQD,EAAsB8E,EAAtB9E,OAFE,EAEoB8E,EAAdvN,YAFN,MAEa,GAFb,EAQxB,OALAyG,EAAQ,CACJ0W,IAAI,GAAD,OAAK1U,EAAL,MACH2U,KAAK,GAAD,OAAK1U,EAAL,OAGHb,EAID,qBAAK+C,UAAU,SAASnE,MAAOA,EAA/B,SACsB,IAAhBzG,EAAKN,OACHM,EAAKI,KAAI,SAAAid,GACL,OACI,qBAAKzS,UAAU,YAAYqB,QAASoR,EAAK5O,KAAzC,SACI,qBAAK7D,UAAU,UAAf,SAA0ByS,EAAK7O,YAIzC,KAZH,IAkBT8O,GAAa,WAAO,IAAD,EACLxW,EAAeoB,IAAxBiD,EADc,oBAUrB,OACI,qBAAKP,UAAU,cAAf,SACI,sBAAKA,UAAU,mBAIfnE,MAAO,CAAE4S,WAAW,aAJpB,UAQI,qBAAKzO,UAAU,cAAf,SAKI,qBAAKC,IAAKM,EAAKe,UAAWnB,IAAI,OAElC,qBAAKH,UAAU,oBAMzB2S,GAAa,WAAO,IAAD,EACGzW,EAAeiC,IADlB,mBACdgF,EADc,KACRC,EADQ,OAELlH,EAAeoB,IAAxBiD,EAFc,oBAIrB,OAAK4C,EAID,qBAAKnD,UAAU,aAAf,SACI,sBAAKnE,MAAO,CAAE+W,SAAU,WAAY3Q,MAAO,OAAQI,OAAQ,QAA3D,UACI,qBAAKrC,UAAU,aAAf,SACI,qBAAKA,UAAU,aAAaqB,QAAS,kBAAM+B,GAAQ,IAAnD,SACI,qBAAKnD,IAAK4S,GAAO1S,IAAI,SAG7B,qBAAKF,IAAKM,EAAKe,WAAa,GAAInB,IAAI,UAVrC,IAgBT2S,GAAc,WAAO,IAAD,EACA5W,EAAe+B,IADf,mBACf8U,EADe,KACVC,EADU,OAEH9W,EAAeO,GAA3B4J,EAFe,oBAatB,OATI0M,EAAI9V,MAAQoJ,IACR4G,IACAxV,aAAawV,IAEjBA,GAAUvV,YAAW,WACjBsb,EAAO,2BAAKD,GAAN,IAAW9V,MAAM,OACxB,OAIH,qBAAK+C,UAAY+S,EAAI9V,MAAQoJ,EAAU,iBAAgC,KAAb0M,EAAI9V,KAAc,mBAAqB,oBAAjG,SACI,qBAAK+C,UAAU,UAAf,SAA0B+S,EAAI7U,SAKpC+U,GAAgB,SAAC,GAAwB,IAAD,IAArBnH,EAAqB,EAArBA,eACfH,EAAU3V,aAAaC,QAAQ,WAC/ByV,EAAW1V,aAAaC,QAAQ,YAAY4D,MAAM,KAClDqZ,EAAQld,aAAaC,QAAQ,SAC7BgJ,EAAO,CAAC,iBAAiB,YAAY,UAAU,qBAqB/CkU,EAAQ,SAAAjS,GACLjC,EAAKiF,SAAShD,EAAEiD,OAAOnE,YACxB8L,GAAe,IAIjB1W,EAAO,CACT,CAAEwO,KAAM,UAAWC,KA1BH,WAChBxN,OAAO4G,KAAK,WAAY,YA0BxB,CAAE2G,KAAM,UAAWC,KAAM,cACzB,CAAED,KAAM,WAAYC,KAxBX,uCAAG,sBAAAlP,EAAA,sEACMiB,EAAY,CAC1BZ,OAAQ,MACRkB,SAAU,cAHF,kBAKJkd,QALI,uBAMRpd,aAAaqd,QACbhd,OAAOC,SAASC,KAAO,IAPf,kBAQD,MARC,cAURF,OAAOC,SAASC,KAAO,SAVf,kBAWD,MAXC,4CAAH,uDA2BP+c,EAAM,uCAAG,WAAOb,GAAP,SAAA9d,EAAA,sEACL8d,EAAK5O,OADA,OAEXiI,GAAe,GAFJ,2CAAH,sDAYZ,OAPAtP,qBAAU,WAEN,OADA0F,SAASqC,iBAAiB,QAAS4O,GAC5B,WACHjR,SAASsC,oBAAoB,QAAS2O,MAE3C,IAGC,sBAAKnT,UAAU,iBAAf,UACI,sBAAKA,UAAU,kBAAf,UACI,qBAAKA,UAAU,kBAAf,SAEQ2L,EACA,qBAAK3L,UAAU,iBAAf,SACI,qBAAKC,IAAK0L,EAASxL,IAAI,OAE3B,sBAAKH,UAAU,iBAAiBnE,MAAO,CAAEuF,gBAAiB,SAAUG,MAAO,QAASgL,SAAU,OAA9F,oBACKb,EAAS,GAAG,UADjB,aACK,EAAgBc,cAAed,EAAS,KAAT,UAAeA,EAAS,GAAG,UAA3B,aAAe,EAAgBc,oBAI3E,qBAAKxM,UAAU,eAAf,SAA+B0L,IAC/B,qBAAK1L,UAAU,gBAAf,SAAgCkT,OAElB,IAAhB9d,EAAKN,OACHM,EAAKI,KAAI,SAAAid,GACL,OACI,qBAAKzS,UAAU,YAAYqB,QAAS,kBAAMiS,EAAOb,IAAjD,SACI,qBAAKzS,UAAU,UAAf,SAA0ByS,EAAK7O,YAIzC,OAyBH2P,GAnBF,WAAO,IAAD,EACIrX,EAAeO,GAA3B4J,EADQ,sBAEuBnK,EAAe8B,IAFtC,mBAERwV,EAFQ,KAEK1H,EAFL,OAIG5P,EAAekB,IAA1ByQ,EAJQ,oBAMf,OACI,sBAAK7N,UAAU,WAAf,UACI,cAAC,GAAD,IACEwT,EAAc,cAAC,GAAD,CAAe1H,eAAgBA,IAAqB,KACpE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAC,GAAD,IACE+B,EAAOxQ,KAAO,cAAC,GAAD,IAAgB,GAC9BgJ,EAAU,cAAC,GAAD,IAAY,OCl9BdoN,GAAkB,KAGlCC,GAAM,WLoJyB,WAA7Brd,OAAOC,SAASqd,WAChBtd,OAAOC,SAASqd,SAAW,UKrJjB,MAEczX,EAAekB,IAF7B,mBAEPyQ,EAFO,KAEC+F,EAFD,OAGwB1X,EAAesB,IAHvC,mBAGPiF,EAHO,KAGMC,EAHN,OAIKxG,EAAeO,GAA3B4J,EAJO,oBAKVpK,EAAc4R,EACdgG,EAAexN,EACnB/K,EAAmBmH,EAEK,OAApBgR,IACApc,aAAY,WACR3C,IACA+e,GAAkB,OACnB,KAGP,IAOMK,EAAU,SAAA5S,GACM,MAAdA,EAAE4O,SAAiC,KAAd5O,EAAE4O,SACvB5O,EAAE6O,iBAEY,KAAd7O,EAAE4O,UACF5O,EAAE6O,iBACE8D,GAZRD,EAAU,2BACH3X,GADE,IAELoB,MAAOpB,EAAYoB,UAgBrB0W,EAAQ,SAAA7S,GACN5F,GACAoH,GAAe,IAavB,OATAlG,qBAAU,WAGN,OAFA0F,SAASqC,iBAAiB,UAAUuP,GACpCzd,OAAOkO,iBAAiB,WAAWwP,GAC5B,WACH7R,SAASsC,oBAAoB,UAAUsP,GACvCzd,OAAOmO,oBAAoB,WAAWuP,MAE5C,IAGE,eAAC,KAAD,WACI,cAAC,IAAD,CAAOC,OAAK,EAACzI,KAAuB,IAAe0I,UAAWC,KAC9D,cAAC,IAAD,CAAO3I,KAAI,UAAKnN,GAAL,SAAoB6V,UAAWV,SAKtDY,IAASC,OAAO,cAAC,GAAD,IAAQlS,SAASmS,eAAe,W","file":"static/js/main.391fba93.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/latest-whiteblack.04c29079.svg\";","export default __webpack_public_path__ + \"static/media/blackandwhitelogo.6da78fc9.svg\";","import { useState, useEffect, useRef } from \"react\";\r\nimport axios from \"axios\";\r\nlet songservers = [];\r\n// let baseLink = \"\";\r\n\r\n\r\n// export const baseHeaders = {\r\n//     \"Connection\": \"Keep-Alive\",\r\n//     \"Keep-Alive\": \"timeout=20000,max=1000\"\r\n// };\r\n\r\nexport const keepServersActive = async () => {\r\n    console.log(\"activate call\");\r\n\r\n    if (songservers.length === 0) {\r\n        songservers = await axios({\r\n            method: \"GET\",\r\n            url: \"https://fervent-meninsky-931668.netlify.app/.netlify/functions/serverUrls\"\r\n        }).then(res => res.data.archives);\r\n    }\r\n\r\n    await Promise.all(\r\n        songservers.map(async (server) => {\r\n            try {\r\n                const res = await axios.get(server);\r\n                return res;\r\n            } catch(e) {\r\n                console.log(\"ERROR---------------\",e.message);\r\n                if (e) return;\r\n            }\r\n        })\r\n    );\r\n};\r\n\r\nexport const sendRequest = async config => {\r\n    let baseLink = \"http://localhost:5000\";\r\n    // const baseLink = \"https://studioserver.herokuapp.com\";\r\n    // let baseLink = \"http://192.168.29.77:5000\";\r\n    // const baseLink = \"\";\r\n\r\n    if (!baseLink) {\r\n        baseLink = await axios({\r\n            method: \"GET\",\r\n            url: \"https://fervent-meninsky-931668.netlify.app/.netlify/functions/serverUrls\"\r\n            // url: \"https://studio-urls.netlify.app/.netlify/functions/serverUrls\"\r\n        }).then(res => res.data.server);\r\n    }\r\n\r\n    const baseHeaders = {\r\n        USER: localStorage.getItem(\"userId\") || \"\"\r\n    };\r\n    let res;\r\n\r\n    try {\r\n        res = await axios({\r\n            method: config.method,\r\n            // url: `${baseLink}/api${config.endpoint}`,\r\n            url: `/api${config.endpoint}`,\r\n            data: config.data || {},\r\n            headers: baseHeaders\r\n        });\r\n        const { data } = res;\r\n        if (data.redirect) {\r\n            window.location.href = \"/login\";\r\n            return null;\r\n        }\r\n        return data;\r\n    } catch (e) {\r\n        console.log(\"ERROR----\",e.message);\r\n        return null;\r\n    }\r\n};\r\n\r\n\r\nconst openerConfig = {\r\n    open: false,\r\n    yValue: 0,\r\n    xValue: 0,\r\n    type: null,\r\n    data: []\r\n};\r\n\r\nconst topBarConfig = {\r\n    button: false,\r\n    buttonFunc: () => {},\r\n    title: \"\",\r\n    bgColor: \"transparent\"\r\n};\r\n\r\nconst searchConfig = {\r\n    open: false,\r\n    input: \"\",\r\n    prevTab: \"\"\r\n};\r\n\r\nconst fullScreenConfig = {\r\n    show: false\r\n}\r\n\r\nexport function Timer (delay, cb) {\r\n\r\n    let _time = delay;\r\n    let _callback = cb;\r\n\r\n    let _timeoutTimer = 0;\r\n    let _intervalTimer = 0;\r\n    let _secondsTracker = 0;\r\n    let _done = false;\r\n    let _paused = false;\r\n    let _started = false;\r\n\r\n    const _startInterval = () => {\r\n        clearInterval(_intervalTimer);\r\n        _intervalTimer = setInterval(() => {\r\n            _secondsTracker++;\r\n        },1000);\r\n    };\r\n\r\n    this.start = (t = _time) => {\r\n        _paused = false;\r\n        _started = true;\r\n        _startInterval();\r\n        clearTimeout(_timeoutTimer);\r\n        _timeoutTimer = setTimeout(() => {\r\n            _callback();\r\n            _done = true;\r\n            clearInterval(_intervalTimer);\r\n        },t*1000);\r\n    };\r\n\r\n    this.pause = () => {\r\n        _paused = true;\r\n        clearTimeout(_timeoutTimer);\r\n        clearInterval(_intervalTimer);\r\n    }\r\n\r\n    this.continue = () => {\r\n        let diff = _time - _secondsTracker < 0 ? 0 : _time - _secondsTracker;\r\n        this.start(diff);\r\n    };\r\n\r\n    this.canPause = () => {\r\n        return !_done && _started && !_paused;\r\n    };\r\n\r\n    this.canContinue = () => {\r\n        return !_done && _started && _paused;\r\n    };\r\n\r\n    this.hasStarted = () => {\r\n        return _started;\r\n    };\r\n\r\n    this.hasFinished = () => {\r\n        return this.done;\r\n    };\r\n\r\n    this.stop = () => {\r\n        clearInterval(_intervalTimer);\r\n        clearTimeout(_timeoutTimer);\r\n    };\r\n\r\n};\r\n\r\nexport const httpCheck = () => {\r\n    if (window.location.protocol !== \"https:\") {\r\n        window.location.protocol = \"https:\";\r\n    }\r\n};\r\n\r\nexport const wait = time => {\r\n    return new Promise((resolve,) => {\r\n        setTimeout(resolve, time);\r\n    });\r\n};\r\n\r\nexport const checkX = (cursorX, sWidth) => {\r\n    const atRight = (cursorX + 250 + 5) < sWidth;\r\n    if (atRight) {\r\n        return cursorX + 5;\r\n    }\r\n    return cursorX - 250 - 5;\r\n};\r\n\r\nexport const checkY = (cursorY, sHeight, num) => {\r\n    const heightOfBody = (50 * num) + 10;\r\n    const atBottom = (heightOfBody + cursorY + 5) < sHeight;\r\n    if (atBottom) {\r\n        return cursorY + 5;\r\n    }\r\n    return cursorY - heightOfBody - 5;\r\n};\r\n\r\nexport const modifyLibrary = (res, decidingNumber) => {\r\n    for (let key in res) {\r\n        if (res[key].length < decidingNumber) {\r\n            const arr = res[key];\r\n            const times = decidingNumber - arr.length;\r\n            for (let i=1;i<=times; i++) {\r\n                res[key].push({});\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\nexport const convertTime = time => {\r\n    let total = Math.floor(time);\r\n    let min = total/60;\r\n    let secs;\r\n    let arr = min.toString().split(\".\");\r\n    if (arr.length < 2) {\r\n        min = arr[0];\r\n        secs = \"00\";\r\n        return `${min}: ${secs}`;\r\n    } else {\r\n        min = arr[0];\r\n        secs = total - (min*60);\r\n        return `${min}: ${secs < 10 ? \"0\" : \"\"}${secs}`;\r\n    }\r\n};\r\n\r\nexport const checkArtist = async (artist,e,type) => {\r\n    return;\r\n    if (artist === \"Various Artists\") return;\r\n    if (e.target.className !== \"artistpara\" && type === \"artist\") return; \r\n    if (e.target.className !== \"albumartistname\" && type === \"albumartist\") return; \r\n    let res = await sendRequest({\r\n        method: \"POST\",\r\n        endpoint: `/checkArtist`,\r\n        data: {\r\n            name: artist\r\n        }\r\n    });\r\n    if (e.target.className !== \"artistpara-true\" && e.target.className !== \"artistpara-false\" && type === \"artist\") {\r\n        if (res.available) {\r\n            e.target.className = \"artistpara-true\";\r\n        } else {\r\n            e.target.className = \"artistpara-false\";\r\n        }\r\n        return;\r\n    }\r\n    if (e.target.className !== \"albumartistname-true\" && e.target.className !== \"albumartistname-false\" && type === \"albumartist\") {\r\n        if (res.status === 200 && res.data.available) {\r\n            e.target.className = \"albumartistname-true\";\r\n        } else {\r\n            e.target.className = \"albumartistname-false\";\r\n        }\r\n    }\r\n};\r\n\r\nfunction createGlobalState(initialValue) {\r\n    this.value = initialValue;\r\n    this.subscribers = [];\r\n\r\n    this.getValue = function() {\r\n        return this.value;\r\n    }\r\n\r\n    this.setValue = function(newState) {\r\n        if (this.getValue() === newState) {\r\n            return\r\n        }\r\n        this.value = newState;\r\n        this.subscribers.forEach(subscriber => {\r\n            subscriber(this.value);\r\n        });\r\n    }\r\n\r\n    this.subscribe = function(itemToSubscribe) {\r\n        if (this.subscribers.indexOf(itemToSubscribe) !== -1) {\r\n            return\r\n        }\r\n        this.subscribers.push(itemToSubscribe);\r\n    }\r\n\r\n    this.unsubscribe = function(itemToUnsubscribe) {\r\n        this.subscribers = this.subscribers.filter(\r\n            subscriber => subscriber !== itemToUnsubscribe\r\n        );\r\n    }\r\n};\r\n\r\nexport const CustomUseState = globalState => {\r\n    let [, setState] = useState();\r\n    const state = globalState.getValue();\r\n\r\n    function reRender(newState) {\r\n        setState({});\r\n    }\r\n\r\n    useEffect(() => {\r\n        globalState.subscribe(reRender);\r\n        return () => {\r\n            globalState.unsubscribe(reRender);\r\n        }\r\n    })\r\n\r\n    function setNewState(newState) {\r\n        globalState.setValue(newState);\r\n    }\r\n\r\n    return [state, setNewState];\r\n};\r\n\r\nexport const usePrevious = value => {\r\n    const ref = useRef({});\r\n    useEffect(() => {\r\n        ref.current = value;\r\n    });\r\n    return ref.current;\r\n}\r\n\r\nexport let playingGlobal = new createGlobalState(false);\r\nexport let colorGlobal = new createGlobalState(\"\");\r\nexport let tabGlobal = new createGlobalState(\"Home\");\r\nexport let routesGlobal = new createGlobalState([\"/home/homescreen\"]);\r\n// export let keepButtonGlobal = new createGlobalState(false);\r\n// export let onClickFuncGlobal = new createGlobalState(() => {});\r\n// export let topTitleGlobal = new createGlobalState(\"\");\r\n// export let topBgColor = new createGlobalState(\"transparent\");\r\nexport let topBarGlobal = new createGlobalState(topBarConfig);\r\nexport let searchBarGlobal = new createGlobalState(searchConfig);\r\nexport let fullScreenGlobal = new createGlobalState(fullScreenConfig);\r\nexport let albumGlobal = new createGlobalState({});\r\nexport let queueGlobal = new createGlobalState([]);\r\nexport let queueOpenedGlobal = new createGlobalState(\"\");\r\nexport let songIsPausedGlobal = new createGlobalState(false);\r\nexport let repeatTypeGlobal = new createGlobalState(0);\r\nexport let radioGlobal = new createGlobalState(false);\r\nexport let justOpened = new createGlobalState(true);\r\nexport let openerGlobal = new createGlobalState(openerConfig);\r\nexport let profileOpener = new createGlobalState(false);\r\nexport let homeClass = new createGlobalState(\"homemain start\");\r\nexport let responseBar = new createGlobalState({ open: \"\", msg: \"\" });\r\nexport let miniPlayerGlobal = new createGlobalState(false);\r\nexport let topBgColorGlobal = new createGlobalState(\"#202020\");\r\n\r\n// export const prefix = \"/player\";\r\nexport const prefix = \"\";","import \"../../../css/queuestyles.css\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport Close from \"../../../assets/deletewhite.svg\";\r\nimport Placeholder from \"../../../assets/placeholder.svg\";\r\nimport Expand from \"../../../assets/expand-white.svg\";\r\n// import Expand from \"../../../assets/fullscreen.png\";\r\nimport Minimize from \"../../../assets/minimizeplayer-white.svg\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport {\r\n    CustomUseState,\r\n    queueGlobal,\r\n    queueOpenedGlobal,\r\n    songIsPausedGlobal,\r\n    albumGlobal,\r\n    responseBar,\r\n    openerGlobal,\r\n    topBarGlobal,\r\n    miniPlayerGlobal,\r\n    checkX,\r\n    checkY,\r\n    routesGlobal,\r\n    prefix\r\n} from \"../../../common\";\r\nlet finalQueue = [], queueLength, songIndex, smallArr;\r\nlet actualQueue, firstpart, lastpart, topBar, miniLocal, isOpen;\r\n\r\n\r\n\r\nconst SongInQueue = ({ nowPlaying = false, songIsPaused = null, song, number = null, openerFunc }) => {\r\n    const [hovered, setHovered] = useState(false);\r\n    const [,setPlayingSong] = CustomUseState(albumGlobal);\r\n    const [,setSongIsPaused] = CustomUseState(songIsPausedGlobal);\r\n\r\n    const mouseOver = e => {\r\n        setHovered(true);\r\n    };\r\n\r\n    const mouseOut = e => {\r\n        setHovered(false);\r\n    };\r\n\r\n    const setSong = () => {\r\n        if (nowPlaying) {\r\n            return;\r\n        }\r\n        setPlayingSong(song);\r\n        setSongIsPaused(true);\r\n    };\r\n\r\n    const handleMenu = e => {\r\n        e.stopPropagation();\r\n        const dimensions = { x: e.clientX, y: e.clientY };\r\n        const windowDim = { width: document.documentElement.clientWidth, height: document.documentElement.clientHeight };\r\n        openerFunc(e, { dimensions, windowDim, song });\r\n    };\r\n\r\n    return(\r\n        <div className=\"nowplaying\" style={{\r\n            marginTop: `${ nowPlaying ? \"10px\" : \"\" }`,\r\n            marginBottom: `${ nowPlaying ? \"30px\" : \"\" }`,\r\n            borderBottom: `${ nowPlaying ? \"\" : \"1px solid rgba(255,255,255,0.1)\" }`\r\n        }} onMouseOver={mouseOver} onMouseOut={mouseOut}>\r\n            <div className=\"innernowplaying\"\r\n            style={{ backgroundColor: `${ nowPlaying || hovered ? \"#202020\" : \"\" }` }}\r\n            onClick={setSong}\r\n            >\r\n                {\r\n                    nowPlaying ?\r\n                    <div className=\"firstpartifnowplaying\">\r\n                        {\r\n                            !songIsPaused ?\r\n                            <div className=\"playinganim\">\r\n                                <div className=\"div1\"></div>\r\n                                <div className=\"div2\"></div>\r\n                                <div className=\"div3\"></div>\r\n                                <div className=\"div4\"></div>\r\n                            </div> : \r\n                            <div className=\"pausedanim\">\r\n                                <div className=\"div5\"></div>\r\n                                <div className=\"div6\"></div>\r\n                                <div className=\"div7\"></div>\r\n                                <div className=\"div8\"></div>\r\n                            </div>\r\n                        }\r\n                    </div> :\r\n                    <div className=\"firstpart\">{number}</div>\r\n                }\r\n                <div className=\"nowplayingart\">\r\n                    <img src={song.Thumbnail} alt=\"\"/>\r\n                </div>\r\n                <div className=\"queuesongdetails\">\r\n                    <div className=\"startingpart\">\r\n                        <div className=\"playingsongname\"\r\n                        style={{ color: `${ nowPlaying ? \"white\" : \"white\" }` }}>{song.Title || song.Album}</div>\r\n                        <div className=\"playingsongartist\">{song.Artist}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"lastpart\">\r\n                    <div className={ hovered ? \"openercontrol\" : \"openercontrol hidden\" } style={{marginLeft: \"0px\"}}\r\n                    onClick={handleMenu}>\r\n                        <div className=\"opener1\"></div>\r\n                        <div className=\"opener2\"></div>\r\n                        <div className=\"opener3\"></div>\r\n                    </div>\r\n                    { hovered ? \"\" : song.Duration }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Queue = () => {\r\n    const [queueOpened, setQueueOpened] = CustomUseState(queueOpenedGlobal);\r\n    const [songIsPaused,] = CustomUseState(songIsPausedGlobal);\r\n    const [song,] = CustomUseState(albumGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [update, setUpdate] = useState(true);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [,setResBar] = CustomUseState(responseBar);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [mini, setMini] = CustomUseState(miniPlayerGlobal);\r\n    // const [redirectTo, setRedirectTo] = useState(\"\");\r\n    // const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    actualQueue = queue;\r\n    topBar = topBarConfig;\r\n    queueLength = queue.length;\r\n    songIndex = actualQueue.indexOf(song);\r\n    firstpart = actualQueue.slice(0,songIndex);\r\n    lastpart = actualQueue.slice(songIndex+1,queueLength);\r\n    miniLocal = mini;\r\n    isOpen = openerDetails.open;\r\n    const sDiv = useRef(null);\r\n    const hist = useHistory();\r\n\r\n\r\n    const clearQueue = (e) => {\r\n        e.stopPropagation();\r\n        const index = actualQueue.indexOf(song);\r\n        actualQueue = [actualQueue[index]];\r\n        localStorage.setItem(\"queue\",JSON.stringify(actualQueue));\r\n        setQueue(actualQueue);\r\n        setResBar({ open: true, msg: \"Queue cleared\" });\r\n        setUpdate(!update);\r\n    };\r\n\r\n    const goToAlbum = each => {\r\n        setQueueOpened(false);\r\n        // routes.push(`/home/album/${each.Album}`);\r\n        // setRoutes(routes);\r\n        hist.push(`${prefix}/home/album/${each.Album}`);\r\n        // setRedirectTo(`${each.Album}`);\r\n    };\r\n    \r\n    const initial = () => {\r\n        finalQueue = [];\r\n        if (queueLength === 1) {\r\n            return;\r\n        }\r\n        songIndex = queue.indexOf(song);\r\n        if (songIndex === 0) {\r\n            finalQueue = queue.slice(1,queueLength);\r\n            return;\r\n        }\r\n        if (songIndex === queueLength-1) {\r\n            finalQueue = queue.slice(0,queueLength-1);\r\n            return;\r\n        }\r\n        finalQueue = queue.slice(songIndex+1,queueLength);\r\n        smallArr = queue.slice(0,songIndex);\r\n        smallArr.forEach(each => {\r\n            finalQueue.push(each);\r\n        });\r\n        return;\r\n    };\r\n\r\n    const close = () => {\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            button: false\r\n        });\r\n        setQueueOpened(false);\r\n    };\r\n\r\n    const removeSong = (song) => {\r\n        const removeIndex = actualQueue.indexOf(song);\r\n        if (removeIndex !== -1) {\r\n            actualQueue.splice(removeIndex, 1);\r\n            localStorage.setItem(\"queue\",JSON.stringify(actualQueue));\r\n            setQueue(actualQueue);\r\n            setUpdate(!update);\r\n            setResBar({\r\n                open: true,\r\n                msg: `Removed ${song.Title || song.Album} from queue`\r\n            });\r\n        }\r\n    };\r\n\r\n    const albumName = () => {\r\n        if (actualQueue.length === 0) {\r\n            return \"\";\r\n        }\r\n        const index = songIndex+1 < actualQueue.length ? songIndex+1 : 0;\r\n        return actualQueue[index].Album;\r\n    };\r\n\r\n    const lessen = (num) => {\r\n        if (song.Color) {\r\n            let color = song.Color.split(\",\");\r\n            color[3] = `${num})`;\r\n            color = color.join(\",\");\r\n            return color;\r\n        }\r\n    };\r\n\r\n    const minimizer = () => {\r\n        setMini({\r\n            ...miniLocal,\r\n            show: true,\r\n            cover: song.Thumbnail\r\n        });\r\n        setQueueOpened(false);\r\n    };\r\n\r\n    const handleMenu = (e, { dimensions, windowDim, song: selectedSong }) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: true,\r\n            xValue: checkX(dimensions.x, windowDim.width),\r\n            yValue: checkY(dimensions.y, windowDim.height, 2),\r\n            data: [\r\n                {\r\n                    name: \"Remove\",\r\n                    func: () => removeSong(selectedSong)\r\n                },\r\n                {\r\n                    name: \"Go to album\",\r\n                    func: () => goToAlbum(selectedSong)\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const handlePlayingMenu = (e, { dimensions, windowDim, song: selectedSong }) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: true,\r\n            xValue: checkX(dimensions.x, windowDim.width),\r\n            yValue: checkY(dimensions.y, windowDim.height, 1),\r\n            data: [\r\n                {\r\n                    name: \"Go to album\",\r\n                    func: () => goToAlbum(selectedSong)\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const documentClick = e => {\r\n        const list = [\"openercontrol\",\"opener1\",\"opener2\",\"opener3\"];\r\n        if (!list.includes(e.target.className)) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const documentScroll = e => {\r\n        if (isOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        setIsLoading(false);\r\n        sDiv.current = document.querySelector(\".scrollcontainer\");\r\n        document.addEventListener(\"click\",documentClick);\r\n        sDiv.current && sDiv.current.addEventListener(\"scroll\",documentScroll);\r\n        return () => {\r\n            document.removeEventListener(\"click\",documentClick);\r\n            sDiv.current && sDiv.current.removeEventListener(\"scroll\",documentScroll);\r\n        };\r\n    }, [update]);\r\n\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    // if (!queueOpened) {\r\n    //     return \"\";\r\n    // }\r\n    return(\r\n        // <div className={ queueOpened ? \"bottomqueue up\" : queueOpened !== \"\" ? \"bottomqueue down\" : \"bottomqueue start\" }>\r\n        <div className={ queueOpened ? \"bottomqueue show\" : queueOpened !== \"\" ? \"bottomqueue hide\" : \"bottomqueue stay\" }>\r\n        {/* <div className=\"bottomqueue\"> */}\r\n            <div className=\"innerbottomqueue\">\r\n                <div className=\"leftqueuepart\">\r\n                    <div className=\"leftalbumartcover-container\">\r\n                        <div className=\"leftalbumartcover\">\r\n                            <div className=\"dummyforshadow\"></div>\r\n                            <img className=\"expander\" src={Expand} alt=\"\" />\r\n                            <img className=\"minimizer\" onClick={minimizer} src={Minimize} alt=\"\" />\r\n                            <img src={song.Thumbnail} alt=\"\" className=\"leftqueuealbumart\" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"rightqueuepart\">\r\n                    <div className=\"innerrightqueue\">\r\n                        <div className=\"nowplayingtitle\">Now Playing</div>\r\n                        <SongInQueue nowPlaying={true} songIsPaused={songIsPaused} song={song} openerFunc={handlePlayingMenu} />\r\n                        { actualQueue.length !== 1 ?\r\n                            <div className=\"nowplayingtitle\" style={{marginBottom: \"8px\"}}>\r\n                                <div className=\"frontblock\">Next from: {albumName()}</div>\r\n                                <div className=\"backblock\" onClick={clearQueue}>Clear</div>\r\n                            </div> : \"\"\r\n                        }\r\n                        <div className=\"scrollcontainer\" style={{ overflowY: `${ isOpen ? \"hidden\" : \"overlay\" }` }}>\r\n                            {\r\n                                lastpart.length !== 0 ?\r\n                                lastpart.map((each,i) => {\r\n                                    return <SongInQueue nowPlaying={false} song={each} number={songIndex+i+2} openerFunc={handleMenu} />\r\n                                }) : \"\"\r\n                            }\r\n                            {\r\n                                songIndex !== queueLength-1 && songIndex !== 0 ?\r\n                                <div style={{ width: \"100%\", height: \"30px\" }}></div> : \"\"\r\n                            }\r\n                            {\r\n                                firstpart.length !== 0 ?\r\n                                firstpart.map((each,i) => {\r\n                                    return <SongInQueue nowPlaying={false} song={each} number={i+1} openerFunc={handleMenu} />\r\n                                }) : \"\"\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport default Queue;","import \"../../../css/homestyles.css\";\r\nimport \"../../../css/teststyles.css\";\r\nimport \"../../../css/albumview.css\";\r\nimport { Route, Switch, useHistory } from \"react-router-dom\";\r\nimport HomeScreen from \"./HomeScreen\";\r\nimport AlbumView from \"./AlbumView\";\r\nimport Library from \"./Library\";\r\nimport Radio from \"./Radio\";\r\nimport Search from \"./Search\";\r\nimport back from \"../../../assets/backbutton.png\";\r\nimport dropdown from \"../../../assets/dropdown.png\";\r\nimport SearchIcon from \"../../../assets/searchicon.svg\";\r\nimport Close from \"../../../assets/blackclose.png\";\r\nimport { \r\n    CustomUseState,\r\n    openerGlobal,\r\n    homeClass,\r\n    wait,\r\n    sendRequest,\r\n    albumGlobal,\r\n    topBarGlobal,\r\n    searchBarGlobal,\r\n    prefix\r\n} from \"../../../common\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Queue from \"./Queue\";\r\nlet actualIsOpen, topBar, timeout = undefined, searchBar, openLocal;\r\nlet scrollTimeout = null;\r\n// const { ipcRenderer } =  window.electron;\r\n\r\n\r\nexport const MidPanelLoader = () => {\r\n    return(\r\n        <div className=\"loader\">\r\n            <div className=\"loaderinner\">\r\n                <div className=\"one\"></div>\r\n                <div className=\"two\"></div>\r\n                <div className=\"three\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NewReleases = () => {\r\n    return(\r\n        <div className=\"third\"></div>\r\n    );\r\n};\r\n\r\nconst SearchBar = () => {\r\n    const [searchConfig, setSearchConfig] = CustomUseState(searchBarGlobal);\r\n    searchBar = searchConfig;\r\n\r\n    const call = async () => {\r\n        timeout = undefined;\r\n        let res;\r\n        if (searchBar.input !== \"\") {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                callLoading: true\r\n            });\r\n            res = await sendRequest({\r\n                method: \"GET\",\r\n                endpoint: `/search?name=${searchBar.input}`\r\n            });\r\n            console.log(\"res\",res);\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                result: res,\r\n                callLoading: false\r\n            });\r\n        } else {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                callLoading: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleInput = e => {\r\n        if (e.target.value) {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                input: e.target.value,\r\n                callLoading: true,\r\n                result: {}\r\n            }); \r\n        } else {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                input: e.target.value,\r\n                callLoading: true\r\n            });\r\n        }\r\n        // setInput(e.target.value);\r\n        if (timeout) clearTimeout(timeout);\r\n        timeout = setTimeout(call,500);\r\n    };\r\n\r\n    const clearInput = e => {\r\n        // setInput(\"\");\r\n        // setResult({ songs: {}, albums: {} });\r\n        setSearchConfig({\r\n            ...searchBar,\r\n            input: \"\",\r\n            result: { songs: {}, albums: {} }\r\n        });\r\n        timeout = undefined;\r\n    };\r\n\r\n    if (searchBar.show) {\r\n        return(\r\n            <div className=\"searchrelated\">\r\n                <div className=\"searchbar\">\r\n                    <div className=\"searchimg\">\r\n                        <img src={SearchIcon} alt=\"\" />\r\n                    </div>\r\n                    <input type=\"text\" value={searchBar.input} placeholder=\"Search for Songs or Albums\"\r\n                    className=\"searchinput\" spellCheck=\"false\" onInput={handleInput} autoFocus={true}/>\r\n                    {\r\n                        searchBar.input !== \"\" ?\r\n                        <div className=\"clearinput\">\r\n                            <img src={Close} alt=\"\" onClick={clearInput} />\r\n                        </div> : <div style={{ width: \"50px\", height: \"100%\" }}></div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return <></>;\r\n};\r\n\r\nconst ProfileBar = () => {\r\n    const userName = localStorage.getItem(\"username\");\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [redirectValue, setRedirectValue] = useState({ status: false, to: \"\" });\r\n    const [,setClass] = CustomUseState(homeClass);\r\n    const [,setSong] = CustomUseState(albumGlobal);\r\n    const [topBarConfig,] = CustomUseState(topBarGlobal);\r\n    actualIsOpen = openerDetails.open;\r\n    topBar = topBarConfig;\r\n    let { button, buttonFunc, title, bgColor } = topBar;\r\n\r\n    const min = () => {\r\n        // ipcRenderer.send(\"minimize\");\r\n        // ipcRenderer.send(\"full\");\r\n    };\r\n\r\n    // const max = () => {\r\n    //     ipcRenderer.send(\"maximize\");\r\n    // };\r\n\r\n    const close = () => {\r\n        // ipcRenderer.send(\"close\");\r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        const list = [\"rowinmenu\",\"rowtext\"];\r\n        if (list.indexOf(e.target.className) === -1 && actualIsOpen) {\r\n            setOpenerDetails({\r\n                open: false,\r\n                xValue: 0,\r\n                yValue: 0,\r\n                type: null\r\n            });\r\n        }\r\n        // setOpenerDetails({ ...openerDetails, open: false });\r\n    };\r\n\r\n    const modifyLocalStorage = async () => {\r\n        let text = localStorage.getItem(\"email\");\r\n        let password = localStorage.getItem(\"password\");\r\n        await wait(1000);\r\n        localStorage.clear();\r\n        localStorage.setItem(\"email\",text);\r\n        localStorage.setItem(\"password\",password);\r\n        await wait(1000);\r\n        sessionStorage.clear();\r\n    };\r\n\r\n    const logOut = async () => {\r\n        modifyLocalStorage();\r\n        sendRequest({\r\n            method: \"GET\",\r\n            endpoint: `/logout`\r\n        });\r\n        setClass(\"homemain end\");\r\n        setSong({});\r\n        await wait(500);\r\n        setRedirectValue({ status: true, to: \"/\" });\r\n        setOpenerDetails({ ...openerDetails, open: false });\r\n    };\r\n\r\n    const openNew = async () => {\r\n        // ipcRenderer.send(\"opennew\");\r\n    };\r\n\r\n    const handleMenu = (e) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            open: !actualIsOpen,\r\n            yValue: e.clientY + 10,\r\n            xValue: e.clientX - 200,\r\n            type: \"album\",\r\n            data: [\r\n                // {\r\n                //     name: \"Account\",\r\n                //     func: openNew\r\n                // },\r\n                {\r\n                    name: \"Log out\",\r\n                    func: logOut\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"mousedown\",handleClick);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\",handleClick);\r\n        }\r\n    },[]);\r\n\r\n\r\n    if (redirectValue.status) {\r\n        // return <Redirect to={redirectValue.to} />\r\n    }\r\n    return(\r\n        <div className=\"entiretop\"\r\n        style={ bgColor === \"transparent\" ? { backgroundColor: \"transparent\" } : { backgroundColor: \"#121212\" } }\r\n        >\r\n            <div className=\"topbar\" style={{backgroundColor: bgColor}}>\r\n                <SearchBar/>\r\n                { button ?\r\n                    <div className=\"backbutton\" onClick={buttonFunc}>\r\n                        <img src={back} alt=\"\"/>\r\n                    </div> : \"\"\r\n                }\r\n                {\r\n                    title ? \r\n                    <div className=\"toptitlediv\">{title}</div> : \"\"\r\n                }\r\n                <div className=\"profilebardiv\">\r\n                    <div className=\"name\">{userName}</div>\r\n                    <div className=\"logoutbutton\">\r\n                        <img src={dropdown} alt=\"\" onClick={handleMenu}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"topbuttons\">\r\n                    <div onClick={min} className=\"minimize\"></div>\r\n                    {/* <div onClick={max} className=\"maximize\"></div> */}\r\n                    <div onClick={close} className=\"close\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Mid = () => {\r\n    const [openerDetails,] = CustomUseState(openerGlobal);\r\n    openLocal = openerDetails.open;\r\n    const scrollRef = useRef(null);\r\n\r\n    const removeClass = () => {\r\n        scrollRef.current.classList.remove(\"scrolling\");\r\n    };\r\n\r\n    const handleScroll = e => {\r\n        if (scrollTimeout) {\r\n            clearTimeout(scrollTimeout);\r\n        }\r\n        scrollRef.current.classList.add(\"scrolling\");\r\n        scrollTimeout = setTimeout(removeClass, 1000);\r\n    };\r\n\r\n    useEffect(() => {\r\n        scrollRef.current = document.querySelector(\".main-outer-container\");\r\n        scrollRef.current && scrollRef.current.addEventListener(\"scroll\", handleScroll);\r\n\r\n        return () => {\r\n            scrollRef.current && scrollRef.current.removeEventListener(\"scroll\", handleScroll);\r\n        };\r\n    }, []);\r\n\r\n    return(\r\n        <div className=\"midmain-without-player\">\r\n            <Queue/>\r\n            <div className=\"main-outer-container\"\r\n            style={{ overflowY: `${ openLocal ? \"hidden\" : \"overlay\" }` }}\r\n            >\r\n                <Switch>\r\n                    <Route path={`${prefix}/home/homescreen`}><HomeScreen/></Route>\r\n                    <Route path={`${prefix}/home/search`}><Search/></Route>\r\n                    <Route path={`${prefix}/home/new-releases`}><NewReleases/></Route>\r\n                    <Route path={`${prefix}/home/album/:name`}><AlbumView/></Route>\r\n                    <Route path={`${prefix}/home/library`}><Library/></Route>\r\n                    <Route path={`${prefix}/home/radio`}><Radio/></Route>\r\n                </Switch>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Mid;","import Mid, { MidPanelLoader } from \"./midpanel\";\r\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\n// import logo from \"../../assets/bluelogo.svg\";\r\nimport logo from \"../../assets/latest-whiteblack.svg\";\r\n// import logo from \"../../assets/aquamarinelogo.svg\";\r\n// import logo from \"../../assets/blackandwhitelogo.svg\";\r\nimport home from \"../../assets/homewhite.svg\";\r\nimport search from \"../../assets/searchwhite.svg\";\r\nimport library from \"../../assets/librarywhite.svg\";\r\nimport homelight from \"../../assets/homelight.svg\";\r\nimport searchlight from \"../../assets/searchlight.svg\";\r\nimport librarylight from \"../../assets/librarylight.svg\";\r\nimport radio from \"../../assets/radio2.svg\";\r\n// import radio from \"../../assets/mainshuffle.svg\";\r\nimport radiolight from \"../../assets/radiolight2.svg\";\r\nimport dropdown from \"../../assets/dropdown.png\";\r\n// import radiolight from \"../../assets/mainshufflelight.svg\";\r\nimport tick from \"../../assets/tickmark.svg\";\r\nimport \"../../css/homestyles.css\";\r\nimport \"../../css/teststyles.css\";\r\nimport \"../../css/searchstyles.css\";\r\nimport {\r\n    CustomUseState,\r\n    playingGlobal,\r\n    tabGlobal,\r\n    routesGlobal,\r\n    queueOpenedGlobal,\r\n    topBarGlobal,\r\n    searchBarGlobal,\r\n    prefix,\r\n    profileOpener\r\n} from \"../../common\";\r\nlet topBar, tabLocal, queueOpenedLocal;\r\n\r\n\r\nconst Left = () => {\r\n    const topList = [\"Home\", \"Search\", \"Library\"];\r\n    const normalList = [\"Home\",\"Search\",\"New Releases\",\"Albums\",\"Artists\",\"Shuffle\"];\r\n    const playlists = [\"Most Played\",\"Favorites\",\"New Releases\",\"Liked\"];\r\n    // const playlists = [];\r\n    // const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [playing,] = useState(false);\r\n    const [tab, setTab] = CustomUseState(tabGlobal);\r\n    const [,setRoutes] = CustomUseState(routesGlobal);\r\n    const [searchConfig, setSearchConfig] = CustomUseState(searchBarGlobal);\r\n    let searchBar = searchConfig;\r\n    // const [keepButton, setKeepButton] = CustomUseState(keepButtonGlobal);\r\n    // const [,setOnClickFunc] = CustomUseState(onClickFuncGlobal);\r\n    // const [topTitle, setTopTitle] = CustomUseState(topTitleGlobal);\r\n    // const [topColor, setBgColor] = CustomUseState(topBgColor);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [queueOpened, setQueueOpened] = CustomUseState(queueOpenedGlobal);\r\n    topBar = topBarConfig;\r\n    tabLocal = tab;\r\n\r\n\r\n    (() => {\r\n        let loc;\r\n        if (window.location.hash !== \"\") {\r\n            loc = window.location.hash.split(\"/\")[2];\r\n        } else {\r\n            loc = window.location.pathname.split(\"/\")[2];\r\n        }\r\n        if (queueOpened) {\r\n            setTab(\"\");\r\n            return;\r\n        }\r\n        switch(loc) {\r\n            case \"homescreen\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Home\");\r\n                break;\r\n            case \"search\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Search\");\r\n                break;\r\n            case \"library\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Library\");\r\n                break;\r\n            case \"radio\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Radio\");\r\n                break;\r\n            case \"new-releases\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"New Releases\");\r\n                break;\r\n            default:\r\n                if (tabLocal === \"\") break;\r\n                setTab(\"\");\r\n                break;\r\n        }\r\n    })();\r\n\r\n    const goToHome = () => {\r\n        setTopBarConfig({\r\n            button: false,\r\n            buttonFunc: () => {},\r\n            title: \"\",\r\n            bgColor: \"transparent\"\r\n        });\r\n        // setKeepButton(false);\r\n        // setOnClickFunc(() => {});\r\n        // setTopTitle(\"\");\r\n        // setBgColor(\"transparent\");\r\n        setQueueOpened(false);\r\n        setTab(\"Home\");\r\n        setRoutes([\"/home/homescreen\"]);\r\n    };\r\n\r\n    const calc = (item) => {\r\n        if(item === \"Home\") return \"/home/homescreen\";\r\n        else if(item === \"Search\") return \"/home/search\";\r\n        else if(item === \"New Releases\") return \"/home/new-releases\";\r\n        else if(item === \"Library\") return \"/home/library\";\r\n        else if(item === \"Radio\") return \"/home/radio\";\r\n        return \"/home/homescreen\";\r\n    };\r\n\r\n    const setFuncs = (item) => {\r\n        if (item === tabLocal) {\r\n            return;\r\n        }\r\n        console.log(\"clicked\")\r\n        setTopBarConfig({\r\n            button: false,\r\n            buttonFunc: () => {},\r\n            title: \"\",\r\n            bgColor: \"transparent\"\r\n        });\r\n        if (item !== \"Search\" && searchBar.show) {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                show: false\r\n            });\r\n        } \r\n        setQueueOpened(false);\r\n        sessionStorage.setItem(\"home-scroll\",0);\r\n        sessionStorage.setItem(\"library-scroll\",0);\r\n    };\r\n\r\n    const setRouteFunc = (item) => {\r\n        if(item === \"Home\") setRoutes([\"/home/homescreen\"]);\r\n        else if(item === \"Search\") setRoutes([\"/home/search\"]);\r\n        else if(item === \"New Releases\") setRoutes([\"/home/new-releases\"]);\r\n        else if(item === \"Library\") setRoutes([\"/home/library\"]);\r\n        else if(item === \"Radio\") setRoutes([\"/home/radio\"]);\r\n        else if(item === \"Most Played\") setRoutes([\"/home/mostplayed\"]);\r\n        else setRoutes([\"/home/homescreen\"]);\r\n    };\r\n\r\n    const setIcon = (item) => {\r\n        if (item === \"Home\") return item === tab ? home : homelight;\r\n        else if (item === \"Search\") return item === tab ? search : searchlight;\r\n        else if (item === \"Library\") return item === tab ? library : librarylight;\r\n        else if (item === \"Radio\") return item === tab ? radio : radiolight;\r\n    };\r\n\r\n    const onMouseOver = (item, e) => {\r\n        if (item === \"Home\") {\r\n            e.currentTarget.children[0].src = home;\r\n        } else if (item === \"Search\") {\r\n            e.currentTarget.children[0].src = search;\r\n        } else if (item === \"Library\") {\r\n            e.currentTarget.children[0].src = library;\r\n        } else if (item === \"Radio\") {\r\n            e.currentTarget.children[0].src = radio;\r\n        } else {\r\n            e.currentTarget.children[0].src = \"\";\r\n        }\r\n    };\r\n    \r\n    const onMouseOut = (item, e) => {\r\n        if (item === \"Home\") {\r\n            e.currentTarget.children[0].src = item === tab ? home : homelight;\r\n        } else if (item === \"Search\") {\r\n            e.currentTarget.children[0].src = item === tab ? search : searchlight;\r\n        } else if (item === \"Library\") {\r\n            e.currentTarget.children[0].src = item === tab ? library : librarylight;\r\n        } else if (item === \"Radio\") {\r\n            e.currentTarget.children[0].src = item === tab ? radio : radiolight;\r\n        } else {\r\n            e.currentTarget.children[0].src = \"\";\r\n        }\r\n    };\r\n\r\n    const resetTop = () => {\r\n        // if (keepButton === true) {\r\n        //     setKeepButton(false);\r\n        // }\r\n        // if (topColor !== \"transparent\") {\r\n        //     setBgColor(\"transparent\");\r\n        // }\r\n        // if (topTitle !== \"\") {\r\n        //     setTopTitle(\"\");\r\n        // }\r\n    };\r\n\r\n    return(\r\n        <div className={ playing ? \"leftmain-with-player\" : \"leftmain-without-player\" }\r\n        // onClick={resetTop}\r\n        >\r\n            <Link to=\"/home/homescreen\" style={{ textDecoration: \"none\" }}>\r\n                <div className=\"logodiv\">\r\n                    <img src={logo} alt=\"logo\" onClick={goToHome}/>\r\n                    <p onClick={goToHome}>Studio</p>\r\n                </div>\r\n            </Link>\r\n            <div className=\"headlist\">\r\n                {\r\n                    topList.map(item => {\r\n                        return(\r\n                            <Link to={calc(item)} style={{ textDecoration: \"none\" }} onClick={() => setFuncs(item)}>\r\n                                <div onClick={() => {\r\n                                    setRouteFunc(item);\r\n                                    setTab(item);\r\n                                    }} className={ item === tab ? \"eachactive\" : \"each\" }\r\n                                    onMouseOver={(e) => onMouseOver(item, e)}\r\n                                    onMouseOut={(e) => onMouseOut(item,e)}\r\n                                    >\r\n                                    <img src={setIcon(item)} alt=\"\"/>\r\n                                    <p>{item}</p>\r\n                                </div>\r\n                            </Link>\r\n                        )\r\n                    })\r\n                }\r\n            </div>\r\n            <div className=\"divider\"></div>\r\n            {\r\n                playlists.length !== 0 ? <div className=\"playlisttitle\">PLAYLISTS</div> : \"\"\r\n            }\r\n            {\r\n                playlists.map(item => {\r\n                    return(\r\n                        <Link to={calc(item)} style={{ textDecoration: \"none\" }}>\r\n                            <div onClick={() => {\r\n                                    console.log(\"item\",item)\r\n                                    setRouteFunc(item);\r\n                                    setTab(item);\r\n                                }}\r\n                                className={ item === tab ? \"playlist active1\" : \"playlist\" }>\r\n                                <p>{item}</p>\r\n                            </div>\r\n                        </Link>\r\n                    )\r\n                })\r\n            }\r\n            {/* <div className=\"playlisttitlebutton\">+ CREATE PLAYLIST</div> */}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst TopSearchBar = () => {\r\n    return(\r\n        <div className=\"top-search-bar-container\">\r\n            <div className=\"search-bar\">\r\n                <div className=\"back-container\"></div>\r\n                <div className=\"input-container\"></div>\r\n                <div className=\"close-container\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TopNav = () => {\r\n    const userName = localStorage.getItem(\"username\");\r\n    const picture = localStorage.getItem(\"picture\");\r\n    const topList = [\"Home\", \"Library\", \"Search\"];\r\n    const [tab, setTab] = CustomUseState(tabGlobal);\r\n    const [queueOpened, setQueueOpened] = CustomUseState(queueOpenedGlobal);\r\n    const [searchConfig, setSearchConfig] = CustomUseState(searchBarGlobal);\r\n    const [,setProfileOpen] = CustomUseState(profileOpener);\r\n    const currentLocation = useLocation();\r\n    const hist = useHistory();\r\n    tabLocal = tab;\r\n    queueOpenedLocal = queueOpened;\r\n\r\n    const initial = () => {\r\n        const loc = currentLocation.pathname.split(\"/\")[2];\r\n        if (queueOpened) {\r\n            setTab(\"\");\r\n            return;\r\n        }\r\n        switch(loc) {\r\n            case \"homescreen\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Home\");\r\n                break;\r\n            case \"search\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Search\");\r\n                break;\r\n            case \"library\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Library\");\r\n                break;\r\n            case \"radio\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"Radio\");\r\n                break;\r\n            case \"new-releases\":\r\n                if (tabLocal === loc) break;\r\n                setTab(\"New Releases\");\r\n                break;\r\n            default:\r\n                if (tabLocal === \"\") break;\r\n                setTab(\"\");\r\n                break;\r\n        }\r\n    };\r\n\r\n    // useEffect(() => {\r\n        initial();\r\n    // },[tab]);\r\n\r\n    const goToHome = () => {\r\n        if (queueOpenedLocal) {\r\n            setQueueOpened(false);\r\n        }\r\n        if (tabLocal !== \"Home\") {\r\n            setTab(\"Home\");\r\n            hist.push(prefix+\"/home/homescreen\");\r\n        }\r\n    };\r\n\r\n    const setFuncs = (item, currentTab) => {\r\n        if (item === tabLocal) {\r\n            return;\r\n        }\r\n        if (item === \"Search\") {\r\n            setSearchConfig({\r\n                ...searchConfig,\r\n                open: true,\r\n                prevTab: currentTab\r\n            });\r\n        }\r\n        if (queueOpenedLocal) {\r\n            setQueueOpened(false);\r\n        }\r\n    };\r\n\r\n    const getCorrespondingRoute = item => {\r\n        if(item === \"Home\") return `${prefix}/home/homescreen`;\r\n        else if(item === \"Search\") return `${prefix}/home/search`;\r\n        else if(item === \"New Releases\") return `${prefix}/home/new-releases`;\r\n        else if(item === \"Library\") return `${prefix}/home/library`;\r\n        else if(item === \"Radio\") return `${prefix}/home/radio`;\r\n        else if(item === \"Most Played\") return `${prefix}/home/mostplayed`;\r\n        else return `${prefix}/home/homescreen`;\r\n    };\r\n\r\n    const setRouteFunc = item => {\r\n        const route = getCorrespondingRoute(item);\r\n        hist.push(route);\r\n    };\r\n\r\n    const openProfile = e => {\r\n        setProfileOpen(true);\r\n    };\r\n\r\n\r\n    return(\r\n        <div className=\"dummyleft\">\r\n            <div className=\"logopart\" onClick={goToHome}>\r\n                <div className=\"logopartdiv\" title=\"StudioMusic\" >\r\n                    <img src={logo} alt=\"logo\" />\r\n                    <p>Studio</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"middlepart\">\r\n                {\r\n                    searchConfig.open ?\r\n                    <TopSearchBar/> :\r\n                    <div className=\"centermiddlepart\">\r\n                        {\r\n                            topList.map(each => {\r\n                                return(\r\n                                    <div className={ tabLocal === each ? \"tabs\" : \"lighttabs\" }\r\n                                    onClick={() => {\r\n                                        setFuncs(each, tabLocal);\r\n                                        setRouteFunc(each);\r\n                                        setTab(each);\r\n                                    }}>\r\n                                        {each}\r\n                                    </div>\r\n                                ); \r\n                            })\r\n                        }\r\n                    </div>\r\n                }\r\n            </div>\r\n            <div className=\"profilepart\">\r\n                {/* <div className=\"profilebardiv\">\r\n                    <div className=\"name\">{userName}</div>\r\n                    <div className=\"logoutbutton\">\r\n                        <img src={dropdown} alt=\"\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"topbuttons\">\r\n                    <div className=\"minimize\"></div>\r\n                    <div className=\"close\"></div>\r\n                </div> */}\r\n                {\r\n                    picture ?\r\n                    <div className=\"picture-container\" onClick={openProfile}>\r\n                        <img className=\"center-picture-img\" src={picture} alt=\"\" title={userName} />\r\n                    </div> :\r\n                    <div className=\"picture-container\" onClick={openProfile} style={{ backgroundColor: \"violet\", color: \"black\", fontSize: \"1em\" }}>\r\n                        {userName[0].toUpperCase()}\r\n                    </div>\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n\r\nconst MainPanel = () => {\r\n    const [isPlaying,] = CustomUseState(playingGlobal);\r\n\r\n    return(\r\n        // <div className={ isPlaying ? \"mainpanel-with-player\" : \"mainpanel-without-player\" }>\r\n        <div className=\"mainpanel-without-player\">\r\n            <TopNav/>\r\n            <Mid/>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MainPanel;","import \"../css/homestyles.css\";\r\nimport \"../css/playerstyles.css\";\r\nimport \"../css/albumview.css\";\r\nimport MainPanel from \"./mainpanel\";\r\nimport { useState, useEffect } from \"react\";\r\n// import Play from \"../assets/playwhite.png\";\r\nimport Play from \"../assets/playbutton-white.svg\";\r\n// import Pause from \"../assets/pausewhite.png\";\r\nimport Pause from \"../assets/pausebutton-white.svg\";\r\nimport Close from \"../assets/deletewhite.svg\";\r\nimport Placeholder from \"../assets/placeholder.svg\";\r\n// import repeat from \"../assets/repeat.png\";\r\nimport repeat from \"../assets/repeat-white.svg\";\r\n// import repeatOne from \"../assets/repeatone.png\";\r\nimport repeatOne from \"../assets/repeat-one-white.svg\";\r\n// import noRepeat from \"../assets/norepeat.png\";\r\nimport noRepeat from \"../assets/norepeat-disabled.svg\";\r\nimport shuffleoff from \"../assets/shuffle-disabled.svg\";\r\nimport shuffleon from \"../assets/shuffle-enabled.svg\";\r\n// import next from \"../assets/nexttrack.png\";\r\nimport next from \"../assets/nextbutton-white.svg\";\r\n// import previous from \"../assets/previoustrack.png\";\r\nimport previous from \"../assets/previousbutton-white.svg\";\r\nimport queuewhite from \"../assets/queuewhite.png\";\r\nimport queueaquamarine from \"../assets/queueaquamarine.png\";\r\nimport fullscreenaquamarine from \"../assets/fullscreenaquamarine.svg\";\r\nimport fullscreenwhite from \"../assets/fullscreenwhite.svg\";\r\nimport innerfullaquamarine from \"../assets/innerfullaquamarine.svg\";\r\nimport innerfullwhite from \"../assets/innerfullwhite.svg\";\r\nimport upArrow from \"../assets/uparrow.svg\";\r\nimport downArrow from \"../assets/downarrow.svg\";\r\nimport Expand from \"../assets/expand-white.svg\";\r\nimport volumesvg from \"../assets/volume.svg\";\r\nimport {\r\n    CustomUseState,\r\n    playingGlobal,\r\n    albumGlobal,\r\n    convertTime,\r\n    wait,\r\n    queueGlobal,\r\n    queueOpenedGlobal,\r\n    songIsPausedGlobal,\r\n    repeatTypeGlobal,\r\n    radioGlobal,\r\n    openerGlobal,\r\n    homeClass,\r\n    responseBar,\r\n    topBarGlobal,\r\n    sendRequest,\r\n    Timer,\r\n    fullScreenGlobal,\r\n    miniPlayerGlobal,\r\n    usePrevious,\r\n    profileOpener\r\n} from \"../common\";\r\nexport const audio = new Audio();\r\nlet mainVolume = 1;\r\nlet loaded = false;\r\nlet whichRepeat;\r\nlet ctrlKey = false;\r\nlet currentSongIndex = 0, isSongPlaying, actualQueue;\r\nlet volumerange, elapsedTime, duration, range, percent = 0, style, bufferPercent = 0;\r\nexport let pauseOrPlay;\r\nlet setVolume = 1, isBuffering, topBar, songPausedLocal, timeout = null;\r\nlet trackingTimer, screenLocal;\r\n// const { ipcRenderer } = window.electron;\r\n\r\n\r\nconst changeColor = (percent,bufferPercent) => {\r\n    // return `linear-gradient(to right, red ${percent}%, #505050 0%)`;\r\n    // return `linear-gradient(to right, #066bff ${percent}%, #505050 0%)`;\r\n    return `linear-gradient(to right, #066bff ${percent}%, #303030 0%)`;\r\n    // return `linear-gradient(to right, #066bff ${percent}%, #505050 ${percent}%, #505050 ${bufferPercent}%, #303030 0%)`;\r\n};\r\n\r\nconst changeColorVolume = (value) => {\r\n    return `linear-gradient(to right, white ${value}%, rgba(255,255,255,0.1) 0%)`;\r\n};\r\n\r\nconst fetchStream = async url => {\r\n    return fetch(url,{\r\n        method: \"GET\"\r\n    })\r\n    .then(res => {\r\n        const reader = res.body.getReader();\r\n        return reader.read().then(result => {\r\n            return result;\r\n        });\r\n    });\r\n};\r\n\r\nconst trial = async () => {\r\n    // const res = await fetch(\"https://scriptwaale.herokuapp.com/listen/Bekhayali\");\r\n    // const reader = res.body.getReader();\r\n    // while (true) {\r\n    //     const { value, done } = await reader.read();\r\n    //     console.log(\"value\",value);\r\n    //     const blob = new Blob(value);\r\n    //     audio.src = URL.createObjectURL(blob);\r\n    //     audio.play();\r\n    //     if (done) break;\r\n    // }\r\n    // console.log(\"Response done\");\r\n    async function fetchAudio() {\r\n        \r\n      }\r\n    fetchAudio()\r\n      .then((response) => {\r\n        var blob = new Blob([response.value], { type: 'audio/mp3' });\r\n        var url = window.URL.createObjectURL(blob)\r\n        const music = new Audio();\r\n        music.src = url;\r\n        console.log(\"playing\");\r\n        music.play();\r\n      })\r\n      \r\n};\r\n\r\nconst Player = () => {\r\n    const [hovered, setHovered] = useState(false);\r\n    const [song, setSong] = CustomUseState(albumGlobal);\r\n    const [playerOn,setPlaying] = CustomUseState(playingGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [buffering, setBuffering] = useState(false);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [buttonshow, setButtonshow] = useState(false);\r\n    const [repeatType, setRepeatType] = CustomUseState(repeatTypeGlobal);\r\n    const [shuffle, setShuffle] = useState(false);\r\n    const [queueOpened, setQueueOpened] = CustomUseState(queueOpenedGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [screen, setScreen] = CustomUseState(fullScreenGlobal);\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const prevSong = usePrevious(song);\r\n    screenLocal = screen;\r\n    topBar = topBarConfig;\r\n    // const [, setTab] = CustomUseState(tabGlobal);\r\n    const [isRadioOn, setRadioOn] = CustomUseState(radioGlobal);\r\n    const [update, setUpdate] = useState(true);\r\n    actualQueue = queue;\r\n    currentSongIndex = queue.indexOf(song);\r\n    isSongPlaying = isPlaying;\r\n    isBuffering = buffering;\r\n    songPausedLocal = songPaused;\r\n    let playerOnLocal = playerOn;\r\n\r\n\r\n    const changeRepeat = e => {\r\n        e.stopPropagation();\r\n        localStorage.setItem(\"repeatType\",repeatType+1 > 2 ? 0 : repeatType+1);\r\n        whichRepeat = repeatType+1 > 2 ? 0 : repeatType+1;\r\n        setRepeatType(repeatType+1 > 2 ? 0 : repeatType+1);\r\n    };\r\n    pauseOrPlay = async (e = \"\") => {\r\n        if (e !== \"\") {\r\n            e.stopPropagation();\r\n        }\r\n        if (song.url === \"\") {\r\n            const index = actualQueue.indexOf(song);\r\n            song.url = song.backup;\r\n            delete song.backup;\r\n            setSong(song);\r\n            actualQueue[index] = song;\r\n            setQueue(actualQueue);\r\n            setUpdate(!update);\r\n            return;\r\n        }\r\n        if (isSongPlaying) {\r\n            // setSongPaused(true);\r\n            // setIsPlaying(false);\r\n            // mainVolume = audio.volume;\r\n            // const reduce = setInterval(() => {\r\n            //     audio.volume = audio.volume - 0.2 >= 0 ? audio.volume - 0.2 : audio.volume;\r\n            // },50);\r\n            // await wait(800);\r\n            // clearInterval(reduce);\r\n            audio.pause();\r\n        } else {\r\n            // setSongPaused(false);\r\n            // setIsPlaying(true);\r\n            audio.play();\r\n            // const increase = setInterval(() => {\r\n            //     audio.volume = audio.volume + 0.2 <= mainVolume ? audio.volume + 0.2 : mainVolume;\r\n            // },50);\r\n            // await wait(800);\r\n            // clearInterval(increase);\r\n        }\r\n    };\r\n    const openQueue = (e = \"\") => {\r\n        if (e !== \"\") {\r\n            e.stopPropagation();\r\n        }\r\n        documentClick(e);\r\n        setQueueOpened(!queueOpened);\r\n    };\r\n    const goToNext = (e = \"\") => {\r\n        if (e !== \"\") {\r\n            e.stopPropagation();\r\n        }\r\n        localStorage.removeItem(\"time\");\r\n        localStorage.removeItem(\"duration\");\r\n        if (actualQueue.length === 1) {\r\n            audio.currentTime = 0;\r\n        } else {\r\n            const nextIndex = currentSongIndex < actualQueue.length - 1 ? currentSongIndex + 1 : 0;\r\n            setSong(actualQueue[nextIndex]);\r\n            currentSongIndex = nextIndex;\r\n        }\r\n        setSongPaused(true);\r\n    };\r\n    const goToPrevious = (e = \"\") => {\r\n        if (e !== \"\") {\r\n            e.stopPropagation();\r\n        }\r\n        localStorage.removeItem(\"time\");\r\n        localStorage.removeItem(\"duration\");\r\n        setSongPaused(true);\r\n        if (actualQueue.length === 1 || audio.currentTime > 10) {\r\n            audio.currentTime = 0;\r\n            trackingTimer = null;\r\n            trackingTimer = new Timer(30, addToRecentlyPlayed);\r\n            if (!trackingTimer.hasStarted()) trackingTimer.start();\r\n        } else {\r\n            const index = actualQueue.indexOf(song);\r\n            setSong(index === 0 ? actualQueue[actualQueue.length-1] : actualQueue[index-1]);\r\n        }\r\n    };\r\n    const shutdown = () => {\r\n        setPlaying(false);\r\n        audio.src = \"\";\r\n        setSong({});\r\n        localStorage.removeItem(\"queue\");\r\n        setQueue([]);\r\n        setRadioOn(false);\r\n        if (queueOpened) setQueueOpened(!queueOpened);\r\n    };\r\n    const randomize = (arr) => {\r\n        let i, len = arr.length, rand;\r\n        for (i=len-1; i>0; i--) {\r\n            rand = Math.floor(Math.random() * len);\r\n            [arr[i], arr[rand]] = [arr[rand], arr[i]];\r\n        }\r\n        arr.splice(0,0,song);\r\n        return arr;\r\n    };\r\n    const shuffleHandler = e => {\r\n        e.stopPropagation();\r\n        if (!shuffle && actualQueue.length > 3) {\r\n            const dummyQueue = actualQueue;\r\n            const index = dummyQueue.indexOf(song);\r\n            [dummyQueue[0], dummyQueue[index]] = [dummyQueue[index], dummyQueue[0]];\r\n            const shuffled = randomize(dummyQueue.slice(1,actualQueue.length));\r\n            console.log(\"shuffled\",shuffled);\r\n            localStorage.setItem(\"queue\",JSON.stringify(shuffled));\r\n            setQueue(shuffled);\r\n            // setShuffle(!shuffle);\r\n            setShuffle(true);\r\n            setTimeout(() => {\r\n                setShuffle(false);\r\n            },500);\r\n        }\r\n        // if (shuffle) {\r\n        //     setShuffle(!shuffle);\r\n        // }\r\n    };\r\n    const goToNextForMediaSession = () => {\r\n        localStorage.removeItem(\"time\");\r\n        localStorage.removeItem(\"duration\");\r\n        if (actualQueue.length === 1) {\r\n            audio.currentTime = 0;\r\n        } else {\r\n            const nextIndex = currentSongIndex < actualQueue.length - 1 ? currentSongIndex + 1 : 0;\r\n            setSong(actualQueue[nextIndex]);\r\n            currentSongIndex = nextIndex;\r\n        }\r\n        setSongPaused(true);\r\n    };\r\n    const goToPreviousForMediaSession = () => {\r\n        localStorage.removeItem(\"time\");\r\n        localStorage.removeItem(\"duration\");\r\n        setSongPaused(true);\r\n        if (actualQueue.length === 1 || audio.currentTime > 10) {\r\n            audio.currentTime = 0;\r\n            trackingTimer = null;\r\n            trackingTimer = new Timer(30, addToRecentlyPlayed);\r\n            if (!trackingTimer.hasStarted()) trackingTimer.start();\r\n        } else {\r\n            const index = actualQueue.indexOf(song);\r\n            setSong(index === 0 ? actualQueue[actualQueue.length-1] : actualQueue[index-1]);\r\n        }\r\n    };\r\n\r\n\r\n    const volumeinput = e => {\r\n        e.stopPropagation();\r\n        volumerange.style.background = changeColorVolume(volumerange.value);\r\n        audio.volume = volumerange.value/100;\r\n        mainVolume = volumerange.value/100;\r\n        setVolume = volumerange.value/100;\r\n    };\r\n    const volumechange = e => {\r\n        e.stopPropagation();\r\n        volumerange.style.background = changeColorVolume(volumerange.value);\r\n        audio.volume = volumerange.value/100;\r\n        mainVolume = volumerange.value/100;\r\n        setVolume = volumerange.value/100;\r\n    };\r\n\r\n\r\n    const progressinput = (e) => {\r\n        range.focus();\r\n        elapsedTime.innerText = convertTime(range.value);\r\n        percent = range.value/range.max * 100;\r\n        range.style.background = changeColor(percent,bufferPercent);\r\n    };\r\n    const progresschange = (e) => {\r\n        audio.currentTime = range.value;\r\n        audio.volume = mainVolume;\r\n        range.blur();\r\n        percent = range.value/range.max * 100;\r\n        range.style.background = changeColor(percent,bufferPercent);\r\n    };\r\n\r\n\r\n    const metadata = (e) => {\r\n        loaded = true;\r\n        localStorage.setItem(\"duration\",audio.duration);\r\n        range.max = audio.duration;\r\n        duration.innerText = convertTime(audio.duration);\r\n        audio.play();\r\n        setBuffering(false);\r\n        setSongPaused(false);\r\n        // audio.currentTime = 0;\r\n        // const time = localStorage.getItem(\"time\");\r\n        // console.log(\"time\",time);\r\n        // if (time === null) {\r\n        //     audio.currentTime = 0;\r\n        // } else {\r\n        //     audio.currentTime = time;\r\n        //     console.log(\"setting time\");\r\n        // }\r\n        if (!trackingTimer.hasStarted()) trackingTimer.start();\r\n    };\r\n    const waiting = (e) => {\r\n        setBuffering(true);\r\n        setSongPaused(true);\r\n        if (trackingTimer.canPause()) {\r\n            trackingTimer.pause();\r\n        }\r\n    };\r\n    const timeupdate = (e) => {\r\n        localStorage.setItem(\"time\", audio.currentTime);\r\n        elapsedTime.innerText = convertTime(audio.currentTime);\r\n        if ((range === document.activeElement)) {\r\n        } else {\r\n            range.value = audio.currentTime;\r\n            percent = range.value/range.max * 100;\r\n            let value;\r\n            try {\r\n                value = (audio.buffered && audio.buffered.end(audio.buffered.length - 1));\r\n            } catch(e) {\r\n                value = 0;\r\n            }\r\n            bufferPercent = (value/range.max) * 100;\r\n            range.style.background = changeColor(percent,bufferPercent);\r\n        }\r\n    };\r\n    const canplay = (e) => {\r\n        console.log(\"can play\");\r\n        setBuffering(false);\r\n        // audio.play();\r\n        setSongPaused(false);\r\n        if (trackingTimer.canContinue()) {\r\n            trackingTimer.continue();\r\n        }\r\n    };\r\n    const onplay = (e) => {\r\n        setIsPlaying(true);\r\n        setSongPaused(false);\r\n    };\r\n    const ended = (e) => {\r\n        range.value = 0;\r\n        elapsedTime.innerText = \"0: 00\";\r\n        if (!trackingTimer.hasFinished()) {\r\n            trackingTimer.stop();\r\n        }\r\n        if (whichRepeat === 2) {\r\n            audio.play();\r\n            trackingTimer = null;\r\n            trackingTimer = new Timer(30, addToRecentlyPlayed);\r\n            if (!trackingTimer.hasStarted()) trackingTimer.start();\r\n        } else if (whichRepeat === 0) {\r\n            setIsPlaying(false);\r\n            setSongPaused(true);\r\n            range.style.background = changeColor(0);\r\n        } else {\r\n            if (queue.length === 1) {\r\n                audio.play();\r\n            } else {\r\n                goToNext();\r\n            }\r\n        }\r\n    };\r\n    const onpaused = async (e) => {\r\n        setSongPaused(true);\r\n        setIsPlaying(false);\r\n        if (trackingTimer.canPause()) {\r\n            trackingTimer.pause();\r\n        }\r\n        document.title = \"Studio\";\r\n        // ipcRenderer.send(\"paused\");\r\n        // await wait(1000);\r\n        // audio.volume = 0;\r\n    };\r\n    const onplaying = async (e) => {\r\n        setSongPaused(false);\r\n        setIsPlaying(true);\r\n        if (trackingTimer.canContinue()) {\r\n            trackingTimer.continue();\r\n        }\r\n        document.title = `${song.Title || song.Album} - Studio`;\r\n        // ipcRenderer.send(\"playing\");\r\n        // await wait(1000);\r\n        // audio.volume = mainVolume;\r\n        // pauseOrPlay();\r\n    };\r\n\r\n\r\n    const onkeydown = (e) => {\r\n        if (e.keyCode === 17) {\r\n            ctrlKey = true;\r\n        }\r\n        if (e.keyCode === 32 && ctrlKey && !isBuffering) {\r\n            e.preventDefault();\r\n            pauseOrPlay();\r\n        }\r\n        if (e.keyCode === 78 && ctrlKey) {\r\n            e.preventDefault();\r\n            goToNext();\r\n        }\r\n        if (e.keyCode === 80 && ctrlKey) {\r\n            e.preventDefault();\r\n            goToPrevious();\r\n        }\r\n        if (e.keyCode === 39 && ctrlKey) {\r\n            const duration = audio.duration;\r\n            const time = audio.currentTime;\r\n            if (time + 10 < duration) {\r\n                audio.currentTime = time + 10;\r\n            }\r\n        }\r\n        if (e.keyCode === 37 && ctrlKey) {\r\n            const time = audio.currentTime;\r\n            if (time - 10 > 0) {\r\n                audio.currentTime = time - 10;\r\n            }\r\n        }\r\n    };\r\n    const onkeyup = (e) => {\r\n        if (e.keyCode === 17) {\r\n            ctrlKey = false;\r\n        }\r\n    };\r\n\r\n    const lessen = () => {\r\n        const split = song.Color.split(\",\");\r\n        split[3] = \"0.3)\";\r\n        return split.join(\",\");\r\n    };\r\n\r\n    const addToRecentlyPlayed = () => {\r\n        sendRequest({\r\n            method: \"POST\",\r\n            endpoint: \"/addToRecentlyPlayed\",\r\n            data: {\r\n                album: song.Album\r\n            }\r\n        });\r\n    };\r\n\r\n    const screenSetting = () => {\r\n        if (playerOnLocal) {\r\n            setScreen({\r\n                ...screenLocal,\r\n                show: !screenLocal.show\r\n            });\r\n            // ipcRenderer.send(\"full\");\r\n        }\r\n    };\r\n\r\n    const documentClick = e => {\r\n        console.log(\"click\",openerDetails.open);\r\n        if (openerDetails.open) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        let shouldRemove = false;\r\n        (() => {\r\n            if (Object.keys(prevSong).length < 1) {\r\n                return;\r\n            }\r\n            if (prevSong.Type !== song.Type) {\r\n                shouldRemove = true;\r\n                return;\r\n            }\r\n            const titleExistsInCurrent = song.Title !== undefined;\r\n            const titleExistsInPrev = prevSong.Title !== undefined;\r\n            if (titleExistsInCurrent && titleExistsInPrev) {\r\n                if (prevSong.Title !== song.Title) {\r\n                    shouldRemove = true;\r\n                    return;\r\n                }\r\n            } else if (!titleExistsInCurrent && titleExistsInPrev) {\r\n                shouldRemove = true;\r\n                return;\r\n            } else if (titleExistsInCurrent && !titleExistsInPrev) {\r\n                shouldRemove = true;\r\n                return;\r\n            } else if (!titleExistsInCurrent && !titleExistsInPrev) {\r\n                if (prevSong.Album !== song.Album) {\r\n                    shouldRemove = true;\r\n                    return;\r\n                }\r\n            }\r\n        })();\r\n        console.log(\"sholdremove\",shouldRemove);\r\n        if (shouldRemove) {\r\n            localStorage.removeItem(\"time\");\r\n            localStorage.removeItem(\"duration\");\r\n        }\r\n        trackingTimer = new Timer(30,addToRecentlyPlayed);\r\n        if (\"mediaSession\" in navigator) {\r\n            navigator.mediaSession.metadata = new window.MediaMetadata({\r\n                title: song.Title || song.Album,\r\n                artist: song.Artist,\r\n                album: song.Album,\r\n                artwork: [\r\n                    { src: song.Thumbnail }\r\n                ]\r\n            });\r\n        }\r\n        console.log(\"network\",navigator?.connection?.downlink);\r\n        console.log(\"type\",navigator?.connection?.type);\r\n        console.log(\"connection\",navigator?.connection);\r\n        return () => {\r\n            if (trackingTimer !== null) {\r\n                trackingTimer.stop();\r\n                trackingTimer = null;\r\n            }\r\n        };\r\n    },[song]);\r\n\r\n    useEffect(() => {\r\n        const setUp = async () => {\r\n            audio.volume = setVolume;\r\n            elapsedTime = document.querySelector(\".elapsedtime\");\r\n            duration = document.querySelector(\".progressduration\");\r\n            range = document.querySelector(\".range\");\r\n            volumerange = document.querySelector(\".volumerange\");\r\n            const rType = parseInt(localStorage.getItem(\"repeatType\"));\r\n            whichRepeat = 0;\r\n            if (rType) {\r\n                setRepeatType(rType);\r\n                whichRepeat = rType;\r\n            }\r\n\r\n            // if (prevSong.Album !== song.Album) {\r\n            //     localStorage.removeItem(\"time\");\r\n            //     localStorage.removeItem(\"duration\");\r\n            // }\r\n\r\n            document.addEventListener(\"keydown\",onkeydown);\r\n            document.addEventListener(\"keyup\",onkeyup);\r\n            // document.addEventListener(\"click\",documentClick);\r\n\r\n            volumerange.value = audio.volume * 100;\r\n            volumerange.style.background = changeColorVolume(volumerange.value);\r\n            volumerange.addEventListener(\"input\",volumeinput);\r\n            volumerange.addEventListener(\"change\",volumechange);\r\n            range && range.addEventListener(\"input\",progressinput);\r\n            range && range.addEventListener(\"change\",progresschange);\r\n\r\n            // setIsPlaying(true);\r\n            // percent = 0;\r\n            duration.innerText = \"0: 00\";\r\n            loaded = false;\r\n            if (Object.keys(song).length !== 0) {\r\n                audio.preload = \"auto\";\r\n                audio.src = song.url;\r\n                // fetchStream(song.url).then(response => {\r\n                //     const blob = new Blob([response.value], { type: 'audio/mp3' });\r\n                //     const url = window.URL.createObjectURL(blob);\r\n                //     audio.src = url;\r\n                //     audio.play();\r\n                // })\r\n                // .catch((error) => {\r\n                //     console.log(\"error\",error.message);\r\n                // });\r\n            } else {\r\n                shutdown();\r\n            }\r\n\r\n            let oldDuration = undefined, oldTime = undefined;\r\n            if (song.url !== \"\") {\r\n                setIsPlaying(true);\r\n                setBuffering(true);\r\n                audio.addEventListener(\"loadedmetadata\",metadata);\r\n                audio.addEventListener(\"waiting\",waiting);\r\n                audio.addEventListener(\"timeupdate\",timeupdate);\r\n                audio.addEventListener(\"canplay\",canplay);\r\n                audio.addEventListener(\"play\",onplay);\r\n                audio.addEventListener(\"ended\",ended);\r\n                audio.addEventListener(\"pause\",onpaused);\r\n                audio.addEventListener(\"playing\",onplaying);\r\n\r\n                localStorage.setItem(\"nowplaying\",JSON.stringify(song));\r\n                // oldDuration = localStorage.getItem(\"duration\");\r\n                // oldTime = localStorage.getItem(\"time\");\r\n                oldDuration = null;\r\n                oldTime = null;\r\n                if (oldDuration !== null && oldTime !== null) {\r\n                    audio.currentTime = oldTime;\r\n                    range.max = oldDuration;\r\n                    range.value = oldTime;\r\n                    percent = range.value/range.max * 100;\r\n                    range.style.background = changeColor(percent);\r\n                    duration.innerText = convertTime(oldDuration);\r\n                    elapsedTime.innerText = convertTime(oldTime);\r\n                }\r\n            } else {\r\n                setSongPaused(true);\r\n                oldDuration = localStorage.getItem(\"duration\");\r\n                oldTime = localStorage.getItem(\"time\");\r\n                range.max = oldDuration;\r\n                range.value = oldTime;\r\n                percent = range.value/range.max * 100;\r\n                range.style.background = changeColor(percent);\r\n                duration.innerText = convertTime(oldDuration);\r\n                elapsedTime.innerText = convertTime(oldTime);\r\n            }\r\n        };\r\n\r\n        setUp();\r\n\r\n        return () => {\r\n            if (song.url === \"\") {\r\n                const index = actualQueue.indexOf(song);\r\n                song.url = song.backup;\r\n                delete song.backup;\r\n                actualQueue[index] = song;\r\n                setQueue(actualQueue);\r\n            }\r\n            document.removeEventListener(\"keydown\",onkeydown);\r\n            document.removeEventListener(\"keyup\",onkeyup);\r\n            // document.removeEventListener(\"click\",documentClick);\r\n\r\n            volumerange.removeEventListener(\"input\",volumeinput);\r\n            volumerange.removeEventListener(\"change\",volumechange);\r\n            range && range.removeEventListener(\"input\",progressinput);\r\n            range && range.removeEventListener(\"change\",progresschange);\r\n\r\n            audio.removeEventListener(\"loadedmetadata\",metadata);\r\n            audio.removeEventListener(\"waiting\",waiting);\r\n            audio.removeEventListener(\"timeupdate\",timeupdate);\r\n            audio.removeEventListener(\"canplay\",canplay);\r\n            // audio.removeEventListener(\"play\",onplay);\r\n            audio.removeEventListener(\"ended\",ended);\r\n            audio.removeEventListener(\"pause\",onpaused);\r\n            audio.removeEventListener(\"playing\",onplaying);\r\n        };\r\n\r\n    },[song, update]);\r\n\r\n    return(\r\n        <div className=\"dummycover\">\r\n            <input type=\"range\" min=\"0\" defaultValue=\"0\" className=\"range\" disabled={buffering || song.url === \"\"} />\r\n            <div className=\"outerplayer\">\r\n                <div className=\"player\">\r\n                    <div className=\"innerplayer\" onClick={openQueue}\r\n                    onMouseOver={() => setHovered(true)}\r\n                    onMouseOut={() => setHovered(false)}>\r\n                        <div className=\"albumpart\">\r\n                            <div className=\"back\">\r\n                                <img src={previous} onClick={goToPrevious} alt=\"\" title=\"Previous Song / Rewind\" />\r\n                            </div>\r\n                            <div className=\"middle\">\r\n                                { Object.keys(song).length !== 0 ?\r\n                                    <>\r\n                                    {\r\n                                        buffering ? <div className=\"bufferloader\"></div> : \r\n                                        <img className=\"mainplayimg\" onClick={pauseOrPlay} src={ isSongPlaying ? Pause : Play } alt=\"\"\r\n                                        title={ isSongPlaying ? \"Pause\" : \"Play\" } />\r\n                                    }\r\n                                    </> :\r\n                                    <img className=\"mainplayimg\" src={Play} title=\"Play\" alt=\"\" />\r\n                                }\r\n                            </div>\r\n                            <div className=\"forward\">\r\n                                <img src={next} onClick={goToNext} alt=\"\" title=\"Next Song\" />\r\n                            </div>\r\n                            <div className=\"elapsedtime\">0: 00</div>\r\n                            <div className=\"durationdivider\">/</div>\r\n                            <div className=\"progressduration\">0: 00</div>\r\n                        </div>\r\n                        <div className=\"playerpart\">\r\n                            <div className=\"innerplayerpart\">\r\n                                { Object.keys(song).length !== 0 ?\r\n                                    <>\r\n                                    <div className=\"albumthumbnail\" style={{\r\n                                        backgroundImage: `url(${Placeholder})`,\r\n                                        backgroundSize: \"cover\"\r\n                                    }}>\r\n                                        <img src={song.Thumbnail} alt=\"\" />\r\n                                    </div>\r\n                                    <div className=\"songdetails\">\r\n                                        <p className=\"songtitle\">{song.Title || song.Album}</p>\r\n                                        <div className=\"songartistscontainer\">\r\n                                            {\r\n                                                song.Album.length > 30 ?\r\n                                                <>\r\n                                                <p className=\"songartists\">{`${song.Artist.slice(0,30)}...`}</p>\r\n                                                <div className=\"separator\"></div>\r\n                                                <p className=\"songartists\">{`${song.Album.slice(0,30)}...`}</p>\r\n                                                </>\r\n                                                :\r\n                                                song.Artist.length > 30 ?\r\n                                                <>\r\n                                                <p className=\"songartists\">{`${song.Artist.slice(0,30)}...`}</p>\r\n                                                <div className=\"separator\"></div>\r\n                                                <p className=\"songartists\">{`${song.Album}`}</p>\r\n                                                </>\r\n                                                :\r\n                                                <>\r\n                                                <p className=\"songartists\">{`${song.Artist}`}</p>\r\n                                                <div className=\"separator\"></div>\r\n                                                <p className=\"songartists\">{`${song.Album}`}</p>\r\n                                                </>\r\n                                            }\r\n                                            <div className=\"separator\"></div>\r\n                                            <p className=\"songartists\">{song.Duration}</p>\r\n                                            <div className=\"separator\"></div>\r\n                                            <p className=\"songartists\">{song.Year}</p>\r\n                                        </div>\r\n                                    </div></> : \"\"\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"volumepart\">\r\n                            <div className=\"volumerocker\"\r\n                            style={{ opacity: `${ hovered ? \"1\" : \"0\" }` }}>\r\n                                <div className=\"volumeinput\">\r\n                                    <input type=\"range\" min=\"0\" max=\"100\" defaultValue=\"100\" className=\"volumerange\"\r\n                                    onClick={e => e.stopPropagation()}/>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"shuffle\">\r\n                                { !isRadioOn ? <img src={shuffle ? shuffleon : shuffleoff} alt=\"\" title=\"Shuffle\" onClick={shuffleHandler} /> : \"\" }\r\n                            </div>\r\n                            <div className=\"repeat\">\r\n                                <img src={\r\n                                    repeatType === 0 ? noRepeat :\r\n                                    repeatType === 1 ? repeat : repeatOne\r\n                                } alt=\"\" onClick={changeRepeat} title=\"Repeat\" />\r\n                            </div>\r\n                            {\r\n                                screenLocal.show ? \"\" :\r\n                                <div className=\"queueopener\" onClick={openQueue}>\r\n                                    <img src={queueOpened ? downArrow : upArrow} alt=\"\" title=\"Player\" />\r\n                                </div>\r\n                            }\r\n                            {/* { Object.keys(song).length !== 0 ?\r\n                                <div className=\"destroyplayer\" onClick={shutdown}>\r\n                                    <img src={Close} alt=\"\" />\r\n                                </div> : \"\"\r\n                            } */}\r\n                            {/* <div className=\"fullscreenbutton\"\r\n                            onClick={screenSetting}\r\n                            onMouseOver={() => setButtonshow(true)}\r\n                            onMouseOut={() => setButtonshow(false)}\r\n                            >\r\n                                <img src={ screenLocal.show ? (buttonshow ? innerfullaquamarine : innerfullwhite) : \r\n                                    (buttonshow ? fullscreenaquamarine : fullscreenwhite) } alt=\"\" />\r\n                            </div> */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nexport const Opener = () => {\r\n    const [openerDetails,] = CustomUseState(openerGlobal);\r\n    const { open, xValue, yValue, data = [] } = openerDetails;\r\n    style = {\r\n        top: `${yValue}px`,\r\n        left: `${xValue}px`\r\n    };\r\n\r\n    if (!open) {\r\n        return \"\";\r\n    }\r\n    return(\r\n        <div className=\"opener\" style={style}>\r\n            { data.length !== 0 ?\r\n                data.map(menu => {\r\n                    return(\r\n                        <div className=\"rowinmenu\" onClick={menu.func}>\r\n                            <div className=\"rowtext\">{menu.name}</div>\r\n                        </div>\r\n                    );\r\n                })\r\n                : \"\"\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst FullScreen = () => {\r\n    const [song,] = CustomUseState(albumGlobal);\r\n\r\n    const lessen = value => {\r\n        let color = song.Color.split(\",\");\r\n        color[3] = `${value}`;\r\n        color = color.join(\",\");\r\n        return color;\r\n    };\r\n    \r\n    return(\r\n        <div className=\"fulldisplay\">\r\n            <div className=\"innerfulldisplay\"\r\n            // style={{ background: `linear-gradient(to bottom,${song.Color || \"\"},${song.Color || \"\"},black` }}\r\n            // style={{ background: `linear-gradient(to bottom,black,${lessen(0.5)},${lessen(0.5)},black` }}\r\n            // style={{ background: `${lessen(0.3)}` }}\r\n            style={{ background: `#7fffd430` }}\r\n            // style={{ background: `#252525` }}\r\n            // style={{ background: `radial-gradient(${lessen(1)},${lessen(1)},black)` }}\r\n            >\r\n                <div className=\"imageholder\"\r\n                // style={{ backgroundImage: `url(${song.Thumbnail})`, backgroundSize: \"cover\" }}\r\n                >\r\n                    {/* <div className=\"innerimageholder\">\r\n                    </div> */}\r\n                    <img src={song.Thumbnail} alt=\"\"/>\r\n                </div>\r\n                <div className=\"bottombar\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MiniPlayer = () => {\r\n    const [mini, setMini] = CustomUseState(miniPlayerGlobal);\r\n    const [song,] = CustomUseState(albumGlobal);\r\n\r\n    if (!mini) {\r\n        return \"\";\r\n    }\r\n    return (\r\n        <div className=\"miniplayer\">\r\n            <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\r\n                <div className=\"minishadow\">\r\n                    <div className=\"close-view\" onClick={() => setMini(false)}>\r\n                        <img src={Close} alt=\"\" />\r\n                    </div>\r\n                </div>\r\n                <img src={song.Thumbnail || \"\"} alt=\"\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ResponseBar = () => {\r\n    const [obj, setObj] = CustomUseState(responseBar);\r\n    const [playing,] = CustomUseState(playingGlobal);\r\n\r\n    if (obj.open && playing) {\r\n        if (timeout) {\r\n            clearTimeout(timeout);\r\n        } \r\n        timeout = setTimeout(() => {\r\n            setObj({ ...obj, open: false });\r\n        }, 1500);\r\n    }\r\n\r\n    return(\r\n        <div className={ obj.open && playing ? \"responsebar up\" : obj.open !== \"\" ? \"responsebar down\" : \"responsebar start\" }>\r\n            <div className=\"message\">{obj.msg}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ProfileOpener = ({ setProfileOpen }) => {\r\n    const picture = localStorage.getItem(\"picture\");\r\n    const userName = localStorage.getItem(\"username\").split(\" \");\r\n    const email = localStorage.getItem(\"email\");\r\n    const list = [\"profile-opener\",\"rowinmenu\",\"rowtext\",\"picture-container\"];\r\n\r\n    const openAccount = () => {\r\n        window.open(\"/account\", \"_blank\");\r\n    };\r\n\r\n    const signOut = async () => {\r\n        const res = await sendRequest({\r\n            method: \"GET\",\r\n            endpoint: \"/sign-out\"\r\n        });\r\n        if (res.success) {\r\n            localStorage.clear();\r\n            window.location.href = \"/\";\r\n            return null;\r\n        } else {\r\n            window.location.href = \"/login\";\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const click = e => {\r\n        if (!list.includes(e.target.className)) {\r\n            setProfileOpen(false);\r\n        }\r\n    };\r\n\r\n    const data = [\r\n        { name: \"Account\", func: openAccount },\r\n        { name: \"History\", func: ()=>{} },\r\n        { name: \"Sign Out\", func: signOut }\r\n    ];\r\n\r\n    const handle = async (menu) => {\r\n        await menu.func();\r\n        setProfileOpen(false);\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"click\", click);\r\n        return () => {\r\n            document.removeEventListener(\"click\", click);\r\n        };\r\n    }, []);\r\n\r\n    return(\r\n        <div className=\"profile-opener\">\r\n            <div className=\"account-section\">\r\n                <div className=\"account-picture\">\r\n                    {\r\n                        picture ?\r\n                        <div className=\"center-picture\">\r\n                            <img src={picture} alt=\"\" />\r\n                        </div> :\r\n                        <div className=\"center-picture\" style={{ backgroundColor: \"violet\", color: \"black\", fontSize: \"2em\" }}>\r\n                            {userName[0][0]?.toUpperCase()}{userName[1] && userName[1][0]?.toUpperCase()}\r\n                        </div>\r\n                    }\r\n                </div>\r\n                <div className=\"account-name\">{userName}</div>\r\n                <div className=\"account-email\">{email}</div>\r\n            </div>\r\n            { data.length !== 0 ?\r\n                data.map(menu => {\r\n                    return(\r\n                        <div className=\"rowinmenu\" onClick={() => handle(menu)}>\r\n                            <div className=\"rowtext\">{menu.name}</div>\r\n                        </div>\r\n                    );\r\n                })\r\n                : \"\"\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Home = () => {\r\n    const [playing,] = CustomUseState(playingGlobal);\r\n    const [profileOpen, setProfileOpen] = CustomUseState(profileOpener);\r\n    // const [name,] = CustomUseState(homeClass);\r\n    const [screen,] = CustomUseState(fullScreenGlobal);\r\n\r\n    return(\r\n        <div className=\"homemain\">\r\n            <Opener/>\r\n            { profileOpen ? <ProfileOpener setProfileOpen={setProfileOpen} /> : null }\r\n            <MiniPlayer/>\r\n            <ResponseBar/>\r\n            <MainPanel/>\r\n            { screen.show ? <FullScreen/> : \"\" }\r\n            { playing ? <Player/> : \"\" }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;","import React, { useEffect, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Opening from \"./opening\";\r\nimport Home from \"./homepage\";\r\nimport {\r\n    keepServersActive,\r\n    fullScreenGlobal,\r\n    playingGlobal,\r\n    CustomUseState,\r\n    queueOpenedGlobal,\r\n    prefix,\r\n    httpCheck\r\n} from \"./common\";\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\nlet queueOpenedLocal, intervalTimeout = null;\r\n\r\n\r\nconst App = () => {\r\n    httpCheck();\r\n    const [screen, setScreen] = CustomUseState(fullScreenGlobal);\r\n    const [queueOpened, setQueueOpened] = CustomUseState(queueOpenedGlobal);\r\n    const [playing,] = CustomUseState(playingGlobal);\r\n    let screenLocal = screen;\r\n    let playingLocal = playing;\r\n    queueOpenedLocal = queueOpened;\r\n\r\n    if (intervalTimeout !== null) {\r\n        setInterval(() => {\r\n            keepServersActive();\r\n            intervalTimeout = null;\r\n        }, 5*60*1000);\r\n    }\r\n\r\n    const screenSet = () => {\r\n        setScreen({\r\n            ...screenLocal,\r\n            show: !screenLocal.show\r\n        });\r\n    };\r\n\r\n    const keyDown = e => {\r\n        if (e.keyCode === 122 || e.keyCode === 27) {\r\n            e.preventDefault();\r\n        }\r\n        if (e.keyCode === 70) {\r\n            e.preventDefault();\r\n            if (playingLocal) {\r\n                screenSet();\r\n            }\r\n        }\r\n    };\r\n\r\n    const check = e => {\r\n        if (queueOpenedLocal) {\r\n            setQueueOpened(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\",keyDown);\r\n        window.addEventListener(\"popstate\",check);\r\n        return () => {\r\n            document.removeEventListener(\"keydown\",keyDown);\r\n            window.removeEventListener(\"popstate\",check);\r\n        }\r\n    },[]);\r\n\r\n    return(\r\n        <Router>\r\n            <Route exact path={ prefix === \"\" ? \"/\" : prefix } component={Opening} />\r\n            <Route path={`${prefix}/home`} component={Home} />\r\n        </Router>\r\n    )\r\n};\r\n\r\nReactDOM.render(<App/>, document.getElementById(\"root\"));","import { useState, useEffect, useRef } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n// import \"../css/openingstyles.css\";\r\nimport \"../css/opening2styles.css\";\r\n// import \"../css/loginstyles.css\";\r\n// import \"../css/signupstyles.css\";\r\n// import logo2 from \"../assets/colouredlogo.svg\";\r\n// import logo2 from \"../assets/aquamarinelogo.svg\";\r\n// import logo2 from \"../assets/bluelogo.svg\";\r\nimport logo2 from \"../assets/latest-whiteblack.svg\";\r\nimport logo from \"../assets/blackandwhitelogo.svg\";\r\nimport {\r\n    wait,\r\n    CustomUseState,\r\n    homeClass,\r\n    tabGlobal,\r\n    playingGlobal,\r\n    albumGlobal,\r\n    queueGlobal,\r\n    sendRequest,\r\n    keepServersActive,\r\n    // keepButtonGlobal\r\n    topBarGlobal,\r\n    prefix\r\n} from \"../common\";\r\nlet topBar, setup;\r\n\r\n\r\nconst Error = ({ msg }) => {\r\n    return(\r\n        <div className=\"errordiv\">\r\n            <p>Error: {msg}</p>\r\n        </div>\r\n    );\r\n};\r\n\r\n// const Login = ({ shiftPage, setRedirectValue, setMainClass }) => {\r\n//     const [compClass, setCompClass] = useState(\"loginmain-fadein\");\r\n//     const [type, setType] = useState(\"password\");\r\n//     const [checkClass, setCheckClass] = useState(\"checkbox-start\");\r\n//     const [smallBallClass, setSmallBallClass] = useState(\"smallball-password\");\r\n//     const [loginErr, setLoginErr] = useState(false);\r\n//     const [isLoading, setIsLoading] = useState(\"Log In\");\r\n//     const [errMsg, setErrMsg] = useState(\"\");\r\n//     const emailRef = useRef();\r\n//     const passwordRef = useRef();\r\n\r\n//     const change = () => {\r\n//         if(type === \"text\") {\r\n//             setType(\"password\");\r\n//             setSmallBallClass(\"smallball-password\");\r\n//         } else {\r\n//             setType(\"text\");\r\n//             setSmallBallClass(\"smallball-text\");\r\n//         }\r\n//     };\r\n\r\n//     const checkbox = () => {\r\n//         if(checkClass === \"checkbox-start\") setCheckClass(\"checkbox-end\");\r\n//         else setCheckClass(\"checkbox-start\");\r\n//     };\r\n\r\n//     const submit = async () => {\r\n//         if(emailRef.current.value == \"\") {\r\n//             setErrMsg(\"Can't leave email empty\");\r\n//             setLoginErr(true);\r\n//         } else if (passwordRef.current.value == \"\") {\r\n//             setErrMsg(\"Can't leave password empty\");\r\n//             setLoginErr(true);\r\n//         } else {\r\n//             setIsLoading(\"Loading\");\r\n//             const res = await axios({\r\n//                 method: \"POST\",\r\n//                 url: `${baseLink}/login`,\r\n//                 data: {\r\n//                     em: emailRef.current.value,\r\n//                     pass: passwordRef.current.value\r\n//                 }\r\n//             });\r\n//             setIsLoading(\"Log In\");\r\n//             if (res.data.status === \"allowed\") {\r\n//                 if (checkClass === \"checkbox-end\") {\r\n//                     localStorage.setItem(\"email\",emailRef.current.value)\r\n//                     localStorage.setItem(\"password\",passwordRef.current.value)\r\n//                 }\r\n//                 setMainClass(\"main-end\");\r\n//                 setTimeout(() => {\r\n//                     setRedirectValue(true);\r\n//                 },1000);\r\n//             } else {\r\n//                 setErrMsg(\"Invalid credentials\");\r\n//                 setLoginErr(true);\r\n//             }\r\n//         }\r\n//     };\r\n\r\n//     const changePage = () => {\r\n//         setCompClass(\"loginmain-fadeout\");\r\n//         setTimeout(() => {\r\n//             shiftPage(false);\r\n//         },500);\r\n//     };\r\n\r\n//     const remError = () => {\r\n//         if(loginErr) {\r\n//             setTimeout(() => {\r\n//                 setLoginErr(false);\r\n//             },3000);\r\n//         }\r\n//     };\r\n//     remError();\r\n\r\n//     useEffect(() => {\r\n//         const email = localStorage.getItem(\"email\");\r\n//         const password = localStorage.getItem(\"password\");\r\n//         if (email != null && password != null) {\r\n//             emailRef.current.value = email;\r\n//             passwordRef.current.value = password;\r\n//             setCheckClass(\"checkbox-end\");\r\n//         }\r\n//     },[]);\r\n\r\n//     return(\r\n//         <div className={compClass}>\r\n//             <div className=\"logintitle\">\r\n//                 <p>Log in to continue.</p>\r\n//             </div>\r\n//             { loginErr ? <Error msg={errMsg}/> : <div className=\"empty\"></div> \r\n//             }\r\n//             <div className=\"email\">\r\n//                 <input type=\"email\" placeholder=\"Email\" spellCheck=\"false\" ref={emailRef} />\r\n//             </div>\r\n//             <div className=\"password\">\r\n//                 <div className=\"join\">\r\n//                     <input type={type} placeholder=\"Password\" spellCheck=\"false\" ref={passwordRef} />\r\n//                     <div className=\"viewdiv\" onClick={change}>\r\n//                         <div className={smallBallClass}></div>\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//             <div className=\"remember\">\r\n//                 <p>Remember Me?</p>\r\n//                 <div className={checkClass} onClick={checkbox}>\r\n//                     <div className=\"ball\"></div>\r\n//                 </div>\r\n//             </div>\r\n//             <div className=\"login\">\r\n//                 <button onClick={submit}>{isLoading}</button>\r\n//             </div>\r\n//             <div className=\"gotosignup\">\r\n//                 <p>Not on Studio?</p>\r\n//                 <p onClick={changePage}>Sign Up</p>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// const SignUp = ({ shiftPage }) => {\r\n//     const [compClass, setCompClass] = useState(\"signupmain-fadein\");\r\n//     const [loginErr, setLoginErr] = useState(false);\r\n//     const [type, setType] = useState(\"password\");\r\n//     const [smallBallClass, setSmallBallClass] = useState(\"smallball-password\");\r\n//     const [errMsg, setErrMsg] = useState(\"\");\r\n//     const emailRef = useRef();\r\n//     const passwordRef = useRef();\r\n//     const nameRef = useRef();\r\n//     const [isLoading, setIsLoading] = useState(\"Continue\");\r\n\r\n//     const change = () => {\r\n//         if(type === \"text\") {\r\n//             setType(\"password\");\r\n//             setSmallBallClass(\"smallball-password\");\r\n//         } else {\r\n//             setType(\"text\");\r\n//             setSmallBallClass(\"smallball-text\");\r\n//         }\r\n//     };\r\n\r\n//     const submit = async () => {\r\n//         if(emailRef.current.value === \"\") {\r\n//             setErrMsg(\"Can't leave email empty\");\r\n//             setLoginErr(true);\r\n//         } else if (passwordRef.current.value === \"\") {\r\n//             setErrMsg(\"Can't leave password empty\");\r\n//             setLoginErr(true);\r\n//         } else if (nameRef.current.value === \"\") {\r\n//             setErrMsg(\"Can't leave username empty\");\r\n//             setLoginErr(true);\r\n//         } else {\r\n//             setIsLoading(\"Loading\");\r\n//             const res = await axios({\r\n//                 method: \"POST\",\r\n//                 url: `${baseLink}/signup`,\r\n//                 data: {\r\n//                     em: emailRef.current.value,\r\n//                     pass: passwordRef.current.value,\r\n//                     name: nameRef.current.value\r\n//                 }\r\n//             });\r\n//             setIsLoading(\"Continue\");\r\n//             if (res.data.status === \"registered\") {\r\n//                 changePage();\r\n//             } else {\r\n//                 setErrMsg(\"Email already exists\");\r\n//                 setLoginErr(true);\r\n//             }\r\n//         }\r\n//     };\r\n\r\n//     const changePage = () => {\r\n//         setCompClass(\"signupmain-fadeout\");\r\n//         setTimeout(() => {\r\n//             shiftPage(true);\r\n//         },500);\r\n//     };\r\n\r\n//     const remError = () => {\r\n//         if(loginErr) {\r\n//             setTimeout(() => {\r\n//                 setLoginErr(false);\r\n//             },3000);\r\n//         }\r\n//     };\r\n//     remError();\r\n\r\n//     return(\r\n//         <div className={compClass}>\r\n//             <div className=\"title\">\r\n//                 <p>Sign up for free.</p>\r\n//             </div>\r\n//             { loginErr ? <Error msg={errMsg}/> : <div className=\"empty\"></div> \r\n//             }\r\n//             <div className=\"email\">\r\n//                 <input type=\"email\" placeholder=\"Email\" spellCheck=\"false\" ref={emailRef} />\r\n//             </div>\r\n//             <div className=\"password\">\r\n//                 <div className=\"join\">\r\n//                     <input type={type} placeholder=\"Password\" spellCheck=\"false\" ref={passwordRef} />\r\n//                     <div className=\"viewdiv\" onClick={change}>\r\n//                         <div className={smallBallClass}></div>\r\n//                     </div>\r\n//                 </div>\r\n//             </div>\r\n//             <div className=\"username\">\r\n//                 <input type=\"text\" placeholder=\"What do we call you?\" spellCheck=\"false\" ref={nameRef} />\r\n//             </div>\r\n//             <div className=\"signup\">\r\n//                 <button onClick={submit}>{isLoading}</button>\r\n//             </div>\r\n//             <div className=\"gotologin\">\r\n//                 <p>Already on Studio?</p>\r\n//                 <p onClick={changePage}>Log In</p>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// const Opening = () => {\r\n//     const [logoClass, setLogoClass] = useState(\"logo-start\");\r\n//     const [barClass, setBarClass] = useState(\"bar-initial\");\r\n//     const [mainClass, setMainClass] = useState(\"main-start\");\r\n//     const [redirectValue, setRedirectValue] = useState(false);\r\n//     const [logInScreen, setLogInScreen] = useState(true);\r\n\r\n//     const firstCheck = async () => {\r\n//         await setTimeout(async () => {\r\n//             // let res = { data: { status: \"\" } };\r\n//             let res;\r\n//             res = await axios({\r\n//                 method: \"GET\",\r\n//                 url: `${baseLink}/activateCheck`\r\n//             });\r\n//             // res.data.status = \"active\";\r\n//             if (res.data.status === \"active\") {\r\n//                 const token = localStorage.getItem(\"access\");\r\n//                 if (token === \"allowed\") {\r\n//                     setMainClass(\"main-end\");\r\n//                     setTimeout(() => {\r\n//                         setRedirectValue(true);\r\n//                     },1000);\r\n//                 } else {\r\n//                     setLogoClass(\"logo-mid\");\r\n//                     setBarClass(\"bar-start\");\r\n//                 }\r\n//             }\r\n//         },2000);\r\n//     };\r\n\r\n//     useEffect(() => {\r\n//         firstCheck();\r\n//     },[]);\r\n\r\n//     if(redirectValue) {\r\n//         return ( <Redirect to=\"/home/homescreen\" /> );\r\n//     }\r\n//     return(\r\n//         <div className={mainClass}>\r\n//             <div className={logoClass}>\r\n//                 <div className=\"left\">\r\n//                     <img className=\"logoimg\" src={logo} alt=\"logo\"/>\r\n//                 </div>\r\n//                 <div className=\"right\">\r\n//                     <p>Studio</p>\r\n//                 </div>\r\n//             </div>\r\n//             <div className={barClass}>\r\n//                 <div className=\"logincontainer\">\r\n//                     { logInScreen ? \r\n//                         <Login \r\n//                             shiftPage={setLogInScreen}\r\n//                             setRedirectValue={setRedirectValue}\r\n//                             setMainClass={setMainClass}\r\n//                         /> : \r\n//                         <SignUp \r\n//                             shiftPage={setLogInScreen}\r\n//                         /> }\r\n//                 </div>\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\nconst Login2 = ({ setGoToLogin, setGoToSignUp, setMainClass, setRedirectValue }) => {\r\n    const [loginClass, setLoginClass] = useState(\"loginscreen-in\");\r\n    const [smallBallClass, setSmallBallClass] = useState(\"ball-password\");\r\n    const [type, setType] = useState(\"password\");\r\n    const [isError, setIsError] = useState(false);\r\n    const [button, setButton] = useState(\"Log In\");\r\n    const [loginButton, setLoginButton] = useState(\"loginbutton\");\r\n    const [link, setLink] = useState(\"gotosignup\");\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [checkClass, setCheckClass] = useState(\"checkbox-start\");\r\n    const [,setClass] = CustomUseState(homeClass);\r\n    const [tab, setTab] = CustomUseState(tabGlobal);\r\n    // const [,setKeepButton] = CustomUseState(keepButtonGlobal);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    topBar = topBarConfig;\r\n    const emailRef = useRef();\r\n    const passwordRef = useRef();\r\n\r\n    const fillIn = () => {\r\n        const text = localStorage.getItem(\"email\");\r\n        const pwd = localStorage.getItem(\"password\");\r\n        if (text !== null && pwd !== null) {\r\n            emailRef.current.value = text;\r\n            passwordRef.current.value = pwd;\r\n            setCheckClass(\"checkbox-end\");\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fillIn();\r\n    },[]);\r\n\r\n    const change = async () => {\r\n        setLoginClass(\"loginscreen-out\");\r\n        await wait(100);\r\n        setGoToLogin(false);\r\n        setGoToSignUp(true);\r\n    };\r\n\r\n    const goToMain = async () => {\r\n        // await setup();\r\n        setClass(\"homemain start\");\r\n        setMainClass(\"mainwindow-end\");\r\n        if (tab !== \"Home\") setTab(\"Home\");\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            button: false,\r\n            buttonFunc: () => {},\r\n            title: \"\",\r\n            bgColor: \"transparent\"\r\n        });\r\n        // setKeepButton(false);\r\n        await wait(500);\r\n        setRedirectValue(true);\r\n    };\r\n\r\n    const shift = () => {\r\n        if (type === \"password\") {\r\n            setType(\"text\");\r\n            setSmallBallClass(\"ball-text\");\r\n        } else {\r\n            setType(\"password\");\r\n            setSmallBallClass(\"ball-password\");\r\n        }\r\n    };\r\n\r\n    const checkbox = () => {\r\n        setCheckClass( checkClass === \"checkbox-start\" ?\r\n            \"checkbox-end\" : \"checkbox-start\" );\r\n    };\r\n\r\n    const submit = async () => {\r\n        if (emailRef.current.value === \"\") {\r\n            setIsError(true);\r\n            setMsg(\"Cannot leave email empty!\")\r\n            return;\r\n        }\r\n        if (passwordRef.current.value === \"\") {\r\n            setIsError(true);\r\n            setMsg(\"Cannot leave password empty!\");\r\n            return;\r\n        }\r\n        setButton(\"Logging you in....\");\r\n        setLoginButton(\"loginbutton-loading\");\r\n        setLink(\"gotosignup-loading\");\r\n        let res = await sendRequest({\r\n            method: \"POST\",\r\n            endpoint: \"/login\",\r\n            data: {\r\n                text: emailRef.current.value,\r\n                password: passwordRef.current.value\r\n            }\r\n        });\r\n        if (res.status === \"loggedin\") {\r\n            localStorage.setItem(\"token\",res.status);\r\n            localStorage.setItem(\"username\",res.username);\r\n            localStorage.setItem(\"userId\",res.userId);\r\n            if (checkClass === \"checkbox-end\") {\r\n                localStorage.setItem(\"email\",emailRef.current.value);\r\n                localStorage.setItem(\"password\",passwordRef.current.value);\r\n            }\r\n            goToMain();\r\n        } else {\r\n            setIsError(true);\r\n            setMsg(res.error);\r\n            setButton(\"Log In\");\r\n            setLoginButton(\"loginbutton\");\r\n            setLink(\"gotosignup\");\r\n        }\r\n    };\r\n\r\n    const remError = () => {\r\n        if (isError) {\r\n            setTimeout(() => {\r\n                setIsError(false);\r\n            },3000);\r\n        }\r\n    };\r\n    remError();\r\n\r\n    return(\r\n        <div className={loginClass}>\r\n            <div className=\"logocontainer\">\r\n                <div className=\"leftlogo\">\r\n                    <img src={logo} alt=\"Studio\" />\r\n                </div>\r\n                <div className=\"rightlogo\">\r\n                    <p>Studio</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"title\">\r\n                <p>Log in to continue.</p>\r\n            </div>\r\n            <div className=\"inputfields\">\r\n                {\r\n                    isError ? <Error msg={msg}/> : <div className=\"errordivreplacement\">\r\n                    </div>\r\n                }\r\n                <div className=\"email\">\r\n                    <input type=\"text\" name=\"email\" placeholder=\"Email / Username\" spellCheck=\"false\" ref={emailRef}/>\r\n                </div>\r\n                <div className=\"password\">\r\n                    <input type={type} name=\"password\" placeholder=\"Password\" ref={passwordRef}/>\r\n                    <div className=\"viewer\">\r\n                        <div className={smallBallClass} onClick={shift}></div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"remember\">\r\n                    <p>Remember Me?</p>\r\n                    <div className={checkClass} onClick={checkbox}>\r\n                        <div className=\"ball\"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={loginButton}>\r\n                <button onClick={submit}>{button}</button>\r\n            </div>\r\n            <div className={link}>\r\n                <p>Not on Studio?</p><p onClick={change}>Sign Up</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SignUp2 = ({ setGoToLogin, setGoToSignUp }) => {\r\n    const [signUpClass, setSignUpClass] = useState(\"signupscreen-in\");\r\n    const [isError, setIsError] = useState(false);\r\n    const [button, setButton] = useState(\"Sign Up\");\r\n    const [signUpButton, setSignUpButton] = useState(\"signupbutton\");\r\n    const [link, setLink] = useState(\"gotologin\");\r\n    const [msg, setMsg] = useState(\"\");\r\n    const [type, setType] = useState(\"password\");\r\n    const [smallBallClass, setSmallBallClass] = useState(\"ball-password\");\r\n    const emailRef = useRef();\r\n    const passwordRef = useRef();\r\n    const usernameRef = useRef();\r\n\r\n    const change = async () => {\r\n        setSignUpClass(\"signupscreen-out\");\r\n        await wait(100);\r\n        setGoToSignUp(false);\r\n        setGoToLogin(true);\r\n    };\r\n\r\n    const shift = () => {\r\n        if (type === \"password\") {\r\n            setType(\"text\");\r\n            setSmallBallClass(\"ball-text\");\r\n        } else {\r\n            setType(\"password\");\r\n            setSmallBallClass(\"ball-password\");\r\n        }\r\n    };\r\n\r\n    const submit = async () => {\r\n        if (usernameRef.current.value === \"\") {\r\n            setIsError(true);\r\n            setMsg(\"Cannot leave username empty!\")\r\n            return;\r\n        }\r\n        if (emailRef.current.value === \"\") {\r\n            setIsError(true);\r\n            setMsg(\"Cannot leave email empty!\")\r\n            return;\r\n        }\r\n        const pattern = /[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$/;\r\n        if (!pattern.test(emailRef.current.value)) {\r\n            setIsError(true);\r\n            setMsg(\"Invalid email!\");\r\n            return;\r\n        }\r\n        if (passwordRef.current.value === \"\") {\r\n            setIsError(true);\r\n            setMsg(\"Cannot leave password empty!\");\r\n            return;\r\n        }\r\n        setButton(\"Signing you up....\");\r\n        setSignUpButton(\"signupbutton-loading\");\r\n        setLink(\"gotologin-loading\");\r\n        let res = await sendRequest({\r\n            method: \"POST\",\r\n            endpoint: `/signup`,\r\n            data: {\r\n                username: usernameRef.current.value,\r\n                email: emailRef.current.value,\r\n                password: passwordRef.current.value\r\n            }\r\n        });\r\n        if (res.status === \"registered\") {\r\n            change();\r\n        } else {\r\n            setIsError(true);\r\n            setMsg(res.error);\r\n            setButton(\"Sign Up\");\r\n            setSignUpButton(\"signupbutton\");\r\n            setLink(\"gotologin\");\r\n        }\r\n    };\r\n\r\n    const remError = () => {\r\n        if (isError) {\r\n            setTimeout(() => {\r\n                setIsError(false);\r\n            },3000);\r\n        }\r\n    };\r\n    remError();\r\n\r\n    return(\r\n        <div className={signUpClass}>\r\n            <div className=\"logocontainer\">\r\n                <div className=\"leftlogo\">\r\n                    <img src={logo} alt=\"Studio\" />\r\n                </div>\r\n                <div className=\"rightlogo\">\r\n                    <p>Studio</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"title\">\r\n                <p>Sign up for free.</p>\r\n            </div>\r\n            <div className=\"inputfields\">\r\n                {\r\n                    isError ? <Error msg={msg}/> : <div className=\"errordivreplacement\">\r\n                    </div>\r\n                }\r\n                <div className=\"username\">\r\n                    <input type=\"text\" name=\"username\" placeholder=\"Username\" spellCheck=\"false\" ref={usernameRef} />\r\n                </div>\r\n                <div className=\"email\">\r\n                    <input type=\"email\" name=\"email\" placeholder=\"Email\" spellCheck=\"false\" ref={emailRef}/>\r\n                </div>\r\n                <div className=\"password\">\r\n                    <input type={type} name=\"password\" placeholder=\"Password\" ref={passwordRef}/>\r\n                    <div className=\"viewer\">\r\n                        <div className={smallBallClass} onClick={shift}></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className={signUpButton}>\r\n                <button onClick={submit}>{button}</button>\r\n            </div>\r\n            <div className={link}>\r\n                <p>Already on Studio?</p><p onClick={change}>Log In</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Opening2 = () => {\r\n    const [redirectValue, setRedirectValue] = useState(false);\r\n    // const [mainClass, setMainClass] = useState(\"mainwindow-start\");\r\n    const [loaderClass, setLoaderClass] = useState(\"openingloader hidden\");\r\n    // const [goToLogin, setGoToLogin] = useState(false);\r\n    // const [goToSignUp, setGoToSignUp] = useState(false);\r\n    // const [,setClass] = CustomUseState(homeClass);\r\n    const [,setIsPlaying] = CustomUseState(playingGlobal);\r\n    const [,setSong] = CustomUseState(albumGlobal);\r\n    const [,setQueue] = CustomUseState(queueGlobal);\r\n\r\n    setup = async () => {\r\n        const queue = JSON.parse(localStorage.getItem(\"queue\"));\r\n        if (queue) {\r\n            setIsPlaying(true);\r\n            let nowplaying = JSON.parse(localStorage.getItem(\"nowplaying\"));\r\n            if (nowplaying !== null) {\r\n                const res = await sendRequest({\r\n                    method: \"POST\",\r\n                    endpoint: \"/updateUrls\",\r\n                    data: {\r\n                        list: queue.concat([nowplaying])\r\n                    }\r\n                });\r\n                queue = res.slice(0,res.length - 1);\r\n                nowplaying = res[res.length - 1];\r\n                localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n                localStorage.setItem(\"nowplaying\",JSON.stringify(nowplaying));\r\n\r\n                const index = queue.findIndex(each => {\r\n                    if (each.Title && nowplaying.Title) {\r\n                        return each.Title === nowplaying.Title;\r\n                    } else {\r\n                        return each.Album === nowplaying.Album;\r\n                    }\r\n                });\r\n                if (nowplaying.url !== \"\") {\r\n                    nowplaying.backup = nowplaying.url;\r\n                    nowplaying.url = \"\";\r\n                }\r\n                queue[index] = nowplaying;\r\n                setSong(nowplaying);\r\n                setQueue(queue);\r\n            } else {\r\n                localStorage.removeItem(\"nowplaying\");\r\n                localStorage.removeItem(\"queue\");\r\n                setIsPlaying(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    const call = async () => {\r\n        await wait(2000);\r\n        setLoaderClass(\"openingloader\");\r\n        let res;\r\n        keepServersActive();\r\n        res = await sendRequest({\r\n            method: \"GET\",\r\n            endpoint: \"/activateCheck\"\r\n        });\r\n        if (res.status === \"active\") {\r\n            sendRequest({\r\n                method: \"GET\",\r\n                endpoint: \"/recordTime\"\r\n            });\r\n            // setClass(\"homemain start\");\r\n            // await wait(500);\r\n            // await setup();\r\n            // setLoaderClass(\"openingloader hidden\");\r\n            await wait(500);\r\n            // setMainClass(\"mainwindow-end\");\r\n            // await wait(500);\r\n            setRedirectValue(true);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        call();\r\n    }, []);\r\n\r\n    if (redirectValue) {\r\n        return <Redirect to={prefix+\"/home/homescreen\"} />;\r\n    }\r\n    return(\r\n        // <div className={mainClass}>\r\n        <div className=\"mainwindow\">\r\n            {/* {\r\n                !goToLogin && !goToSignUp ?\r\n                <> */}\r\n                    <div className=\"logoholder\">\r\n                        <img src={logo2} alt=\"Studio\" />\r\n                    </div>\r\n                    <div className={loaderClass}>\r\n                        <div className=\"firstcircle\"></div>\r\n                        <div className=\"secondcircle\"></div>\r\n                        <div className=\"thirdcircle\"></div>\r\n                        <div className=\"fourthcircle\"></div>\r\n                    </div>\r\n                {/* </> : \"\"\r\n            } */}\r\n            {/* {\r\n                goToLogin ? <Login2 setGoToLogin={setGoToLogin} setGoToSignUp={setGoToSignUp}\r\n                    setMainClass={setMainClass} setRedirectValue={setRedirectValue}/> : \"\"\r\n            }\r\n            {\r\n                goToSignUp ? <SignUp2 setGoToLogin={setGoToLogin} setGoToSignUp={setGoToSignUp}/> : \"\"\r\n            } */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Opening2;","export default __webpack_public_path__ + \"static/media/deletewhite.a627436e.svg\";","export default __webpack_public_path__ + \"static/media/playbutton-white.8b822215.svg\";","export default __webpack_public_path__ + \"static/media/pausebutton-white.857cc189.svg\";","export default __webpack_public_path__ + \"static/media/placeholder.1bb935e2.svg\";","export default __webpack_public_path__ + \"static/media/expand-white.a540c45d.svg\";","export default __webpack_public_path__ + \"static/media/minimizeplayer-white.1f648b3d.svg\";","import \"../../../css/homestyles.css\";\r\nimport \"../../../css/teststyles.css\";\r\nimport \"../../../css/hometeststyles.css\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport playbutton from \"../../../assets/playwhite.png\";\r\nimport pausebutton from \"../../../assets/pausewhite.png\";\r\nimport Close from \"../../../assets/deletewhite.svg\";\r\nimport Play from \"../../../assets/playbutton-white.svg\";\r\nimport Pause from \"../../../assets/pausebutton-white.svg\";\r\nimport Placeholder from \"../../../assets/placeholder.svg\";\r\nimport {\r\n    CustomUseState,\r\n    routesGlobal,\r\n    queueOpenedGlobal,\r\n    sendRequest,\r\n    topBarGlobal,\r\n    openerGlobal,\r\n    albumGlobal,\r\n    songIsPausedGlobal,\r\n    playingGlobal,\r\n    queueGlobal,\r\n    topBgColorGlobal,\r\n    modifyLibrary,\r\n    checkX,\r\n    checkY,\r\n    prefix\r\n} from \"../../../common\";\r\nimport Queue from \"./Queue\";\r\nimport { pauseOrPlay } from \"../../../homepage\";\r\nlet topBar, actualIsOpen;\r\n\r\n\r\nconst EachInList = ({ addCloseButton, closeFunc, item }) => {\r\n    const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    const [redirectTo, setRedirectTo] = useState(\"\");\r\n    const [song, setAlbumForPlayer] = CustomUseState(albumGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [, setQueue] = CustomUseState(queueGlobal);\r\n    let songPausedLocal = songPaused;\r\n\r\n\r\n    const display = item => {\r\n        routes.push(`/home/album/${item.Album}`);\r\n        setRoutes(routes);\r\n        setRedirectTo(`${item.Album}`);\r\n    };\r\n\r\n    const handlePlayPause = (e) => {\r\n        e.stopPropagation();\r\n        if (song.Album === item.Album) {\r\n            pauseOrPlay();\r\n            return;\r\n        }\r\n        const main = item.Type === \"Album\" ? item.Tracks : [item];\r\n        if (!playing) setPlaying(true);\r\n        if (item.Type === \"Single\") {\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        } else {\r\n            main.forEach(song => {\r\n                song.Album = item.Album;\r\n                song.Thumbnail = item.Thumbnail;\r\n                song.Color = item.Color;\r\n            });\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        }\r\n        localStorage.setItem(\"queue\",JSON.stringify(main));\r\n        setSongPaused(true);\r\n    };\r\n\r\n    const handleMenu = (e) => {\r\n        e.preventDefault();\r\n    };\r\n\r\n    if (redirectTo !== \"\") {\r\n        return <Redirect to={`/home/album/${redirectTo}`} />\r\n    }\r\n    return(\r\n        <div className=\"cover\">\r\n            {\r\n                addCloseButton ? \r\n                <div className=\"crossinsearch\" onClick={() => closeFunc(item)}>\r\n                    <img src={Close} alt=\"\" />\r\n                </div> : \"\"\r\n            }\r\n            <div className=\"inner\" \r\n            onClick={() => display(item)}\r\n            onContextMenu={handleMenu}\r\n            >\r\n                {\r\n                    // noBg ?\r\n                    // <img src={item.Thumbnail} alt=\"\" className=\"innercoverimg\"/> :\r\n                    // <div className=\"coverimg\"\r\n                    // style={{ backgroundImage: `url(${Placeholder})`, backgroundSize: \"cover\" }}\r\n                    // >\r\n                        <img src={item.Thumbnail} alt=\"\" className=\"innercoverimg\"/>\r\n                    // </div>\r\n                }\r\n                <p className=\"album\">{item.Album}</p>\r\n                <p className=\"artist\">{item.AlbumArtist}</p>\r\n                {/* <div className={ show ? \"blackblurtop\" : \"blackblurtop hidden\" }></div>\r\n                <div className={ show ? \"blackblurbottom\" : \"blackblurbottom hidden\" }></div> */}\r\n                <div className={ (!songPausedLocal && song.Album === item.Album) ? \"floater-stay\" : \"floater\" }>\r\n                    <div className=\"rowplaybutton\" onClick={handlePlayPause}>\r\n                        <img src={ !songPausedLocal && song.Album === item.Album ? pausebutton : playbutton } alt=\"\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport const HorizontalList = ({ list, addCloseButton = false, closeFunc = ()=>{} }) => {\r\n    // const [redirectTo, setRedirectTo] = useState(\"\");\r\n    // const [, setTab] = CustomUseState(tabGlobal);\r\n    // const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    // const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    // actualIsOpen = openerDetails.open;\r\n\r\n    // const handleMenu = (e) => {\r\n    //     e.stopPropagation();\r\n    //     e.preventDefault();\r\n    //     setOpenerDetails({\r\n    //         open: !actualIsOpen,\r\n    //         yValue: e.clientY,\r\n    //         xValue: e.clientX,\r\n    //         type: \"album\",\r\n    //         data: [\r\n    //             {\r\n    //                 name: \"Add album to queue\",\r\n    //                 func: () => {}\r\n    //             },\r\n    //             {\r\n    //                 name: `Play next`,\r\n    //                 func: () => {}\r\n    //             }\r\n    //         ]\r\n    //     });\r\n    // };\r\n\r\n    // if (redirectTo !== \"\") {\r\n    //     return <Redirect to={`/home/album/${redirectTo}`} />\r\n    // }\r\n    return(\r\n        <>\r\n        <div className=\"innerlist\">\r\n            {\r\n                list.map((item,i) => {\r\n                    if (i<5) {\r\n                        return(\r\n                            <EachInList addCloseButton={addCloseButton} closeFunc={closeFunc} item={item} />\r\n                        );\r\n                    }\r\n                    return null;\r\n                })\r\n            }\r\n        </div>\r\n        </>\r\n    );\r\n};\r\nconst EachTile = ({ mouseOver, mouseOut, album }) => {\r\n    let songPausedLocal;\r\n    const [redirectTo, setRedirectTo] = useState(\"\");\r\n    const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    const [song, setAlbumForPlayer] = CustomUseState(albumGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [, setQueue] = CustomUseState(queueGlobal);\r\n    songPausedLocal = songPaused;\r\n\r\n    const moveOver = (album,e) => {\r\n        e.stopPropagation();\r\n        routes.push(`/home/album/${album}`);\r\n        setRoutes(routes);\r\n        setRedirectTo(`${album}`);\r\n    };\r\n    \r\n    const handlePlayPause = (e) => {\r\n        e.stopPropagation();\r\n        // console.log(\"album\",album,\"song\",song);\r\n        if (song.Album === album.Album) {\r\n            pauseOrPlay();\r\n            return;\r\n        }\r\n        const main = album.Type === \"Album\" ? album.Tracks : [album];\r\n        if (!playing) setPlaying(true);\r\n        if (album.Type === \"Single\") {\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        } else {\r\n            main.forEach(song => {\r\n                song.Album = album.Album;\r\n                song.Thumbnail = album.Thumbnail;\r\n                song.Color = album.Color;\r\n            });\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        }\r\n        localStorage.setItem(\"queue\",JSON.stringify(main));\r\n        setSongPaused(true);\r\n    };\r\n\r\n    if (redirectTo !== \"\") {\r\n        return <Redirect to={`/home/album/${redirectTo}`} />\r\n    }\r\n    return(\r\n        <div className=\"rowfirst\"\r\n        onMouseOver={() => mouseOver(album.Color)}\r\n        onClick={(e) => moveOver(album.Album,e)}\r\n        onMouseOut={mouseOut}>\r\n            <img src={album.Thumbnail} alt=\"\" className=\"rowimage\" />\r\n            <div className=\"rowname\">{album.Album}</div>\r\n            <div className={  (!songPausedLocal && song.Album === album.Album) ? \r\n            \"rowplaybuttoncontainer-stay\" : \"rowplaybuttoncontainer\" }>\r\n                <div className=\"rowplaybutton\" onClick={handlePlayPause}>\r\n                    <img src={ !songPausedLocal && song.Album === album.Album ? pausebutton : playbutton } alt=\"\" />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst EachRow = ({ row, mouseOver, mouseOut }) => {\r\n    return(\r\n        <div className=\"row\">\r\n            {\r\n                row.map(each => {\r\n                    return(\r\n                        <EachTile mouseOver={mouseOver} mouseOut={mouseOut} album={each} />\r\n                    );\r\n                })\r\n            }\r\n            {/* <div className=\"rowfirst\"></div>\r\n            <div className=\"rowfirst\"></div> */}\r\n        </div>\r\n    );\r\n};\r\nconst TopDisplay = ({ mostPlayed, mouseOver, mouseOut }) => {\r\n    const { title, list } = mostPlayed;\r\n\r\n    return(\r\n        <div className=\"shortcuts\">\r\n            <div className=\"bigmaintitle\">\r\n                <p>{title}</p>\r\n            </div>\r\n            <div style={{ width: \"100%\", height: \"15px\" }}></div>\r\n            {\r\n                Object.keys(list).map(each => {\r\n                    return(\r\n                        <EachRow row={list[each]} mouseOver={mouseOver} mouseOut={mouseOut}/>\r\n                    );\r\n                })\r\n            }\r\n            <div style={{ width: \"100%\", height: \"15px\" }}></div>\r\n        </div>\r\n    );\r\n};\r\nconst ActualHomeScreen = () => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [all, setAll] = useState({});\r\n    const [played, setPlayed] = useState({});\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [bg, setBg] = useState(\"\");\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [, setTopBgColor] = CustomUseState(topBgColorGlobal);\r\n    actualIsOpen = openerDetails.open;\r\n    topBar = topBarConfig;\r\n\r\n    const mouseOut = () => {\r\n        const { list } = played;\r\n        if (Object.keys(list).length === 0) {\r\n            // setBg(`#121212`);\r\n            // setTopBgColor(\"#202020\");\r\n            setTopBgColor(\"#252525\");\r\n            return;\r\n        }\r\n        let color = list[0][0].Color.split(\",\");\r\n        let another = color;\r\n        color[3] = \"0.3)\";\r\n        color = color.join(\",\");\r\n        setBg(color);\r\n        another[3] = \"0.3)\";\r\n        another = another.join(\",\");\r\n        setTopBgColor(another);\r\n        // return color;\r\n    };\r\n\r\n    const mouseOver = (color) => {\r\n        let changedColor = color.split(\",\");\r\n        changedColor[3] = \"0.3)\";\r\n        changedColor = changedColor.join(\",\");\r\n        setBg(changedColor);\r\n    };\r\n\r\n    const scrollHandler = (e) => {\r\n        const top = e.currentTarget.scrollTop;\r\n        sessionStorage.setItem(\"home-scroll\",top);\r\n        if (Object.keys(played.list).length === 0) {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                // bgColor: bg\r\n                bgColor: \"#252525\"\r\n            });\r\n            return;\r\n        }\r\n        if (top > 200 && topBar.bgColor === \"transparent\") {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                bgColor: bg\r\n            });\r\n        }\r\n        if (top < 200 && topBar.bgColor !== \"transparent\") {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                bgColor: \"transparent\"\r\n            });\r\n        }\r\n        if (actualIsOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const call = async () => {\r\n            const res = await sendRequest({\r\n                method: \"GET\",\r\n                endpoint: `/getHomeAlbums`\r\n            });\r\n            setAll(res.albums);\r\n            setPlayed(res.mostPlayed);\r\n            setIsLoading(false);\r\n        };\r\n        if (isLoading) {\r\n            call();\r\n        } else {\r\n            const main = document.querySelector(\".main\");\r\n            main.scrollTop = sessionStorage.getItem(\"home-scroll\") || 0;\r\n            mouseOut();\r\n        }\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            button: false,\r\n            bgColor: \"transparent\"\r\n        });\r\n    }, [isLoading]);\r\n\r\n    const list = [\"New Releases\",\"Recently Added\",\"Most Played\",\"On Loop\",\"More Like DIVINE\"];\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader />\r\n    }\r\n    return(\r\n        <div className=\"homescreen\">\r\n            <div className=\"main\" onScroll={scrollHandler}>\r\n                <div className=\"colourtop\"\r\n                style={ Object.keys(played.list).length !== 0 ?\r\n                    // { backgroundImage: `linear-gradient(${bg},#121212)` } : \r\n                    { backgroundColor: `${bg}` } : \r\n                    // { backgroundImage: `linear-gradient(rgba(127,255,212,0.2),#121212,#121212,#121212)` } }\r\n                    // { backgroundColor: `#121212` } }\r\n                    { backgroundColor: `#252525` } }\r\n                >\r\n                    <div className=\"forblur\"></div>\r\n                </div>\r\n                <div className=\"noncolour\">\r\n                    {\r\n                        Object.keys(played.list).length !== 0 ? <TopDisplay mostPlayed={played} mouseOver={mouseOver} mouseOut={mouseOut}/> : \"\"\r\n                    }\r\n                    {   \r\n                        Object.keys(all).map((key,i) => {\r\n                            if (all[key].length !== 0) {\r\n                                return(\r\n                                    <div className=\"outline\">\r\n                                        <div className={ i === 0 && Object.keys(played.list).length === 0 ? \"bigmaintitle\" : \"maintitle\" }>\r\n                                            <p>{key}</p>\r\n                                            {/* { all[key].length > 5 ?\r\n                                                <div className=\"viewmore\">\r\n                                                    <p>VIEW MORE</p>\r\n                                                </div> : \"\"\r\n                                            } */}\r\n                                        </div>\r\n                                        <div className=\"list\">\r\n                                            <HorizontalList list={all[key]} />\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            }\r\n                            return null;\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst QuickPickRow = ({ row }) => {\r\n    return(\r\n        <div className=\"quickpickrow\">\r\n            {\r\n                row.map(item => {\r\n                    return <EachInQuickPick song={item} />\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst EachInQuickPick = ({ song, openerFunc }) => {\r\n    const [hovered, setHovered] = useState(false);\r\n\r\n    const handleMenu = e => {\r\n        e.stopPropagation();\r\n        const dimensions = { x: e.clientX, y: e.clientY };\r\n        const windowDim = { width: document.documentElement.clientWidth, height: document.documentElement.clientHeight };\r\n        openerFunc(e, { dimensions, windowDim, song });\r\n    };\r\n\r\n    return(\r\n        <div className=\"eachinquick\" onMouseOver={() => setHovered(true)} onMouseOut={() => setHovered(false)}>\r\n            <div className=\"tile-art\">\r\n                <img src={song.Thumbnail || \"\"} alt=\"\" />\r\n                <div className=\"tiledummyshadow\">\r\n                    <img src={Play} alt=\"\" />\r\n                </div>\r\n            </div>\r\n            <div className={ hovered ? \"tile-details-short\" : \"tile-details\" }>\r\n                <div className=\"tile-title\">{song.Title || song.Album}</div>\r\n                <div className=\"tile-artist\">{song.Artist}</div>\r\n            </div>\r\n            <div className={ hovered ? \"tile-last\" : \"tile-last-hidden\" }>\r\n                <div className=\"tileopener\" onClick={handleMenu}>\r\n                    <div className=\"tileopener1\"></div>\r\n                    <div className=\"tileopener2\"></div>\r\n                    <div className=\"tileopener3\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst StartRadio = ({ picks, openerFunc }) => {\r\n    return(\r\n        <>\r\n            <div className=\"hugetitlename\">\r\n                <div className=\"top-title\">START RADIO FROM A SONG</div>\r\n                <div className=\"bottom-title\">Quick Picks</div>\r\n            </div>\r\n            <div className=\"quickpick-container\">\r\n                <div className=\"quickpick-grid\">\r\n                    {\r\n                        picks.map(item => {\r\n                            return <EachInQuickPick song={item} openerFunc={openerFunc} />\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nconst EachAlbum = ({ item }) => {\r\n    const [song,] = CustomUseState(albumGlobal);\r\n    const [songPaused,] = CustomUseState(songIsPausedGlobal);\r\n    let songPausedLocal = songPaused;\r\n\r\n    const handleMenu = e => {};\r\n\r\n    const handlePlayPause = e => {};\r\n\r\n    if (Object.keys(item).length > 0) {\r\n        return(\r\n            <div className=\"homealbum\">\r\n                <div className=\"innerhomealbum\">\r\n                    <div className=\"homeartcover\">\r\n                        <div className=\"homedummyshadow\"></div>\r\n                        <div className={ (song.Album === item.Album) ? \"homeplaybuttonfixed\" : \"homeplaybutton\" }>\r\n                            <div className=\"innerhomeplaybutton\" onClick={handlePlayPause}>\r\n                                <img src={ (!songPausedLocal && song.Album === item.Album) ? Pause : Play} alt=\"\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"libraryopener\" onClick={handleMenu}>\r\n                            <div className=\"libraryopener1\"></div>\r\n                            <div className=\"libraryopener2\"></div>\r\n                            <div className=\"libraryopener3\"></div>\r\n                        </div>\r\n                        <img src={item.Thumbnail || \"\"} alt=\"\" />\r\n                    </div>\r\n                    <div className=\"homealbumname\">{item.Title || item.Album}</div>\r\n                    <span className=\"homeartistname\">\r\n                        <span>{item.AlbumArtist}</span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    return <div style={{ width: \"15%\", height: \"100%\" }}></div>\r\n};\r\n\r\nconst NewActualHomeScreen = () => {\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    // const [redirectTo, setRedirectTo] = useState(\"\");\r\n    // const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [data, setData] = useState({});\r\n    const [picks, setPicks] = useState({});\r\n    const list = [\"tileopener\",\"tileopener1\",\"tileopener2\",\"tileopener3\"];\r\n    const hist = useHistory();\r\n\r\n    const call = async () => {\r\n        let res = await sendRequest({\r\n            method: \"GET\",\r\n            endpoint: `/getHomeAlbums`\r\n        });\r\n        if (res) {\r\n            res.albums = modifyLibrary(res.albums,6);\r\n            setData(res.albums);\r\n            setPicks(res.quickPicks);\r\n            // setPlayed(res.mostPlayed);\r\n            // ipcRenderer.send(\"response\",res.albums);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const goToAlbum = song => {\r\n        // routes.push(`/home/album/${song.Album}`);\r\n        // setRoutes(routes);\r\n        hist.push(`${prefix}/home/album/${song.Album}`);\r\n        // hist.push(`/`);\r\n        // setRedirectTo(`${song.Album}`);\r\n    };\r\n\r\n    const sendTo = song => {\r\n        // ipcRenderer.send(\"response\",song);\r\n    };\r\n\r\n    const handleMenu = (e, { dimensions, windowDim, song: album }) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: true,\r\n            xValue: checkX(dimensions.x, windowDim.width),\r\n            yValue: checkY(dimensions.y, windowDim.height, 3),\r\n            data: [\r\n                {\r\n                    name: \"Go to album\",\r\n                    func: () => goToAlbum(album)\r\n                },\r\n                {\r\n                    name: \"Add to queue\",\r\n                    func: () => sendTo(album)\r\n                },\r\n                {\r\n                    name: \"Play next\",\r\n                    func: () => sendTo(album)\r\n                },\r\n                {\r\n                    name: \"Start radio\",\r\n                    func: () => sendTo(album)\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const documentClick = e => {\r\n        if (!list.includes(e.target.className) && openerDetails.open) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isLoading) {\r\n            call();\r\n        }\r\n        document.addEventListener(\"click\",documentClick);\r\n        return () => {\r\n            document.removeEventListener(\"click\",documentClick);\r\n        };\r\n    },[isLoading]);\r\n\r\n    \r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        <div className=\"newhome\" style={{ overflowY: `${ openerDetails.open ? \"hidden\" : \"overlay\" }` }}>\r\n            {\r\n                picks.length !== 0 ?\r\n                <StartRadio picks={picks} openerFunc={handleMenu} /> : \"\"\r\n            }\r\n            {\r\n                Object.keys(data).map(each => {\r\n                    return(\r\n                        <>\r\n                        <div className=\"titlename\">{each}</div>\r\n                        <div className=\"homecontainer\">\r\n                            {\r\n                                data[each].map((item,i) => {\r\n                                    if (i<6) {\r\n                                        return <EachAlbum item={item} />\r\n                                    }\r\n                                    return \"\"\r\n                                })\r\n                            }\r\n                        </div>\r\n                        </>\r\n                    );\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst HomeScreen = () => {\r\n    // const [queueOpened,] = CustomUseState(queueOpenedGlobal);\r\n\r\n    // if (queueOpened) {\r\n    //     return <Queue/>\r\n    // }\r\n    return <NewActualHomeScreen/>\r\n};\r\n\r\nexport default HomeScreen;","export default __webpack_public_path__ + \"static/media/playbutton-black.6e5e0441.svg\";","export default __webpack_public_path__ + \"static/media/pausebutton-black.0612d471.svg\";","export default __webpack_public_path__ + \"static/media/addbutton-black.bbb75079.svg\";","export default __webpack_public_path__ + \"static/media/backbutton-white.2e7d8b7c.svg\";","export default \"data:image/png;base64,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\"","import { useState, useEffect, useRef } from \"react\";\r\nimport \"../../../css/albumview.css\";\r\nimport {\r\n    CustomUseState,\r\n    playingGlobal,\r\n    routesGlobal,\r\n    tabGlobal,\r\n    topBarGlobal,\r\n    checkArtist,\r\n    albumGlobal,\r\n    queueGlobal,\r\n    queueOpenedGlobal,\r\n    songIsPausedGlobal,\r\n    openerGlobal,\r\n    responseBar,\r\n    sendRequest\r\n} from \"../../../common\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport { HorizontalList } from \"./HomeScreen\";\r\nimport { useParams, Redirect, useHistory, useLocation } from \"react-router-dom\";\r\nimport play from \"../../../assets/playwhite.png\";\r\nimport Play from \"../../../assets/playbutton-black.svg\";\r\nimport Pause from \"../../../assets/pausebutton-black.svg\";\r\nimport BackButton from \"../../../assets/backbutton-white.svg\";\r\nimport PlayWhite from \"../../../assets/playbutton-white.svg\";\r\nimport PauseWhite from \"../../../assets/pausebutton-white.svg\";\r\nimport AddButton from \"../../../assets/addbutton-black.svg\";\r\nimport pause from \"../../../assets/pausewhite.png\";\r\nimport copyright from \"../../../assets/copyright.png\";\r\nimport Placeholder from \"../../../assets/placeholder.svg\";\r\nimport Queue from \"./Queue\";\r\nimport { pauseOrPlay } from \"../../../homepage\";\r\nlet mainscreen, actualIsOpen, bgChanged = false, topBar, isOpen = false;\r\n\r\n\r\nconst ShowMoreAlbum = ({ moreAlbums, albumartist }) => {\r\n    if (moreAlbums.length === 0) {\r\n        return \"\";\r\n    }\r\n    return(\r\n        <div className=\"morealbumdiv\">\r\n            <div className=\"morebydisplay\">More By {albumartist.split(\",\")[0]}</div>\r\n            <div className=\"list\">\r\n                <HorizontalList list={moreAlbums} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst ActualAlbumView = () => {\r\n    const [p, setP] = useState(\"\");\r\n    const params = useParams();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [albumDetails, setAlbumDetails] = useState({});\r\n    const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    const [,setTab] = CustomUseState(tabGlobal);\r\n    const [redirectValue, setRedirectValue] = useState({ status: false, to: \"\" });\r\n    // const [,setKeepButton] = CustomUseState(keepButtonGlobal);\r\n    // const [,setOnClickFunc] = CustomUseState(onClickFuncGlobal);\r\n    // const [,setTopTitle] = CustomUseState(topTitleGlobal);\r\n    // const [,setBgColor] = CustomUseState(topBgColor);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [albumSong, setAlbumForPlayer] = CustomUseState(albumGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [added, setAdded] = useState(false);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const albummain = useRef();\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [moreAlbums, setMoreAlbums] = useState([]);\r\n    const [,setResObj] = CustomUseState(responseBar);\r\n    actualIsOpen = openerDetails.open;\r\n    topBar = topBarConfig;\r\n    if (p !== params.name) {\r\n        setIsLoading(true);\r\n        setP(params.name);\r\n    }\r\n\r\n\r\n    const checkForLeftPanel = () => {\r\n        const route = routes[routes.length - 1];\r\n        if (route.toLowerCase().includes(\"homescreen\")) setTab(\"Home\");\r\n        else if (route.toLowerCase().includes(\"search\")) setTab(\"Search\");\r\n        else if (route.toLowerCase().includes(\"new-releases\")) setTab(\"New Releases\");\r\n        else if (route.toLowerCase().includes(\"library\")) setTab(\"Library\");\r\n    };\r\n\r\n    const scrollHandler = e => {\r\n        if (albummain.current.scrollTop > 300 && !bgChanged) {\r\n        // if (mainscreen.current.scrollTop > 300 && bgChanged === false) {\r\n            const initColor = albumDetails && albumDetails.Color.substring(5,albumDetails.Color.length-1).split(\",\");\r\n            bgChanged = true;\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                title: albumDetails.Album,\r\n                bgColor: `rgba(${initColor[0]},${initColor[1]},${initColor[2]},0.3)`\r\n            });\r\n            // setTopTitle(albumDetails.Album);\r\n            // setBgColor(`rgba(${initColor[0]},${initColor[1]},${initColor[2]},0.3)`);\r\n        }\r\n        if (albummain.current.scrollTop < 300 && bgChanged) {\r\n        // if (mainscreen.current.scrollTop < 300 && bgChanged === true) {\r\n            bgChanged = false;\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                title: \"\",\r\n                bgColor: \"transparent\"\r\n            });\r\n            // setTopTitle(\"\");\r\n            // setBgColor(\"transparent\");\r\n        }\r\n        if (actualIsOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const goBack = () => {\r\n        if (routes.length > 1) {\r\n            routes.splice(routes.length-1,1);\r\n            setRoutes(routes);\r\n        }\r\n        // checkForLeftPanel();\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            button: false,\r\n            title: \"\",\r\n            bgColor: \"transparent\"\r\n        });\r\n        setRedirectValue({ status: true, to: routes[routes.length - 1] });\r\n    };\r\n\r\n    const call = async () => {\r\n        let res = await sendRequest({\r\n            method: \"POST\",\r\n            endpoint: `/getAlbumDetails`,\r\n            data: {\r\n                album: params.name\r\n            }\r\n        });\r\n        if (res) {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                button: true,\r\n                buttonFunc: goBack\r\n            });\r\n            // setKeepButton(true);\r\n            // setOnClickFunc(goBack);\r\n            // setBgColor(\"transparent\")\r\n            setAlbumDetails(res.album);\r\n            setMoreAlbums(res.moreAlbums);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const playButton = (albumDetails) => {\r\n        console.log(\"clicked\");\r\n        if (decidePlayOrPause()) {\r\n        console.log(\"play/pause\");\r\n            pauseOrPlay();\r\n        } else {\r\n        console.log(\"other\");\r\n            const main = albumDetails.Type === \"Album\" ? albumDetails.Tracks : [albumDetails];\r\n            if (!playing) setPlaying(true);\r\n            if (albumDetails.Type === \"Single\") {\r\n                setQueue(main);\r\n                setAlbumForPlayer(main[0]);\r\n            } else {\r\n                main.forEach(song => {\r\n                    song.Album = albumDetails.Album;\r\n                    song.Thumbnail = albumDetails.Thumbnail;\r\n                    song.Color = albumDetails.Color;\r\n                    song.Year = albumDetails.Year;\r\n                });\r\n                setQueue(main);\r\n                setAlbumForPlayer(main[0]);\r\n            }\r\n            localStorage.setItem(\"queue\",JSON.stringify(main));\r\n            setSongPaused(true);\r\n        }\r\n    };\r\n\r\n    const addAlbumToQueue = () => {\r\n        // if (!added) {\r\n            const main = albumDetails.Type === \"Album\" ? albumDetails.Tracks : [albumDetails];\r\n            const mainQueue = queue;\r\n            const index = mainQueue.indexOf(albumSong);\r\n            if (index === -1) return;\r\n            if (albumDetails.Type === \"Single\") {\r\n                mainQueue.push(main[0]);\r\n                // mainQueue.splice(index,0,main[0]);\r\n                localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n                setQueue(mainQueue);\r\n                // setAlbumForPlayer(main[0]);\r\n                setResObj({ open: true, msg: \"Added single to queue\" });\r\n            } else {\r\n                // let i = 0;\r\n                main.forEach(song => {\r\n                    song.Album = albumDetails.Album;\r\n                    song.Color = albumDetails.Color;\r\n                    song.Thumbnail = albumDetails.Thumbnail;\r\n                    song.Year = albumDetails.Year;\r\n                    mainQueue.push(song);\r\n                    // mainQueue.splice(index+i,0,song);\r\n                    // ++i;\r\n                });\r\n                localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n                setQueue(mainQueue);\r\n                setResObj({ open: true, msg: \"Added album to queue\" });\r\n                // setAlbumForPlayer(main[0]);\r\n            }\r\n            setAdded(true);\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        // }\r\n    };\r\n\r\n    const playAlbumNext = () => {\r\n        if (queue.length !== 0) {\r\n            const index = queue.indexOf(albumSong);\r\n            if (albumDetails.Type === \"Single\") {\r\n                queue.splice(index+1,0,albumDetails);\r\n            } else {\r\n                albumDetails.Tracks.forEach((song,i) => {\r\n                    song.Album = albumDetails.Album;\r\n                    song.Color = albumDetails.Color;\r\n                    song.Thumbnail = albumDetails.Thumbnail;\r\n                    song.Year = albumDetails.Year;\r\n                    queue.splice(index+1+i,0,song);\r\n                });\r\n            }\r\n            localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n            setQueue(queue);\r\n            setResObj({ open: true, msg: `Playing '${albumDetails.Album}' next` });\r\n        }\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: false\r\n        });\r\n    };\r\n\r\n    const displayDirect = (album) => {\r\n        if (Object.keys(album).length > 0) {\r\n            const type = album.Type === \"Album\";\r\n            const dur = type ? album.Tracks[0].Duration.split(\": \") : album.Duration.split(\": \");\r\n            const sec = parseInt(dur[1]);\r\n            return `${dur[0]} min${ sec !== 0 ? ` ${sec} sec` : `` }`;\r\n        }\r\n    };\r\n\r\n    const addAndDisplay = (album) => {\r\n        if (Object.keys(album).length > 0) {\r\n            let min = 0, sec = 0;\r\n            album.Tracks.forEach(track => {\r\n                const dur = track.Duration.split(\": \");\r\n                min += parseInt(dur[0]);\r\n                sec += parseInt(dur[1]);\r\n            });\r\n            min += Math.floor(sec/60);\r\n            sec = sec%60;\r\n            return `${min} min${ sec !== 0 ? ` ${sec} sec` : `` }`;\r\n        }\r\n    };\r\n\r\n    const decidePlayOrPause = () => {\r\n        let sameAlbum = false;\r\n        const titleInSong = albumSong.Title || false;\r\n        if (!titleInSong && albumDetails.Type === \"Album\") {\r\n            return false;\r\n        }\r\n        if (!titleInSong && albumDetails.Type === \"Single\") {\r\n            return albumSong.Album === albumDetails.Album;\r\n        }\r\n        albumDetails.Tracks && albumDetails.Tracks.every(song => {\r\n            if (song.Title === titleInSong) {\r\n                sameAlbum = true;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return sameAlbum;\r\n    };\r\n\r\n    const handleClick = (e) => {\r\n        const list = [\"opener\",\"rowinmenu\",\"rowtext\"];\r\n        if (list.indexOf(e.target.className) === -1 && actualIsOpen) {\r\n            mainscreen.style.overflow = \"overlay\";\r\n            setOpenerDetails({\r\n                open: false,\r\n                xValue: 0,\r\n                yValue: 0,\r\n                type: null\r\n            });\r\n        }\r\n    };\r\n\r\n    const change = (color) => {\r\n        // color = color.split(\",\");\r\n        // color[3] = \"0.5)\";\r\n        // color = color.join(\",\");\r\n        // console.log(\"color\",color);\r\n        return color;\r\n    };\r\n\r\n    const handleMenu = (e) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            open: !actualIsOpen,\r\n            yValue: e.clientY + 10,\r\n            xValue: e.clientX + 10,\r\n            type: \"album\",\r\n            data: [\r\n                {\r\n                    name: \"Add album to queue\",\r\n                    func: addAlbumToQueue\r\n                },\r\n                {\r\n                    name: `Play ${albumDetails.Type.toLowerCase()} next`,\r\n                    func: playAlbumNext\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const compare = (a,b) => {\r\n        if (a.Title > b.Title) return 1;\r\n        return -1;\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (isLoading) {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                button: false,\r\n                title: \"\",\r\n                bgColor: \"transparent\"\r\n            });\r\n            call();\r\n        } else {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                button: true,\r\n                buttonFunc: goBack\r\n            });\r\n            mainscreen = document.querySelector(\".albummain\");\r\n            document.addEventListener(\"mousedown\",handleClick);\r\n        }\r\n        return () => {\r\n            setRedirectValue({ ...redirectValue, status: false });\r\n            document.removeEventListener(\"mousedown\",handleClick);\r\n        };\r\n    },[isLoading]);\r\n\r\n\r\n    if (redirectValue.status) {\r\n        return <Redirect to={`${redirectValue.to}`} />\r\n    }\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        <div className=\"albummain\" onScroll={scrollHandler} ref={albummain}>\r\n            <div className=\"topview\"\r\n            style={{background: `linear-gradient(to bottom, ${change(albumDetails.Color || \"\")}, #121212)`}}\r\n            >\r\n                <div className=\"albumcontainer\">\r\n                    <div className=\"albumart\" style={{\r\n                        backgroundImage: `url(${Placeholder})`,\r\n                        backgroundSize: \"cover\"\r\n                    }}>\r\n                        <img src={albumDetails.Thumbnail || \"\"} alt=\"albumart\" />\r\n                    </div>\r\n                    <div className=\"titlecontainer\">\r\n                        <div className=\"albumtype\">\r\n                            {(albumDetails.Type && albumDetails.Type.toUpperCase()) || \"\"}\r\n                        </div>\r\n                        <div className={albumDetails.Album && albumDetails.Album.length > 22 ? \"albumname-extrasmall\" :\r\n                            albumDetails.Album && albumDetails.Album.length > 18 ? \"albumname-small\" : \"albumname-large\"}>\r\n                        {/* <div className={albumDetails.Album && albumDetails.Album.length > 22 ? \"albumname-extrasmall\" :\r\n                            albumDetails.Album && albumDetails.Album.length > 18 ? \"albumname-extrasmall\" : \"albumname-extrasmall\"}> */}\r\n                            <p>{albumDetails.Album}</p>\r\n                        </div>\r\n                        <div className=\"albumartist\">\r\n                            {\r\n                                Object.keys(albumDetails).length > 0 ?\r\n                                albumDetails.AlbumArtist.split(\", \").map((item,i) => {\r\n                                    return(\r\n                                        <>\r\n                                            <div className=\"albumartistname\"\r\n                                            onMouseOver={(e) => checkArtist(item,e,\"albumartist\")}>\r\n                                                {item || \"\"}\r\n                                            </div>\r\n                                            {\r\n                                                i !== albumDetails.AlbumArtist.split(\", \").length - 1 ?\r\n                                                <div className=\"separator\"></div> : \"\"\r\n                                            }\r\n                                        </>\r\n                                    );\r\n                                }) : \"\"\r\n                            }\r\n                            <div className=\"separator\"></div>\r\n                            <div className=\"year\">{albumDetails.Year || \"\"}</div>\r\n                            <div className=\"separator\"></div>\r\n                            <div className=\"noofsongs\">\r\n                                {\r\n                                    albumDetails.Type === \"Album\" ? \r\n                                    albumDetails.Tracks.length === 1 ? `1 Song` : `${albumDetails.Tracks.length} Songs` : \"1 Song\"\r\n                                }\r\n                            </div>\r\n                            <div className=\"separator\"></div>\r\n                            <div className=\"noofsongs\">\r\n                                {\r\n                                    albumDetails.Tracks && albumDetails.Tracks.length >= 1 ? addAndDisplay(albumDetails) : displayDirect(albumDetails)\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"bottomview\">\r\n                <div className=\"bottomcontainer\">\r\n                    <div className={ decidePlayOrPause() && !songPaused ? \"playcontainerpause\" : \"playcontainer\" }\r\n                    // style={{backgroundColor: albumDetails.Color || \"\"}}\r\n                    // style={{backgroundColor: \"rgba(127,255,212,0.9)\"}}\r\n                    onClick={() => playButton(albumDetails)}>\r\n                        <img src={ decidePlayOrPause() && !songPaused ? pause : play } alt=\"Play\" />\r\n                    </div>\r\n                    <div className=\"openercontrol\" onClick={handleMenu}>\r\n                        <div className=\"opener1\"></div>\r\n                        <div className=\"opener2\"></div>\r\n                        <div className=\"opener3\"></div>\r\n                    </div>\r\n                    {/* <div className=\"addqueuebutton\" onClick={addAlbumToQueue}>\r\n                        {\r\n                            added ? `Added to queue` : `Add ${albumDetails.Album} to queue`\r\n                        }\r\n                    </div>  */}\r\n                </div>\r\n                <div className=\"table\">\r\n                    <div className=\"innertable\">\r\n                        <div className=\"titlerow\">\r\n                            <div className=\"hash\">#</div>\r\n                            <div className=\"nameofthesong\">TITLE</div>\r\n                            <div className=\"duration\">DURATION</div>\r\n                        </div>\r\n                        {\r\n                            albumDetails.Type === \"Album\" ?\r\n                            albumDetails.Tracks.sort(compare).map((song,i) => {\r\n                                return <SongRow song={song} index={i} type=\"Album\" album={albumDetails} albummainDiv={mainscreen}/>\r\n                            }) : \r\n                            <SongRow song={albumDetails} index={0} type=\"Single\" album={albumDetails}/>\r\n                        }\r\n                    </div>        \r\n                </div>\r\n                <div className=\"copyright1\">\r\n                    <img src={copyright} alt=\"\" />\r\n                    All the songs on Studio are pirated and we are aware of this being illegal.\r\n                </div>\r\n                <div className=\"copyright2\">\r\n                    <img src={copyright} alt=\"\" />\r\n                    We do not own any of the songs. This is just a project. Please do not sue us.\r\n                </div>\r\n                {/* <div className=\"dummy\"></div> */}\r\n                <ShowMoreAlbum moreAlbums={moreAlbums} albumartist={albumDetails.AlbumArtist}/>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst SongRow = ({ song, index, type, album }) => {\r\n    const artistArr = song.Artist ? song.Artist.split(\", \") : [];\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [albumSong, setAlbumForPlayer] = CustomUseState(albumGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [hidden, setHide] = useState(true);\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [,setResObj] = CustomUseState(responseBar);\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    actualIsOpen = openerDetails.open;\r\n    if (!actualIsOpen && isOpen) setIsOpen(false);\r\n\r\n\r\n    const setUpPlayer = (song) => {\r\n        if (!playing) setPlaying(true);\r\n        let newQueue = [];\r\n        if (album.Type === \"Album\") {\r\n            album.Tracks.forEach(each => {\r\n                each.Album = album.Album;\r\n                each.Color = album.Color;\r\n                each.Thumbnail = album.Thumbnail;\r\n            });\r\n            newQueue = album.Tracks;\r\n        }\r\n        if (album.Type === \"Single\") {\r\n            song.Color = album.Color;\r\n            song.Thumbnail = album.Thumbnail;\r\n            newQueue.push(song);\r\n        }\r\n        setQueue(newQueue);\r\n        localStorage.setItem(\"queue\",JSON.stringify(newQueue));\r\n        if (albumSong !== song) setSongPaused(true);\r\n        setAlbumForPlayer(song);\r\n    };\r\n\r\n    const addSongToQueue = () => {\r\n        if (album.Type === \"Album\") {\r\n            song.Album = album.Album;\r\n        }\r\n        song.Color = album.Color;\r\n        song.Thumbnail = album.Thumbnail;\r\n        song.Year = album.Year;\r\n        queue.push(song);\r\n        localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n        setQueue(queue);\r\n        setResObj({ open: true, msg: `Added '${song.Title || song.Album}' to queue` });\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: false\r\n        });\r\n    };\r\n\r\n    const playNextInQueue = () => {\r\n        if (queue.length !== 0) {\r\n            if (album.Type === \"Album\") {\r\n                song.Album = album.Album;\r\n            }\r\n            song.Color = album.Color;\r\n            song.Thumbnail = album.Thumbnail;\r\n            song.Year = album.Year;\r\n            const index = queue.indexOf(albumSong);\r\n            queue.splice(index+1,0,song);\r\n            localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n            setQueue(queue);\r\n            setResObj({ open: true, msg: `Playing '${song.Title || song.Album}' next` });\r\n        }\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: false\r\n        });\r\n    };\r\n\r\n    const isCurrentlyPlaying = () => {\r\n        const titleInSong = song.Title || false;\r\n        const titleInAlbumSong = albumSong.Title || false;\r\n        if (titleInSong && titleInAlbumSong) {\r\n            return song.Title === albumSong.Title;\r\n        } else if (!titleInSong && !titleInAlbumSong) {\r\n            return song.Album === albumSong.Album;\r\n        }\r\n    };\r\n\r\n    const handleSongMenu = (e) => {\r\n        e.stopPropagation();\r\n        setIsOpen(true);\r\n        setOpenerDetails({\r\n            open: !actualIsOpen,\r\n            yValue: e.clientY + 10,\r\n            xValue: e.clientX - 200,\r\n            type: \"song\",\r\n            data: [\r\n                {\r\n                    name: \"Add song to queue\",\r\n                    func: addSongToQueue\r\n                },\r\n                {\r\n                    name: \"Play next\",\r\n                    func: playNextInQueue\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const decide = () => {\r\n        if (isOpen && openerDetails.open) {\r\n            return false;\r\n        } else {\r\n            return hidden;\r\n        }\r\n    };\r\n\r\n\r\n    return(\r\n        <div className=\"songrow\" onClick={() => setUpPlayer(song)}\r\n        onMouseOver={() => setHide(false)} onMouseOut={() => setHide(true)}\r\n        style={{ backgroundColor: decide() ? \"transparent\" : \"rgba(255,255,255,0.1)\" }}>\r\n            <div className=\"number\">\r\n                {\r\n                    isCurrentlyPlaying() && !songPaused ?\r\n                    <div className=\"playinganim\">\r\n                        <div className=\"div1\"></div>\r\n                        <div className=\"div2\"></div>\r\n                        <div className=\"div3\"></div>\r\n                        <div className=\"div4\"></div>\r\n                    </div> : index+1\r\n                }\r\n            </div>\r\n            <div className=\"songname\">\r\n                <div className=\"song\" style={{ color: `${ isCurrentlyPlaying() && !songPaused ? \"aquamarine\" : \"white\" }` }}>\r\n                    {\r\n                        type === \"Album\" ? song.Title : song.Album\r\n                    }\r\n                </div>\r\n                <div className=\"artistlist\">\r\n                    {\r\n                        artistArr.map((artist,i) => {\r\n                            return(\r\n                                <>\r\n                                    <p className=\"artistpara\"\r\n                                    onMouseOver={(e) => checkArtist(artist,e,\"artist\")}>{artist}</p>\r\n                                    {\r\n                                        artistArr.length > 1 && i !== artistArr.length-1 ?\r\n                                        <div className=\"artistseparator\"></div> : \"\"\r\n                                    }\r\n                                </>\r\n                            );\r\n                        })\r\n                    }\r\n                </div>\r\n            </div>\r\n            <div className=\"songduration\">\r\n                <div className={ decide() ? \"beforesongduration hidden\" : \"beforesongduration\" } onClick={handleSongMenu}>\r\n                    <div className=\"songopenercontrol\">\r\n                        <div className=\"songopener1\"></div>\r\n                        <div className=\"songopener2\"></div>\r\n                        <div className=\"songopener3\"></div>\r\n                    </div>\r\n                </div>\r\n                {song.Duration || \"\"}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst NewSongRow = ({ song, index, album }) => {\r\n    const [hovered, setHovered] = useState(false);\r\n    const [currentSong, setCurrentSong] = CustomUseState(albumGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [resp, setResp] = CustomUseState(responseBar); \r\n\r\n    const isItSame = () => {\r\n        const currType = currentSong.Type === \"Single\";\r\n        const songType = album.Type === \"Single\";\r\n        const currName = currType ? currentSong.Album : currentSong.Title;\r\n        const songName = songType ? album.Album : song.Title;\r\n        return currName === songName;\r\n    };\r\n\r\n    const setUpPlayer = (song) => {\r\n        if (isItSame()) {\r\n            pauseOrPlay();\r\n            return;\r\n        }\r\n        if (!playing) setPlaying(true);\r\n        let newQueue = [];\r\n        if (album.Type === \"Album\") {\r\n            album.Tracks.forEach(each => {\r\n                each.Album = album.Album;\r\n                each.Color = album.Color;\r\n                each.Year = album.Year;\r\n                each.Thumbnail = album.Thumbnail;\r\n            });\r\n            newQueue = album.Tracks;\r\n        }\r\n        if (album.Type === \"Single\") {\r\n            song.Color = album.Color;\r\n            song.Thumbnail = album.Thumbnail;\r\n            song.Year = album.Year;\r\n            newQueue.push(song);\r\n        }\r\n        setQueue(newQueue);\r\n        localStorage.setItem(\"queue\",JSON.stringify(newQueue));\r\n        if (currentSong !== song) setSongPaused(true);\r\n        setCurrentSong(song);\r\n        setResp({\r\n            ...resp,\r\n            open: true,\r\n            msg: `Playing '${song.Title || song.Album}' now`\r\n        });\r\n    };\r\n\r\n    const playButton = () => {\r\n        // if (isItSame()) {\r\n        //     pauseOrPlay();\r\n        // }\r\n        // if (decidePlayOrPause()) {\r\n        //     pauseOrPlay();\r\n        // } else {\r\n        //     const main = album.Type === \"Album\" ? album.Tracks : [album];\r\n        //     if (!playing) setPlaying(true);\r\n        //     if (album.Type === \"Single\") {\r\n        //         setQueue(main);\r\n        //         setPlayingSong(main[0]);\r\n        //     } else {\r\n        //         main.forEach(song => {\r\n        //             song.Album = album.Album;\r\n        //             song.Thumbnail = album.Thumbnail;\r\n        //             song.Color = album.Color;\r\n        //             song.Year = album.Year;\r\n        //         });\r\n        //         setQueue(main);\r\n        //         setPlayingSong(main[0]);\r\n        //     }\r\n        //     localStorage.setItem(\"queue\",JSON.stringify(main));\r\n        //     setSongPaused(true);\r\n        // }\r\n    };\r\n\r\n    return(\r\n        <div className=\"newsongrow\" onMouseOver={() => setHovered(true)} onMouseOut={() => setHovered(false)}\r\n        style={{ backgroundColor: `${ isItSame() ? \"#202020\" : \"transparent\" }` }}>\r\n            <div className=\"outerindex\">\r\n                <img className={ hovered || isItSame() ? \"outerindeximg\" : \"outerindeximg hidden\" }\r\n                src={ isItSame() && !songPaused ? PauseWhite : PlayWhite} alt=\"\" onClick={() => setUpPlayer(song)}\r\n                title={ isItSame() && !songPaused ? \"Pause\" : \"Play\" } />\r\n                {\r\n                    !hovered && !isItSame() ?\r\n                    <div className=\"index\">{index+1}</div> : \"\"\r\n                }\r\n            </div>\r\n            <div className=\"songnameview\">\r\n                <div>{album.Type === \"Album\" ? song.Title : album.Album}</div>\r\n            </div>\r\n            <div className=\"artistnameview\">\r\n                <div>{album.Type === \"Album\" ? song.Artist : album.Artist}</div>\r\n            </div>\r\n            <div className=\"streams\"></div>\r\n            <div className=\"durationview\">\r\n                <div className=\"durationcontainer\">\r\n                    <div>{album.Type === \"Album\" ? song.Duration : album.Duration}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NewActualAlbumView = () => {\r\n    const params = useParams();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [album, setAlbum] = useState({});\r\n    const [playingSong, setPlayingSong] = CustomUseState(albumGlobal);\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    // const [routes, setRoutes] = CustomUseState(routesGlobal);\r\n    const [,setResObj] = CustomUseState(responseBar);\r\n    // const [redirectValue, setRedirectValue] = useState({ status: false, to: \"\" });\r\n    const topDiv = useRef(null);\r\n    const hist = useHistory();\r\n    const currentLocation = useLocation();\r\n    const list = [\"tileopener\",\"tileopener1\",\"tileopener2\",\"tileopener3\"];\r\n    isOpen = openerDetails.open;\r\n\r\n\r\n    const decidePlayOrPause = () => {\r\n        let sameAlbum = false;\r\n        const titleInSong = playingSong.Title || false;\r\n        if (!titleInSong && album.Type === \"Album\") {\r\n            return false;\r\n        }\r\n        if (!titleInSong && album.Type === \"Single\") {\r\n            return playingSong.Album === album.Album;\r\n        }\r\n        album.Tracks && album.Tracks.every(song => {\r\n            if (song.Title === titleInSong) {\r\n                sameAlbum = true;\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n        return sameAlbum;\r\n    };\r\n\r\n    const addAlbumToQueue = () => {\r\n        const main = album.Type === \"Album\" ? album.Tracks : [album];\r\n        const mainQueue = queue;\r\n        const index = mainQueue.indexOf(playingSong);\r\n        if (index === -1) return;\r\n        if (album.Type === \"Single\") {\r\n            mainQueue.push(main[0]);\r\n            localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n            setQueue(mainQueue);\r\n            setResObj({ open: true, msg: `Added single to queue` });\r\n        } else {\r\n            main.forEach(song => {\r\n                song.Album = album.Album;\r\n                song.Color = album.Color;\r\n                song.Thumbnail = album.Thumbnail;\r\n                song.Year = album.Year;\r\n                mainQueue.push(song);\r\n            });\r\n            localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n            setQueue(mainQueue);\r\n            setResObj({ open: true, msg: `Added album to queue` });\r\n        }\r\n    };\r\n\r\n    const playAlbumNext = () => {\r\n        if (queue.length !== 0) {\r\n            const index = queue.indexOf(playingSong);\r\n            if (album.Type === \"Single\") {\r\n                queue.splice(index+1,0,album);\r\n            } else {\r\n                album.Tracks.forEach((song,i) => {\r\n                    song.Album = album.Album;\r\n                    song.Color = album.Color;\r\n                    song.Thumbnail = album.Thumbnail;\r\n                    song.Year = album.Year;\r\n                    queue.splice(index+1+i,0,song);\r\n                });\r\n            }\r\n            localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n            setQueue(queue);\r\n            setResObj({ open: true, msg: `Playing ${album.Album} next` });\r\n        }\r\n    };\r\n\r\n    const goBack = () => {\r\n        hist.goBack();\r\n        // if (routes.length > 1) {\r\n        //     routes.splice(routes.length-1,1);\r\n        //     setRoutes(routes);\r\n        // }\r\n        // setRedirectValue({ status: true, to: routes[routes.length - 1] });\r\n    };\r\n\r\n    const playButton = () => {\r\n        if (decidePlayOrPause()) {\r\n            pauseOrPlay();\r\n        } else {\r\n            const main = album.Type === \"Album\" ? album.Tracks : [album];\r\n            if (!playing) setPlaying(true);\r\n            if (album.Type === \"Single\") {\r\n                setQueue(main);\r\n                setPlayingSong(main[0]);\r\n            } else {\r\n                main.forEach(song => {\r\n                    song.Album = album.Album;\r\n                    song.Thumbnail = album.Thumbnail;\r\n                    song.Color = album.Color;\r\n                    song.Year = album.Year;\r\n                });\r\n                setQueue(main);\r\n                setPlayingSong(main[0]);\r\n            }\r\n            localStorage.setItem(\"queue\",JSON.stringify(main));\r\n            setSongPaused(true);\r\n        }\r\n    };\r\n\r\n    const call = async () => {\r\n        const res = await sendRequest({\r\n            method: \"POST\",\r\n            endpoint: `/getAlbumDetails`,\r\n            data: {\r\n                album: params.name\r\n            }\r\n        });\r\n        if (res) {\r\n            setAlbum(res.album);\r\n            // setMoreAlbums(res.moreAlbums);\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const addAndDisplay = () => {\r\n        let min = 0, sec = 0;\r\n        if (album.Type === \"Album\") {\r\n            album.Tracks.forEach(track => {\r\n                const dur = track.Duration.split(\": \");\r\n                min += parseInt(dur[0]);\r\n                sec += parseInt(dur[1]);\r\n            });\r\n            min += Math.floor(sec/60);\r\n            sec = sec%60;\r\n        } else {\r\n            const div = album.Duration.split(\": \");\r\n            min = parseFloat(div[0]);\r\n            sec = parseFloat(div[1]);\r\n        }\r\n        return `${min} minutes${ sec !== 0 ? ` ${sec} seconds` : `` }`;\r\n    };\r\n\r\n    const handleMenu = e => {\r\n        e.stopPropagation();\r\n        const dimensions = { x: e.clientX, y: e.clientY };\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: true,\r\n            xValue: dimensions.x + 5,\r\n            yValue: dimensions.y + 5,\r\n            data: [\r\n                {\r\n                    name: `Play next in queue`,\r\n                    func: playAlbumNext\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const documentClick = e => {\r\n        if (!list.includes(e.target.className) && isOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const documentScroll = e => {\r\n        if (isOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n    }, [currentLocation.pathname]);\r\n\r\n    useEffect(() => {\r\n        if (isLoading) {\r\n            call();\r\n        }\r\n        topDiv.current = document.querySelector(\".newalbum\");\r\n        document.addEventListener(\"click\", documentClick);\r\n        topDiv.current && topDiv.current.addEventListener(\"scroll\", documentScroll);\r\n        return () => {\r\n            document.removeEventListener(\"click\", documentClick);\r\n            topDiv.current && topDiv.current.removeEventListener(\"scroll\", documentScroll);\r\n        };\r\n    }, [isLoading]);\r\n\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>;\r\n    }\r\n    return (\r\n        <div className=\"newalbum\">\r\n            <div className=\"topalbumview\">\r\n                {/* <div className=\"backbuttoncontainer\">\r\n                    <div className=\"backbuttonview\" onClick={goBack}>\r\n                        <img src={BackButton} alt=\"\" />\r\n                    </div>\r\n                </div> */}\r\n                <div className=\"coverview\">\r\n                    <img src={album.Thumbnail} alt=\"\" />\r\n                </div>\r\n                <div className=\"detailsview\">\r\n                    <div className=\"innerdetailsview\">\r\n                        <div className=\"albumnameview\">{album.Album}</div>\r\n                        <div style={{width: \"100%\", height: \"10px\"}}></div>\r\n                        <div className=\"detailsoneview\">\r\n                            <div className=\"albumtype\">{album.Type}</div>\r\n                            <div className=\"content-separator\"><div></div></div>\r\n                            {\r\n                                album.AlbumArtist.split(\", \").length > 1 ? \r\n                                album.AlbumArtist.split(\", \").map((each,i) => {\r\n                                    return (\r\n                                        <>\r\n                                            <div className=\"albumartistview\">{each}</div>\r\n                                            {\r\n                                                i !== album.AlbumArtist.split(\", \").length-1 ?\r\n                                                <div className=\"content-separator\"><div></div></div> : \"\"\r\n                                            }\r\n                                        </>\r\n                                    );\r\n                                }) :\r\n                                <div className=\"albumartistview\">{album.AlbumArtist}</div>\r\n                            }\r\n                            <div className=\"content-separator\"><div></div></div>\r\n                            <div className=\"albumyear\">{album.Year}</div>\r\n                        </div>\r\n                        <div className=\"detailsoneview\">\r\n                            <div className=\"albumtype\">\r\n                                { album.Type === \"Single\" ? \"1 Song\" : album.Tracks.length > 1 ? `${album.Tracks.length} songs` : \"1 song\" }\r\n                            </div>\r\n                            <div className=\"content-separator\"><div></div></div>\r\n                            <div className=\"albumtype\">{addAndDisplay()}</div>\r\n                        </div>\r\n                        <div style={{width: \"100%\", height: \"30px\"}}></div>\r\n                        <div className=\"buttonholder\">\r\n                            <div className=\"playbuttonview\" onClick={playButton}>\r\n                                {\r\n                                    decidePlayOrPause() && !songPaused ?\r\n                                    <><img src={Pause} alt=\"\" /><p>PAUSE</p></> :\r\n                                    <><img src={Play} alt=\"\" /><p>PLAY</p></>\r\n                                }\r\n                            </div>\r\n                            <div className=\"addtoqueue\" onClick={addAlbumToQueue}>\r\n                                <img src={AddButton} alt=\"\" />\r\n                                ADD TO QUEUE\r\n                            </div>\r\n                            <div className=\"opener-holder\">\r\n                                <div className=\"tileopener\" title=\"More Options\" onClick={handleMenu}>\r\n                                    <div className=\"tileopener1\"></div>\r\n                                    <div className=\"tileopener2\"></div>\r\n                                    <div className=\"tileopener3\"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div style={{width: \"100%\", height: \"50px\"}}></div>\r\n            <div className=\"bottomalbumview\">\r\n                {\r\n                    album.Type === \"Single\" ?\r\n                    <NewSongRow song={album} index={0} album={album} /> :\r\n                    album.Tracks.map((each,i) => {\r\n                        return <NewSongRow song={each} index={i} album={album} />\r\n                    })\r\n                }\r\n            </div>\r\n            <div style={{width: \"100%\", height: \"20px\"}}></div>\r\n            <div className=\"copyright1\">\r\n                <img src={copyright} alt=\"\" />\r\n                {`All the songs on Studio Music ${String.fromCharCode(8482)} are pirated and we are aware of this being illegal.`}\r\n            </div>\r\n            <div className=\"copyright2\">\r\n                <img src={copyright} alt=\"\" />\r\n                We do not own any of the songs. This is just a project. Please do not sue us.\r\n            </div>\r\n            { playing ? <div style={{width: \"100%\", height: \"100px\"}}></div> : null }\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst AlbumView = (props) => {\r\n    // const [queueOpened,] = CustomUseState(queueOpenedGlobal);\r\n\r\n    // if (queueOpened) {\r\n    //     return <Queue/>\r\n    // }\r\n    return <NewActualAlbumView/>\r\n};\r\n\r\n\r\nexport default AlbumView;","// import \"../../../css/library.css\";\r\nimport \"../../../css/teststyles.css\";\r\nimport { useState, useEffect, useRef } from \"react\";\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport { pauseOrPlay } from \"../../../homepage\";\r\nimport { HorizontalList } from \"./HomeScreen\";\r\nimport Play from \"../../../assets/playbutton-white.svg\";\r\nimport Pause from \"../../../assets/pausebutton-white.svg\";\r\nimport {\r\n    wait,\r\n    queueOpenedGlobal,\r\n    CustomUseState,\r\n    sendRequest,\r\n    topBarGlobal,\r\n    topBgColorGlobal,\r\n    modifyLibrary,\r\n    routesGlobal,\r\n    albumGlobal,\r\n    songIsPausedGlobal,\r\n    playingGlobal,\r\n    queueGlobal,\r\n    openerGlobal,\r\n    checkX,\r\n    checkY,\r\n    responseBar,\r\n    prefix\r\n} from \"../../../common\";\r\nimport Queue from \"./Queue\";\r\nlet topBar, isOpen = null;\r\n\r\n\r\nconst ActualLibrary = () => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [library, setLibrary] = useState({});\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [topBgColor, setBgColor] = CustomUseState(topBgColorGlobal);\r\n    topBar = topBarConfig;\r\n    // let scrolled = false;\r\n\r\n    const scrollHandler = (e) => {\r\n        const top = e.currentTarget.scrollTop;\r\n        sessionStorage.setItem(\"library-scroll\",top);\r\n        if (top > 200 && topBar.bgColor === \"transparent\") {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                button: false,\r\n                bgColor: topBgColor\r\n            });\r\n        } else if (top < 200 && topBar.bgColor !== \"transparent\") {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                button: false,\r\n                bgColor: \"transparent\"\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const call = async () => {\r\n            const saved = JSON.parse(sessionStorage.getItem(\"library\"));\r\n            if (saved !== null) {\r\n                setLibrary(saved);\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n            const res = await sendRequest({\r\n                method: \"GET\",\r\n                endpoint: `/getLibrary`\r\n            });\r\n            await wait(500);\r\n            sessionStorage.setItem(\"library\",JSON.stringify(res));\r\n            setLibrary(res);\r\n            setIsLoading(false);\r\n        };\r\n        if (isLoading) {\r\n            call();\r\n        } else {\r\n            const main = document.querySelector(\".main\");\r\n            main.scrollTop = sessionStorage.getItem(\"library-scroll\") || 0;\r\n        }\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            button: false,\r\n            // bgColor: \"transparent\"\r\n        });\r\n        // return () => {\r\n        //     setTopBarConfig({\r\n        //         ...topBar,\r\n        //         button: false,\r\n        //         bgColor: \"transparent\"\r\n        //     }); \r\n        // };\r\n    },[isLoading]);\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        <div className=\"library\">\r\n            <div className=\"main\" onScroll={scrollHandler}>\r\n                <div className=\"librarytop\"\r\n                style={{ backgroundColor: `${topBgColor}` }}\r\n                >\r\n                    <div className=\"innerlibrarytop\">\r\n                        <div className=\"forblur\"></div>\r\n                        <div className=\"bigtitle\">Library</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"librarybottom\">\r\n                    <div className=\"outline\">\r\n                        {/* <div className=\"bigmaintitle\">\r\n                            <p>Library</p>\r\n                        </div> */}\r\n                        {   \r\n                            Object.keys(library).map(key => {\r\n                                if (library[key].length !== 0) {\r\n                                    return(\r\n                                        <div className=\"list\">\r\n                                            <HorizontalList list={library[key]}/>\r\n                                        </div>\r\n                                    );\r\n                                }\r\n                                return null;\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst EachAlbum = ({ each, openerFunc }) => {\r\n    const [song, setAlbumForPlayer] = CustomUseState(albumGlobal);\r\n    const [playing, setPlaying] = CustomUseState(playingGlobal);\r\n    const [songPaused, setSongPaused] = CustomUseState(songIsPausedGlobal);\r\n    const [, setQueue] = CustomUseState(queueGlobal); \r\n    let songPausedLocal = songPaused;\r\n    const [element, setElement] = useState(null);\r\n    const [show, setShow] = useState(true);\r\n    const hist = useHistory();\r\n\r\n    const observer = useRef(new IntersectionObserver(([entry]) => {\r\n        const { isIntersecting } = entry;\r\n        setShow(isIntersecting);\r\n    }, { threshold: 0.1 }));\r\n\r\n\r\n    useEffect(() => {\r\n        const currentElement = element;\r\n        const currentObserver = observer.current;\r\n        if (currentElement) {\r\n            currentObserver.observe(currentElement);\r\n        }\r\n\r\n        return () => {\r\n            if (currentElement) {\r\n                currentObserver.unobserve(currentElement);\r\n            }\r\n        };\r\n    }, [element]);\r\n\r\n    const display = () => {\r\n        // routes.push(`/home/album/${each.Album}`);\r\n        // window.history.pushState({},\"\",`/home/album/${each.Album}`);\r\n        // setRoutes(routes);\r\n        hist.push(`${prefix}/home/album/${each.Album}`);\r\n        // setRedirectTo(`${each.Album}`);\r\n    };\r\n\r\n    const handleMenu = e => {\r\n        e.stopPropagation();\r\n        const dimensions = { x: e.clientX, y: e.clientY };\r\n        const windowDim = { width: document.documentElement.clientWidth, height: document.documentElement.clientHeight };\r\n        openerFunc(e, { dimensions, windowDim, each });\r\n    };\r\n\r\n    const handlePlayPause = (e) => {\r\n        e.stopPropagation();\r\n        if (song.Album === each.Album) {\r\n            pauseOrPlay();\r\n            return;\r\n        }\r\n        const main = each.Type === \"Album\" ? each.Tracks : [each];\r\n        if (!playing) setPlaying(true);\r\n        if (each.Type === \"Single\") {\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        } else {\r\n            main.forEach(song => {\r\n                song.Album = each.Album;\r\n                song.Thumbnail = each.Thumbnail;\r\n                song.Color = each.Color;\r\n                song.Year = each.Year;\r\n            });\r\n            setQueue(main);\r\n            setAlbumForPlayer(main[0]);\r\n        }\r\n        localStorage.setItem(\"queue\",JSON.stringify(main));\r\n        setSongPaused(true);\r\n    };\r\n\r\n    \r\n    return(\r\n        <div className=\"eachinrow\" ref={setElement}>\r\n            { show ?\r\n                <div className=\"innerineach\">\r\n                    <div className=\"eachartcover\" onClick={display}>\r\n                        <div className=\"eachshadow\"></div>\r\n                        <div className={ (song.Album === each.Album) ? \"showplaybuttonfixed\" : \"showplaybutton\" }>\r\n                            <div className=\"innerplaybutton\" onClick={handlePlayPause}\r\n                            title={ (!songPausedLocal && song.Album === each.Album) ? \"Pause\" : \"Play\" } >\r\n                                <img src={ (!songPausedLocal && song.Album === each.Album) ? Pause : Play } alt=\"\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"library-opener\" onClick={handleMenu} title=\"More Options\">\r\n                            <div className=\"library-opener1\"></div>\r\n                            <div className=\"library-opener2\"></div>\r\n                            <div className=\"library-opener3\"></div>\r\n                        </div>\r\n                        <img src={each.Thumbnail} alt=\"\" className=\"eachalbumart\" />\r\n                    </div>\r\n                    <div className=\"eachalbumname\" onClick={display}>{each.Album}</div>\r\n                    <span className=\"eachbottom\">\r\n                        <span>{each.AlbumArtist}</span>\r\n                    </span>\r\n                </div> :\r\n                \"\"\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CreateRow = ({ row, openerFunc }) => {\r\n    return(\r\n        <div className=\"createrow\">\r\n            {\r\n                row.map((each,i) => {\r\n                    // if (i<6) {\r\n                        if (Object.keys(each).length > 0) {\r\n                            return <EachAlbum each={each} openerFunc={openerFunc} />\r\n                        }\r\n                        return <div className=\"eachinrow\"></div>\r\n                    // }\r\n                    // return \"\";\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst CreateAnotherRow = ({ row }) => {\r\n    return(\r\n        <div className=\"createanotherrow\">\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nconst NewActualLibrary = () => {\r\n    const [library, setLibrary] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [openerDetails, setOpenerDetails] = CustomUseState(openerGlobal);\r\n    const [playingSong,] = CustomUseState(albumGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    const [, setResObj] = CustomUseState(responseBar);\r\n    const topDiv = useRef(null);\r\n    isOpen = openerDetails.open;\r\n    const list = [\"libraryopener\",\"libraryopener1\",\"libraryopener2\",\"libraryopener3\"];\r\n\r\n\r\n    const addAlbumToQueue = each => {\r\n        const main = each.Type === \"Album\" ? each.Tracks : [each];\r\n        const mainQueue = queue;\r\n        const index = mainQueue.indexOf(playingSong);\r\n        if (index === -1) return;\r\n        if (each.Type === \"Single\") {\r\n            mainQueue.push(main[0]);\r\n            localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n            setQueue(mainQueue);\r\n            setResObj({ open: true, msg: `Added single to queue` });\r\n        } else {\r\n            main.forEach(song => {\r\n                song.Album = each.Album;\r\n                song.Color = each.Color;\r\n                song.Thumbnail = each.Thumbnail;\r\n                song.Year = each.Year;\r\n                mainQueue.push(song);\r\n            });\r\n            localStorage.setItem(\"queue\",JSON.stringify(mainQueue));\r\n            setQueue(mainQueue);\r\n            setResObj({ open: true, msg: `Added album to queue` });\r\n        }\r\n    };\r\n\r\n    const playAlbumNext = each => {\r\n        if (queue.length !== 0) {\r\n            const index = queue.indexOf(playingSong);\r\n            if (each.Type === \"Single\") {\r\n                queue.splice(index+1,0,each);\r\n            } else {\r\n                each.Tracks.forEach((song,i) => {\r\n                    song.Album = each.Album;\r\n                    song.Color = each.Color;\r\n                    song.Thumbnail = each.Thumbnail;\r\n                    song.Year = each.Year;\r\n                    queue.splice(index+1+i,0,song);\r\n                });\r\n            }\r\n            localStorage.setItem(\"queue\",JSON.stringify(queue));\r\n            setQueue(queue);\r\n            setResObj({ open: true, msg: `Playing ${each.Album} next` });\r\n        }\r\n    };\r\n\r\n    const handleMenu = (e, { dimensions, windowDim, each: album }) => {\r\n        e.stopPropagation();\r\n        setOpenerDetails({\r\n            ...openerDetails,\r\n            open: true,\r\n            xValue: checkX(dimensions.x, windowDim.width),\r\n            yValue: checkY(dimensions.y, windowDim.height, 3),\r\n            data: [\r\n                {\r\n                    name: \"Add to queue\",\r\n                    func: () => addAlbumToQueue(album)\r\n                },\r\n                {\r\n                    name: \"Play next\",\r\n                    func: () => playAlbumNext(album)\r\n                },\r\n                {\r\n                    name: \"Start radio\",\r\n                    func: ()=>{}\r\n                }\r\n            ]\r\n        });\r\n    };\r\n\r\n    const documentClick = e => {\r\n        if (!list.includes(e.target.className)) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const documentScroll = e => {\r\n        if (isOpen) {\r\n            setOpenerDetails({\r\n                ...openerDetails,\r\n                open: false\r\n            });\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const call = async () => {\r\n            const saved = JSON.parse(sessionStorage.getItem(\"library\"));\r\n            // const saved = null;\r\n            if (saved !== null) {\r\n                setLibrary(saved);\r\n                setIsLoading(false);\r\n                return;\r\n            }\r\n            const res = await sendRequest({\r\n                method: \"GET\",\r\n                endpoint: `/getLibrary`\r\n            });\r\n            if (res) {\r\n                sessionStorage.setItem(\"library\",JSON.stringify(res));\r\n                setLibrary(res);\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        if (isLoading) {\r\n            call();\r\n        }\r\n        topDiv.current = document.querySelector(\".dummymid\");\r\n        topDiv.current && topDiv.current.addEventListener(\"scroll\", documentScroll);\r\n        document.addEventListener(\"click\", documentClick);\r\n        return () => {\r\n            topDiv.current && topDiv.current.removeEventListener(\"scroll\", documentScroll);\r\n            document.removeEventListener(\"click\", documentClick);\r\n        };\r\n    }, [isLoading]);\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        // <div className=\"dummymid\" style={{ overflowY: `${ isOpen ? \"hidden\" : \"overlay\" }` }}>\r\n            <div className=\"dummymid\">\r\n                <div className=\"libraryname\">Library</div>\r\n                <div className=\"librarycontainer\">\r\n                    <div className=\"librarygrid\">\r\n                        {\r\n                            library.map(item => {\r\n                                return <EachAlbum each={item} openerFunc={handleMenu} />\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        // </div>\r\n    );\r\n};\r\n\r\nconst Library = () => {\r\n    // const [queueOpened,] = CustomUseState(queueOpenedGlobal);\r\n    \r\n    // if (queueOpened) {\r\n    //     return <Queue/>\r\n    // }\r\n    return <NewActualLibrary/>\r\n};\r\n\r\n\r\nexport default Library;","import { useState, useEffect } from \"react\";\r\nimport \"../../../css/radiostyles.css\";\r\nimport {\r\n    CustomUseState,\r\n    radioGlobal,\r\n    playingGlobal,\r\n    queueGlobal,\r\n    albumGlobal,\r\n    queueOpenedGlobal,\r\n    // topBarGlobal,\r\n    sendRequest\r\n} from \"../../../common\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport Queue from \"./Queue\";\r\n\r\n\r\nconst ActualRadio = () => {\r\n    const [isRadioOn,] = CustomUseState(radioGlobal);\r\n    // const [song, setSong] = CustomUseState(albumGlobal);\r\n    const [queue, setQueue] = CustomUseState(queueGlobal);\r\n    // const [, setPlaying] = CustomUseState(playingGlobal);\r\n    // const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const decide = (color) => {\r\n        color = color.split(\",\");\r\n        color[3] = \"0.5)\";\r\n        color = color.join(\",\");\r\n        return color;\r\n    };\r\n\r\n    const call = async () => {\r\n        const res = await sendRequest({\r\n            method: \"GET\",\r\n            endpoint: `/shuffle`\r\n        });\r\n        setQueue(res);\r\n        setIsLoading(false);\r\n        // setPlaying(true);\r\n        // setSong(res.data[0]);\r\n        // setRadioOn(true);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isRadioOn) {\r\n            call();\r\n        } else {\r\n            setIsLoading(false);\r\n        }\r\n        // setTopBarConfig({\r\n        //     buttonFunc: () => {},\r\n        //     title: \"\",\r\n        //     bgColor: \"transparent\",\r\n        //     button: false\r\n        // });\r\n    }, []);\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        <div className=\"radio\"\r\n        // style={{ backgroundColor: `${decide(queue[1].Color)}` }}\r\n        >\r\n            <div className=\"topdiv\">\r\n                <div className=\"firstalbum\">\r\n                    <img src={queue[0].Thumbnail} alt=\"\"/>\r\n                </div>\r\n                <div className=\"mainalbum\">\r\n                    <img src={queue[1].Thumbnail} alt=\"\"/>\r\n                </div>\r\n                <div className=\"secondalbum\">\r\n                    <img src={queue[2].Thumbnail} alt=\"\"/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Radio = () => {\r\n    const [queueOpened,] = CustomUseState(queueOpenedGlobal);\r\n\r\n    if (queueOpened) {\r\n        return <Queue/>\r\n    }\r\n    return <ActualRadio/>\r\n};\r\n\r\n\r\nexport default Radio;","import { useState, useEffect } from \"react\";\r\nimport \"../../../css/searchstyles.css\";\r\nimport \"../../../css/homestyles.css\";\r\nimport SearchIcon from \"../../../assets/searchicon.svg\";\r\nimport Close from \"../../../assets/blackclose.png\";\r\nimport Play from \"../../../assets/playwhite.png\";\r\nimport {\r\n    sendRequest,\r\n    queueOpenedGlobal,\r\n    CustomUseState,\r\n    searchBarGlobal,\r\n    topBarGlobal,\r\n    topBgColorGlobal\r\n} from \"../../../common\";\r\nimport Queue from \"./Queue\";\r\nimport { MidPanelLoader } from \"./index\";\r\nimport { HorizontalList } from \"./HomeScreen\";\r\nlet timeout = undefined, searchBar, topBar, topBgColorLocal, setcolor = false;\r\n\r\n\r\n\r\nconst InnerSongList = ({ obj }) => {\r\n    const [hidden, setHidden] = useState(true);\r\n\r\n    const decide = () => {\r\n        if (hidden) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    return(\r\n        <div className=\"leftlist\" onMouseOver={() => setHidden(false)} onMouseOut={() => setHidden(true)}\r\n        style={{ backgroundColor: decide() ? \"#181818\" : \"rgba(255,255,255,0.1)\" }}>\r\n            <div className=\"leftalbumart\">\r\n                {/* <div className=\"innerleftalbumart\"> */}\r\n                    <img src={obj.Thumbnail} alt=\"\" />\r\n                {/* </div> */}\r\n            </div>\r\n            <div className=\"names\">\r\n                <div className=\"songtitlename\">{obj.Title || obj.Album}</div>\r\n                <div className=\"songartist\">{obj.Artist}</div>\r\n            </div>\r\n            <div className={ decide() ? \"songplay hidden\" : \"songplay\" }>\r\n                <div className=\"innersongplay\">\r\n                    <img src={Play} alt=\"\" className=\"img\"/>\r\n                </div>\r\n            </div>\r\n            <div className={ decide() ? \"beforesongresult hidden\" : \"beforesongresult\" }>\r\n                <div className=\"customopener\">\r\n                    <div className=\"opener1\"></div>\r\n                    <div className=\"opener2\"></div>\r\n                    <div className=\"opener3\"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SongList = ({ list }) => {\r\n    return(\r\n        <div className=\"songlist\">\r\n            {\r\n                list.map(each => {\r\n                    return <InnerSongList obj={each} />;\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Each = ({ each }) => {\r\n    const [hover, setHover] = useState(false);\r\n    // let hoverLocal = hover;\r\n\r\n    const lessen = (value) => {\r\n        let colors = each.Color.split(\",\");\r\n        colors[3] = `${value})`;\r\n        colors = colors.join(\",\");\r\n        return colors;\r\n    };\r\n\r\n    return(\r\n        <div className=\"eachitem\">\r\n            <div className=\"songitem\"\r\n            // style={{ backgroundColor: `${ hover ? lessen(0.1) : lessen(0.7) }` }}\r\n            // style={{ backgroundImage: `url(${each.Thumbnail})`, backgroundSize: \"cover\" }}\r\n            onMouseOver={() => setHover(true)}\r\n            onMouseOut={() => setHover(false)}\r\n            >\r\n                <div className=\"innersongitem\"\r\n                style={{ backgroundImage: `url(${each.Thumbnail})`, backgroundSize: \"cover\" }}\r\n                >\r\n                    <div className=\"fullscreen\"\r\n                    style={{ backgroundColor: `${ hover ? \"rgba(0,0,0,0.4)\" : \"rgba(0,0,0,0.7)\" }` }}>\r\n                        <div className=\"actualcontents\">\r\n                            {/* <img src={each.Thumbnail} className=\"itemart\" alt=\"\" /> */}\r\n                            <div className=\"itemalbum\">{each.Album}</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RecommendedRow = ({ row }) => {\r\n    return(\r\n        <div className=\"recommendedrow\">\r\n            {\r\n                row.map(each => {\r\n                    return(\r\n                        <Each each={each} />\r\n                    );\r\n                })\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ActualSearch = () => {\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchConfig, setSearchConfig] = CustomUseState(searchBarGlobal);\r\n    const [topBarConfig, setTopBarConfig] = CustomUseState(topBarGlobal);\r\n    const [topBgColor, setTopBgColor] = CustomUseState(topBgColorGlobal);\r\n    const [recents, setRecents] = useState([]);\r\n    const [recommended, setRecommended] = useState({});\r\n    searchBar = searchConfig;\r\n    topBar = topBarConfig;\r\n    topBgColorLocal = topBgColor;\r\n    let { result, input, callLoading } = searchBar;\r\n\r\n    const recentSearches = async () => {\r\n        const res = await sendRequest({\r\n            method: \"GET\",\r\n            endpoint: \"/getRecentSearch\"\r\n        });\r\n        setIsLoading(false);\r\n        setRecents(res.recents);\r\n        setRecommended(res.recommended);\r\n        // setTopBarConfig({\r\n        //     ...topBar,\r\n        //     // bgColor: \"#121212\"\r\n        //     bgColor: topBgColor\r\n        // });\r\n    };\r\n\r\n    const closeFunc = async (item) => {\r\n        // console.log(\"item\",item);\r\n        const res = await sendRequest({\r\n            method: \"POST\",\r\n            endpoint: \"/removeFromRecents\",\r\n            data: {\r\n                item\r\n            }\r\n        });\r\n        console.log(\"res\",res);\r\n    };\r\n\r\n    const scrollHandler = (e) => {\r\n        const top = e.currentTarget.scrollTop;\r\n        if (top > 100 && !setcolor) {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                bgColor: topBgColorLocal\r\n            });\r\n            setcolor = true;\r\n        }\r\n        if (top < 100 && setcolor) {\r\n            setTopBarConfig({\r\n                ...topBar,\r\n                // bgColor: \"#121212\"\r\n                bgColor: \"transparent\"\r\n            });\r\n            setcolor = false;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        setSearchConfig({\r\n            ...searchBar,\r\n            show: true,\r\n            // input: \"\",\r\n            result: {}\r\n        });\r\n        setTopBarConfig({\r\n            ...topBar,\r\n            // bgColor: \"#121212\"\r\n            bgColor: \"transparent\"\r\n        });\r\n        recentSearches();\r\n        return () => {\r\n            setSearchConfig({\r\n                ...searchBar,\r\n                input: \"\",\r\n                show: false,\r\n                callLoading: false\r\n            });\r\n\r\n        }\r\n    },[]);\r\n\r\n    if (isLoading) {\r\n        return <MidPanelLoader/>\r\n    }\r\n    return(\r\n        <div className=\"searchmain\" onScroll={scrollHandler}>\r\n            <div className=\"librarytop\"\r\n            style={{ backgroundColor: topBgColor }}\r\n            >\r\n                <div className=\"innerlibrarytop\">\r\n                    <div className=\"forblur\"></div>\r\n                    <div className=\"bigtitle\">Search</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"noncolour\">\r\n            {\r\n                callLoading ? <MidPanelLoader/> : \"\"\r\n            }\r\n            {\r\n                recents.length !== 0 && !callLoading && input === \"\" ?\r\n                <>\r\n                    <div style={{ width: \"100%\", height: \"10px\" }}/>\r\n                    <div className=\"outline\">\r\n                        <div className=\"maintitle\">\r\n                            <p>Recent Searches</p>\r\n                            <div className=\"viewmore\">\r\n                                <p>Clear All</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"list\">\r\n                            <HorizontalList list={recents} addCloseButton={true} closeFunc={closeFunc}/>\r\n                        </div>\r\n                    </div>\r\n                </> : \"\"\r\n            }\r\n            {\r\n                Object.keys(recommended).length !== 0 && !callLoading && input === \"\" ?\r\n                <div className=\"outline\">\r\n                    <div className=\"maintitle\">\r\n                        <p>Recommended</p>\r\n                    </div>\r\n                    <div style={{ width: \"100%\", height: \"0px\" }}></div>\r\n                    {/* {\r\n                        Object.keys(recommended).map(row => {\r\n                            return(\r\n                                <RecommendedRow row={recommended[row]} />\r\n                            );\r\n                        })\r\n                    } */}\r\n                    {\r\n                        Object.keys(recommended).map(each => {\r\n                            return(\r\n                                <div className=\"list\">\r\n                                    <HorizontalList list={recommended[each]} />\r\n                                </div>\r\n                            );\r\n                        })\r\n                    }\r\n                </div> : \"\"\r\n            }\r\n            {\r\n                result.noResults && !callLoading && input !== \"\" ?\r\n                <div className=\"noresults\">No results found for \"{input}\"</div> : \"\"\r\n            }\r\n            {   \r\n                Object.keys(result).length > 1 && input !== \"\" ?\r\n                <div className=\"smain\">\r\n                    <div className=\"outline\">\r\n                        {\r\n                            Object.keys(result.songs).length !== 0 ?\r\n                            <div className=\"maintitle\">\r\n                                <p>Songs</p>\r\n                            </div> : \"\"\r\n                        }\r\n                        {   \r\n                            Object.keys(result.songs).map(each => {\r\n                                return(\r\n                                    // <div className=\"list\">\r\n                                        <SongList list={result.songs[each]}/>\r\n                                    // </div>\r\n                                );\r\n                            })\r\n                        }\r\n                        {\r\n                            Object.keys(result.albums).length !== 0 ?\r\n                            <div style={{ width: \"100%\", height: \"15px\" }}></div> : \"\"\r\n                        }\r\n                        {\r\n                            Object.keys(result.albums).length !== 0 ?\r\n                            <div className=\"maintitle\">\r\n                                <p>Albums</p>\r\n                            </div> : \"\"\r\n                        }\r\n                        {   \r\n                            Object.keys(result.albums).map(each => {\r\n                                return(\r\n                                    <div className=\"list\">\r\n                                        <HorizontalList list={result.albums[each]}/>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div> \r\n                : \"\"\r\n            }\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Search = () => {\r\n    // const [queueOpened,] = CustomUseState(queueOpenedGlobal);\r\n    const [searchConfig, setSearchConfig] = CustomUseState(searchBarGlobal);\r\n\r\n    // if (queueOpened) {\r\n    //     return <Queue/>\r\n    // }\r\n    // return <ActualSearch/>\r\n    useEffect(() => {\r\n        console.log(\"search page\");\r\n        return () => {\r\n            setSearchConfig({\r\n                ...searchConfig,\r\n                open: false\r\n            });\r\n        };\r\n    }, []);\r\n\r\n    return <></>\r\n};\r\n\r\n\r\nexport default Search;","export default __webpack_public_path__ + \"static/media/searchicon.309d1858.svg\";","export default __webpack_public_path__ + \"static/media/homewhite.6e33643e.svg\";","export default __webpack_public_path__ + \"static/media/searchwhite.4fe8d5d8.svg\";","export default __webpack_public_path__ + \"static/media/librarywhite.185668a5.svg\";","export default __webpack_public_path__ + \"static/media/homelight.c658b9a5.svg\";","export default __webpack_public_path__ + \"static/media/searchlight.91c59e99.svg\";","export default __webpack_public_path__ + \"static/media/librarylight.a60532e6.svg\";","export default __webpack_public_path__ + \"static/media/radio2.c915fa44.svg\";","export default __webpack_public_path__ + \"static/media/radiolight2.99345082.svg\";","export default __webpack_public_path__ + \"static/media/tickmark.5e31aa4d.svg\";","export default __webpack_public_path__ + \"static/media/repeat-white.e8be9738.svg\";","export default __webpack_public_path__ + \"static/media/repeat-one-white.b954ab53.svg\";","export default __webpack_public_path__ + \"static/media/norepeat-disabled.3779b00d.svg\";","export default __webpack_public_path__ + \"static/media/shuffle-disabled.6cbab426.svg\";","export default __webpack_public_path__ + \"static/media/shuffle-enabled.1aa12505.svg\";","export default __webpack_public_path__ + \"static/media/nextbutton-white.4903605d.svg\";","export default __webpack_public_path__ + \"static/media/previousbutton-white.fc94f5fa.svg\";","export default __webpack_public_path__ + \"static/media/uparrow.d3776cda.svg\";","export default __webpack_public_path__ + \"static/media/fullscreenaquamarine.ce4d0512.svg\";","export default __webpack_public_path__ + \"static/media/fullscreenwhite.8af5e58a.svg\";","export default __webpack_public_path__ + \"static/media/innerfullaquamarine.f6334fc4.svg\";","export default __webpack_public_path__ + \"static/media/innerfullwhite.f398c696.svg\";","export default __webpack_public_path__ + \"static/media/downarrow.fa20232f.svg\";","export default __webpack_public_path__ + \"static/media/volume.9ed51f42.svg\";"],"sourceRoot":""}